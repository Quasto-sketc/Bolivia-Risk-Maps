<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Risk Mapping in the Cono Sur Region in Cochabamba, Bolivia - 1&nbsp; Drought Risk</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Frost_Risk.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Drought_Risk.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Drought Risk</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Risk Mapping in the Cono Sur Region in Cochabamba, Bolivia</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Drought_Risk.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Drought Risk</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Frost_Risk.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Frost Risk</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Flood_Risk.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Flood Risk</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Appendix.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Author.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About the Author</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sec-sec-drought" id="toc-sec-sec-drought" class="nav-link active" data-scroll-target="#sec-sec-drought"><span class="header-section-number">1.1</span> Frame of Reference</a></li>
  <li><a href="#methodology-of-the-case-study" id="toc-methodology-of-the-case-study" class="nav-link" data-scroll-target="#methodology-of-the-case-study"><span class="header-section-number">1.2</span> Methodology of the Case Study</a>
  <ul class="collapse">
  <li><a href="#river-data" id="toc-river-data" class="nav-link" data-scroll-target="#river-data"><span class="header-section-number">1.2.1</span> River Data</a></li>
  <li><a href="#maximum-temperature-data" id="toc-maximum-temperature-data" class="nav-link" data-scroll-target="#maximum-temperature-data"><span class="header-section-number">1.2.2</span> Maximum Temperature Data</a></li>
  <li><a href="#dem-inclination-data" id="toc-dem-inclination-data" class="nav-link" data-scroll-target="#dem-inclination-data"><span class="header-section-number">1.2.3</span> DEM (Inclination) Data</a></li>
  <li><a href="#dem-perspective-data" id="toc-dem-perspective-data" class="nav-link" data-scroll-target="#dem-perspective-data"><span class="header-section-number">1.2.4</span> DEM (Perspective) Data</a></li>
  <li><a href="#precipitation-data" id="toc-precipitation-data" class="nav-link" data-scroll-target="#precipitation-data"><span class="header-section-number">1.2.5</span> Precipitation Data</a></li>
  </ul></li>
  <li><a href="#results-drought-risk-modeling" id="toc-results-drought-risk-modeling" class="nav-link" data-scroll-target="#results-drought-risk-modeling"><span class="header-section-number">1.3</span> Results Drought Risk Modeling</a></li>
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion"><span class="header-section-number">1.4</span> Discussion</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">1.5</span> Conclusion</a></li>
  <li><a href="#appendix-maps" id="toc-appendix-maps" class="nav-link" data-scroll-target="#appendix-maps"><span class="header-section-number">1.6</span> Appendix Maps</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Drought Risk</span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="sec-sec-drought" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="sec-sec-drought"><span class="header-section-number">1.1</span> Frame of Reference</h2>
<p>This study was conducted in four areas of Cochabamba’s Valle Alto region: Aiquile, Pasorapa, Pojo, and Totoro. These areas are known for their vast farmlands that produce a variety of crops.</p>
<p>Mountain water sources are vital for irrigation in these and other areas. However, there have been disputes over water rights within and between these areas. Changes in climate patterns have led to concerns about water security, causing extended periods of water shortage.</p>
<p>The goal of this study is to develop a method to identify potential weather risks like <a href="#sec-sec-drought">drought</a>, <a href="Frost_Risk.html#sec-sec-frost">frost</a>, and <a href="Flood_Risk.html#sec-sec-flood">flood</a>, Taking into account the distinctive physical and social attributes of the four states within the Bolivian high valley region. The findings are intended to support risk prevention policies in all four areas.</p>
<p>This study uses a cost-effective, scientific, and adaptable approach to different situations. It combines detailed physical aspects, and aims to influencing decisions about land and natural resource management. This method could potentially be used in other regions and nationally.</p>
<p>Drought is a weather event that happens when there’s less rainfall than average over a period, causing a significant and long-lasting water shortage that affects human activities. Droughts, which are becoming more common worldwide, are among the most economically damaging natural events, leading to the loss of large areas of crops and the death of many livestock.</p>
<p>Risk is the result of the dynamic relationship between threats and vulnerabilities within a society or its specific components. It’s calculated using the following equation: Risk depends on the likelihood of hazardous events happening and the presence of a vulnerable population exposed to the threat. This means that if there’s no threat, there’s no risk, or if the population isn’t vulnerable, the risk is zero.</p>
<p>Risk predicts the probability of future disasters, indicating the potential future damage and losses associated with the impact of an external physical event on a vulnerable society, exceeding the society’s ability to recover from such impacts on its own.</p>
<p>Disasters happen because of unmanaged risks. Therefore, it’s important for areas to establish risk management policies and create planning bodies like a “Risk Management Unit,” equipped with planning tools and instruments. Risk maps are important tools for land planning that greatly help with risk management.</p>
<p>A group of development workers known as the <em>Equipo Cono Sur</em>, from the <a href="https://www.agrecolandes.org/">NGO Agrecol Andes</a>, are focused on helping communities and governments in the Cochabamba’s Valle Alto region: including special efforts in Aiquile, Pasorapa, Pojo, and Totoro prepare for future challenges such as droughts, frosts, and floods. They aim to adapt local residents and governments to these risks.</p>
<p>Additionally, they recently conducted a case study on Recharge Zones (called <em>“Zonas de Recarga Hídrica”</em> in Spanish) using a similar professional approach as this Multicriteria Analysis Case Study. This Document can been viewed here: <a href="https://www.dropbox.com/scl/fi/ivg9uhrncd9aym88kewhn/Multicriterianalysis-Recarga-H-drica.pdf?rlkey=jz011qofqpqts1y2ixl1o295m&amp;dl=0">Multicriterianalysis Recarga Hídrica (2023).</a></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(raster)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(terra)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(webshot2)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(geodata)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>bol   <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">"gadm41_BOL_3.shp"</span>, <span class="at">crs =</span> <span class="dv">4326</span>) <span class="co"># Pasorapa extent</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># pop &lt;- rast("gpw_v4_population_count_rev11_2020_2pt5_min.tif")</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># river data </span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># river &lt;- read_sf("HydroRIVERS_v10_sa.shp")</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="do">## raster</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co"># dem &lt;- rast("s20w070_dem.tif")</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Land use # (only 11 classes)</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co"># land &lt;- read_sf("cob_uso.shp")</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Data from Tito (only 3 classes)</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co"># land_new &lt;- rast("uso_suelo.tif")</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co"># land_filter &lt;- land %&gt;% filter(!USO %in% c("Recreativo: Escénico, Turístico", "Productivo Aguas Superficiales Mixto: Generación de energía eléctrica Agua para riego, Pesca, Captación de Agua potable, Transporte Fluvial", "Extractivo Minero en parte: Explotación de yacimientos mineros; Por sectores escaso pastoreo directo", "Productivo Aguas Superficiales Mixto: Generación de energía eléctrica Agua para riego, Pesca, Captación de Agua potable, Transporte Fluvial", "Extractivo Minero, Productivo Agropecuario, Protectivo, Vida silvestre", "Productivo Agropecuario, Extractivo Forestal y Petrolero: Cultivos Alimenticios, Pastoreo directo por sectores, Productos Maderables y no Maderables, Extracción de Combustibles fósiles", "Productivo Agropecuario, Extractivo Forestal: Pastoreo, Ramoneo, Cultivos alimenticios en algunos sectores, Extracción de Leña en parte")) </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select municipalities</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>cocha <span class="ot">&lt;-</span> bol <span class="sc">%&gt;%</span> <span class="fu">filter</span>(NAME_1 <span class="sc">==</span> <span class="st">"Cochabamba"</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># filter der bol shapes Aiquile</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>Pasorapa <span class="ot">&lt;-</span> cocha <span class="sc">%&gt;%</span> <span class="fu">filter</span>(NAME_3 <span class="sc">==</span> <span class="st">"Pasorapa"</span>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>Aiquile  <span class="ot">&lt;-</span> cocha <span class="sc">%&gt;%</span> <span class="fu">filter</span>(NAME_3 <span class="sc">==</span> <span class="st">"Aiquile"</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co"># new</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>totora   <span class="ot">&lt;-</span> cocha <span class="sc">%&gt;%</span> <span class="fu">filter</span>(NAME_3 <span class="sc">==</span> <span class="st">"Totora"</span>)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>pojo     <span class="ot">&lt;-</span> cocha <span class="sc">%&gt;%</span> <span class="fu">filter</span>(NAME_3 <span class="sc">==</span> <span class="st">"Pojo"</span>)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co"># read bol_1.shp and Cochabamba.shp</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>bol_1      <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">"bol_1.shp"</span>)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>Cochabamba <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">"Cochabamba.shp"</span>)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co"># plot first map</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(bol_1) <span class="sc">+</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>,) <span class="sc">+</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Cochabamba) <span class="sc">+</span>  </span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_text</span>(<span class="st">"NAME_1"</span>, <span class="at">size =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">250</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>)) <span class="sc">+</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Data source: gdm.org"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"center"</span>) <span class="sc">+</span> <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a><span class="co"># cocha is an sf object containing the extent you want to highlight</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Main map with transparent extent of cocha</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>main_map <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(cocha) <span class="sc">+</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_sf</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>)  <span class="co"># Adjust alpha for transparency</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Additional maps for municipalities</span></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>municipality_maps <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Pasorapa) <span class="sc">+</span></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_sf</span>() <span class="sc">+</span></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(Aiquile) <span class="sc">+</span></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_sf</span>() <span class="sc">+</span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(totora) <span class="sc">+</span></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_sf</span>() <span class="sc">+</span></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(pojo) <span class="sc">+</span></span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_sf</span>()</span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine all municipalities into a single sf object</span></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>all_municipalities <span class="ot">&lt;-</span> <span class="fu">rbind</span>(Pasorapa, Aiquile, totora, pojo)</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Minimap with labels</span></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>minimap <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_text</span>(<span class="st">"NAME_3"</span>, <span class="at">size =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">25</span>, <span class="dv">50</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span></span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine all maps</span></span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>final_map <span class="ot">&lt;-</span> main_map <span class="sc">+</span> minimap</span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the map</span></span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a>final_map</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-overview-cochabamba" class="cell quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-overview-cochabamba-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Drought_Risk_files/figure-html/fig-overview-cochabamba-1.png" class="img-fluid figure-img" data-ref-parent="fig-overview-cochabamba" width="480"></p>
<figcaption class="figure-caption">(a) Map of the Plurinational State of Bolivia</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-overview-cochabamba-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Drought_Risk_files/figure-html/fig-overview-cochabamba-2.png" class="img-fluid figure-img" data-ref-parent="fig-overview-cochabamba" width="480"></p>
<figcaption class="figure-caption">(b) Map of Municipalities of Cochabamba and its 4 Municipalities of interest</figcaption>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;1.1: Overview of the frame of Reference Cochabamba and its four Municipalities: Aiquile, Pasorapa, Pojo &amp; Totora</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Literature Review</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Table 1: Publications Analysis</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>publications <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Source =</span> <span class="fu">c</span>(</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"[European Drought Risk Atlas](https://joint-research-centre.ec.europa.eu/jrc-news-and-updates/drought-risk-atlas-heightened-risk-threatens-environment-and-economy-2023-10-11_en)"</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"[Arabian Journal of Geosciences](https://link.springer.com/article/10.1007/s12517-012-0707-2)"</span>,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"[MDPI](https://www.mdpi.com/2073-445X/12/6/1184)"</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"[Drought Risk Atlas](https://www.drought.gov/data-maps-tools/drought-risk-atlas)"</span>,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"[MDPI](https://www.mdpi.com/2073-4441/12/7/1862)"</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">Description =</span> <span class="fu">c</span>(</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Comprehensive assessment and mapping of drought risks and impacts in the EU for 1.5, 2, and 3 degrees of global warming."</span>,</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Study on 'Drought risk assessment using remote sensing and GIS techniques'."</span>,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Agricultural Drought Risk Assessment model considering exposure, hazard, vulnerability, and mitigation capacity."</span>,</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"The Drought Risk Atlas provides historical drought data until 2017 for US weather stations with 40+ years of records, enabling users to explore various drought indices, stats, thresholds, and comparisons."</span>,</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Drought Risk Analysis, Forecasting and Assessment under Climate Change."</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Table 2: Drought Risk Variables and Data Availability</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>variables_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">Variable =</span> <span class="fu">c</span>(<span class="st">"minimum temperature"</span>, <span class="st">"maximum temperature"</span>, <span class="st">"precipitation"</span>, <span class="st">"solar radiation"</span>, <span class="st">"wind speed"</span>),</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">Value_Type =</span> <span class="fu">c</span>(<span class="st">"(°C)"</span>, <span class="st">"(°C)"</span>, <span class="st">"(mm)"</span>, <span class="st">"(kJ m-2 day-1)"</span>, <span class="st">"(m s-1)"</span>),</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">Source =</span> <span class="fu">c</span>(<span class="st">"WorldClim"</span>, <span class="st">"WorldClim"</span>, <span class="st">"WorldClim"</span>, <span class="st">"WorldClim"</span>, <span class="st">"WorldClim"</span>),</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">Status =</span> <span class="fu">c</span>(<span class="st">"Used"</span>, <span class="st">"Used"</span>, <span class="st">"Used"</span>, <span class="st">"Not Used"</span>, <span class="st">"Not Used"</span>)</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Displaying the data frames</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Publications Analysis:"</span>)</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(publications)</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Drought Risk Variables and Data Availability:"</span>)</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(variables_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="methodology-of-the-case-study" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="methodology-of-the-case-study"><span class="header-section-number">1.2</span> Methodology of the Case Study</h2>
<p>This Multicriteria Analysis employs numerous Raster and Vector Layers, integrating weighted factors. The entire project is conducted within the R-Studio Environment. Key packages utilized in achieving the final results are listed here <a href="Appendix.html#sec-sec-libraries">R-Studio Libraries</a>, delivering essential functions for the conducted calculations.</p>
<p><a href="#tbl-data-Pasorapa-drought">Table&nbsp;<span>1.1</span></a> shows the data used in order to conduct the multicriteria analysis on the four municipalities in the Cono Sur Region in Cochabamba, Bolivia.</p>
<p><a href="#tbl-data-weights-def-drought">Table&nbsp;<span>1.2</span></a> presents the classification and evaluation of various criteria for drought exposure, illustrating the factors influencing each classification. This table outlines the criteria and their corresponding classifications as follows.</p>
<p>The subsequent sections present the reclassified data for four municipalities in the state of Cochabamba. These sections detail the process of cleaning and further processing the raw data, with relevant code snippets linked to the <a href="Appendix.html">Appendix</a> for reference.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a table</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>shapes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Riverdata"</span>, <span class="st">"Political Map"</span>, <span class="st">"Precipitation"</span>, <span class="st">"Temperature"</span>, <span class="st">"DEM"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>data_type <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Vector"</span>, <span class="st">"Vector"</span>, <span class="st">"Raster (30 s)"</span>, <span class="st">"Raster (30 s)"</span>, <span class="st">"Raster (15 s)"</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>sources <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"@linke2019global"</span>, </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"[gadm.org](https://gadm.org/download_country.html)"</span>,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"@fick2017worldclim"</span>, </span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"@fick2017worldclim"</span>, </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"[Hydrosheds.org](https://www.hydrosheds.org/hydrosheds-core-downloads)"</span>)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>period <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"2013"</span>, <span class="st">"2024"</span>, <span class="st">"1970-2000"</span>, <span class="st">"1970-2000"</span>, <span class="st">"2013"</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Repeat the sources based on the number of shapes</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>repeated_sources <span class="ot">&lt;-</span> <span class="fu">rep</span>(sources, <span class="at">length.out =</span> <span class="fu">length</span>(shapes))</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the data frame</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Data =</span> shapes, <span class="at">Types =</span> data_type, <span class="at">Source =</span> repeated_sources, <span class="at">Period_Year =</span> period)</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Data"</span>, <span class="st">"Types"</span>, <span class="st">"Source"</span>, <span class="st">"Period/Year"</span>)</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="tbl-data-Pasorapa-drought" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;1.1: Used Data in the Analysis</caption>
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 30%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Data</th>
<th style="text-align: left;">Types</th>
<th style="text-align: left;">Source</th>
<th style="text-align: left;">Period/Year</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Riverdata</td>
<td style="text-align: left;">Vector</td>
<td style="text-align: left;"><span class="citation" data-cites="linke2019global">Linke et al. (<a href="references.html#ref-linke2019global" role="doc-biblioref">2019</a>)</span></td>
<td style="text-align: left;">2013</td>
</tr>
<tr class="even">
<td style="text-align: left;">Political Map</td>
<td style="text-align: left;">Vector</td>
<td style="text-align: left;"><a href="https://gadm.org/download_country.html">gadm.org</a></td>
<td style="text-align: left;">2024</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Precipitation</td>
<td style="text-align: left;">Raster (30 s)</td>
<td style="text-align: left;"><span class="citation" data-cites="fick2017worldclim">Fick and Hijmans (<a href="references.html#ref-fick2017worldclim" role="doc-biblioref">2017</a>)</span></td>
<td style="text-align: left;">1970-2000</td>
</tr>
<tr class="even">
<td style="text-align: left;">Temperature</td>
<td style="text-align: left;">Raster (30 s)</td>
<td style="text-align: left;"><span class="citation" data-cites="fick2017worldclim">Fick and Hijmans (<a href="references.html#ref-fick2017worldclim" role="doc-biblioref">2017</a>)</span></td>
<td style="text-align: left;">1970-2000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DEM</td>
<td style="text-align: left;">Raster (15 s)</td>
<td style="text-align: left;"><a href="https://www.hydrosheds.org/hydrosheds-core-downloads">Hydrosheds.org</a></td>
<td style="text-align: left;">2013</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a sample data frame</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Criteria =</span> <span class="fu">c</span>(<span class="st">"River Data"</span>, <span class="st">"Maximum Temperature"</span>, <span class="st">"DEM (Inclination)"</span>, <span class="st">"DEM (Perspective)"</span>, <span class="st">"Precipitation"</span>),</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Very High</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"&lt;200"</span>, <span class="st">"&gt;30"</span>, <span class="st">"&gt;45"</span>, <span class="st">"&lt;45°"</span>, <span class="st">"&lt;513.8"</span>),</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">High        =</span> <span class="fu">c</span>(<span class="st">"200-700"</span>, <span class="st">"27-30"</span>, <span class="st">"20-30"</span>, <span class="st">"45-135°"</span>, <span class="st">"514-571"</span>),</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Moderate    =</span> <span class="fu">c</span>(<span class="st">"700-2000"</span>, <span class="st">"25-27"</span>, <span class="st">"20-30"</span>, <span class="st">"135-225°"</span>, <span class="st">"571-640"</span>),</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">Low         =</span> <span class="fu">c</span>(<span class="st">"2000-5000"</span>, <span class="st">""</span>, <span class="st">"10-20"</span>, <span class="st">"225-315°"</span>, <span class="st">"640-1058"</span>),</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Very Low</span><span class="st">`</span>  <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"&gt;5000"</span>, <span class="st">"&lt;25"</span>, <span class="st">"&lt;10"</span>, <span class="st">"&gt;315°"</span>, <span class="st">"&gt;1058"</span>),</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Weights</span><span class="st">`</span>   <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="fl">1.5</span>, <span class="fl">1.5</span>, <span class="dv">3</span>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizing the table with kable</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(data, <span class="at">align =</span> <span class="st">"c"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="tbl-data-weights-def-drought" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;1.2: Classiﬁcation and evaluation of drought exposure according to factors</caption>
<colgroup>
<col style="width: 20%">
<col style="width: 10%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 10%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Criteria</th>
<th style="text-align: center;">Very.High</th>
<th style="text-align: center;">High</th>
<th style="text-align: center;">Moderate</th>
<th style="text-align: center;">Low</th>
<th style="text-align: center;">Very.Low</th>
<th style="text-align: center;">Weights</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">River Data</td>
<td style="text-align: center;">&lt;200</td>
<td style="text-align: center;">200-700</td>
<td style="text-align: center;">700-2000</td>
<td style="text-align: center;">2000-5000</td>
<td style="text-align: center;">&gt;5000</td>
<td style="text-align: center;">2.0</td>
</tr>
<tr class="even">
<td style="text-align: center;">Maximum Temperature</td>
<td style="text-align: center;">&gt;30</td>
<td style="text-align: center;">27-30</td>
<td style="text-align: center;">25-27</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">&lt;25</td>
<td style="text-align: center;">2.0</td>
</tr>
<tr class="odd">
<td style="text-align: center;">DEM (Inclination)</td>
<td style="text-align: center;">&gt;45</td>
<td style="text-align: center;">20-30</td>
<td style="text-align: center;">20-30</td>
<td style="text-align: center;">10-20</td>
<td style="text-align: center;">&lt;10</td>
<td style="text-align: center;">1.5</td>
</tr>
<tr class="even">
<td style="text-align: center;">DEM (Perspective)</td>
<td style="text-align: center;">&lt;45°</td>
<td style="text-align: center;">45-135°</td>
<td style="text-align: center;">135-225°</td>
<td style="text-align: center;">225-315°</td>
<td style="text-align: center;">&gt;315°</td>
<td style="text-align: center;">1.5</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Precipitation</td>
<td style="text-align: center;">&lt;513.8</td>
<td style="text-align: center;">514-571</td>
<td style="text-align: center;">571-640</td>
<td style="text-align: center;">640-1058</td>
<td style="text-align: center;">&gt;1058</td>
<td style="text-align: center;">3.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Land Use</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>plotly <span class="ot">&lt;-</span> land <span class="sc">%&gt;%</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> USO)) <span class="sc">+</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(plotly)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>land_new <span class="sc">%&gt;%</span> <span class="fu">plot</span>()</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># reclass</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a tibble with the reclassification table</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>reclass_land_use <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>from, <span class="sc">~</span>to, <span class="sc">~</span>becomes,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>,    <span class="dv">2</span>,  <span class="dv">1</span>,     <span class="co"># Productivo: Alimenticios de consumo, subsistencia y mercado local.</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>,    <span class="dv">3</span>,  <span class="fl">0.75</span>,  <span class="co"># Extractivo Forestal: Pastoreo, Ramoneo, Cultivos alimenticios en algunos sectores, Extracción de Leña en parte</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>,    <span class="dv">4</span>,  <span class="fl">0.5</span>,   <span class="co"># Productivo Agropecuario, Extractivo Forestal y Petrolero</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span>,    <span class="dv">5</span>,  <span class="fl">0.25</span>,  <span class="co"># nada</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>river_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(land_new, reclass_table_river,</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>                      <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(reclass_table_river)</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(river_reclassified)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read data and crop to Pasorapa</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># read data </span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="do">## shapes</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># veg   &lt;- read_sf("veg_nv_bol_geo.shp") # Vegetation</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co"># geo   &lt;- read_sf("Geologia.shp") # Geografia</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># geo   &lt;- read_sf("geologia.shp", crs = 4326)   # Geografia</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># dsmw  &lt;- read_sf("DSMW.shp", crs = 4326)</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co"># other kind of vegetation</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co"># se_bo_geo &lt;- read_sf("se_bo_geo.shp")</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co"># temperatur min</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin01 &lt;- rast("wc2.1_30s_tmin_01.tif")</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin02 &lt;- rast("wc2.1_30s_tmin_02.tif")</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin03 &lt;- rast("wc2.1_30s_tmin_03.tif")</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin04 &lt;- rast("wc2.1_30s_tmin_04.tif")</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin05 &lt;- rast("wc2.1_30s_tmin_05.tif")</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin06 &lt;- rast("wc2.1_30s_tmin_06.tif")</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin07 &lt;- rast("wc2.1_30s_tmin_07.tif")</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin08 &lt;- rast("wc2.1_30s_tmin_08.tif")</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin09 &lt;- rast("wc2.1_30s_tmin_09.tif")</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin10 &lt;- rast("wc2.1_30s_tmin_10.tif")</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin11 &lt;- rast("wc2.1_30s_tmin_11.tif")</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin12 &lt;- rast("wc2.1_30s_tmin_12.tif")</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a><span class="co"># temperatur max</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax01 &lt;- rast("wc2.1_30s_tmax_01.tif")</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax02 &lt;- rast("wc2.1_30s_tmax_02.tif")</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax03 &lt;- rast("wc2.1_30s_tmax_03.tif")</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax04 &lt;- rast("wc2.1_30s_tmax_04.tif")</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax05 &lt;- rast("wc2.1_30s_tmax_05.tif")</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax06 &lt;- rast("wc2.1_30s_tmax_06.tif")</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax07 &lt;- rast("wc2.1_30s_tmax_07.tif")</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax08 &lt;- rast("wc2.1_30s_tmax_08.tif")</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax09 &lt;- rast("wc2.1_30s_tmax_09.tif")</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax10 &lt;- rast("wc2.1_30s_tmax_10.tif")</span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax11 &lt;- rast("wc2.1_30s_tmax_11.tif")</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax12 &lt;- rast("wc2.1_30s_tmax_12.tif")</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a><span class="co"># precipitacion</span></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a><span class="co"># precip01 &lt;- rast("wc2.1_30s_prec_01.tif")</span></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a><span class="co"># precip02 &lt;- rast("wc2.1_30s_prec_02.tif")</span></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a><span class="co"># precip03 &lt;- rast("wc2.1_30s_prec_03.tif")</span></span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a><span class="co"># precip04 &lt;- rast("wc2.1_30s_prec_04.tif")</span></span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a><span class="co"># precip05 &lt;- rast("wc2.1_30s_prec_05.tif")</span></span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a><span class="co"># precip06 &lt;- rast("wc2.1_30s_prec_06.tif")</span></span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a><span class="co"># precip07 &lt;- rast("wc2.1_30s_prec_07.tif")</span></span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a><span class="co"># precip08 &lt;- rast("wc2.1_30s_prec_08.tif")</span></span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a><span class="co"># precip09 &lt;- rast("wc2.1_30s_prec_09.tif")</span></span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a><span class="co"># precip10 &lt;- rast("wc2.1_30s_prec_10.tif")</span></span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a><span class="co"># precip11 &lt;- rast("wc2.1_30s_prec_11.tif")</span></span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a><span class="co"># precip12 &lt;- rast("wc2.1_30s_prec_12.tif")</span></span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a><span class="do">## Satellite Data</span></span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a><span class="co"># sat_full &lt;- rast("sat_full.tiff")</span></span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Land Use</span></span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a><span class="co"># land &lt;- rast("Change_10S_070W.tif")</span></span>
<span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a><span class="co"># print(land, vp = grid::viewport(0.8, 0.185, width = 0.2, height = 0.45))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># River Data</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  200 meters Buffer River data</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>buffer_river <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_buffer</span>(Pasorapa, <span class="dv">200</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># river_crop &lt;- st_intersection(river, buffer_river)</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># write_sf(river_crop, "river_crop.shp", overwrite = TRUE)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pop</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  crop and mask dem</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># pop_crop &lt;- terra::crop(pop, Aiquile)</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># pop_mask &lt;- mask(pop_crop, Aiquile)</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co"># writeRaster(dem_mask, "dem_mask_pasorapa.tif")</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co"># River Data</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  200 meters Buffer River data</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>buffer_river <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_buffer</span>(Aiquile, <span class="dv">200</span>)</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co"># river_crop &lt;- st_intersection(river, buffer_river)</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co"># write_sf(river_crop, "river_crop.shp", overwrite = TRUE)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># st_write(nc, paste0(tempdir(), "/", "nc.shp"))</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="do">## terrain</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>terrain  <span class="ot">&lt;-</span> <span class="fu">terrain</span>(dem_mask)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co"># land</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  crop and mask dem</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>land_crop          <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">crop</span>(land, Pasorapa)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>land_mask_pasorapa <span class="ot">&lt;-</span> <span class="fu">mask</span>(land_crop, Pasorapa)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co"># sf_use_s2(FALSE) # quick fix</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="do">## terrain</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>terrain_aiquile   <span class="ot">&lt;-</span> <span class="fu">terrain</span>(dem_mask_aiquile)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>terrain_pasorapa  <span class="ot">&lt;-</span> <span class="fu">terrain</span>(dem_mask_pasorapa)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co"># land</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  crop and mask dem</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>land_crop <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">crop</span>(land, Aiquile)</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>land_mask_aiquile <span class="ot">&lt;-</span> <span class="fu">mask</span>(land_crop, Aiquile)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div style="page-break-after: always;"></div>
<section id="river-data" class="level3" data-number="1.2.1">
<h3 data-number="1.2.1" class="anchored" data-anchor-id="river-data"><span class="header-section-number">1.2.1</span> River Data</h3>
<p>The data utilized aimed to estimate the distance to rivers, serving as a proxy for assessing the likelihood of drought occurrences. The underlying assumption was that greater distances from rivers correspond to increased drought probabilities. To calculate distances, the <strong><code>terra::distance</code></strong> function was employed on the river shapefiles associated with various municipalities. Detailed processing steps are outlined in the subsequent chapter of the <a href="Appendix.html#sec-sec-river">Appendix</a>.</p>
<p>The reclassification has been calculated according to <a href="#tbl-data-weights-def-drought">Table&nbsp;<span>1.2</span></a>. Defining the classification values <span class="citation" data-cites="Gao2023">Gao et al. (<a href="references.html#ref-Gao2023" role="doc-biblioref">2023</a>)</span> has been using different values in order to classify and evaluate drought exposure, hazard factors, vulnerability, and mitigation capacity.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>river_crop <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">"river_crop.shp"</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>buffer_river <span class="ot">&lt;-</span> <span class="fu">st_buffer</span>(river_crop, <span class="dv">100</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an empty raster to rasterize into</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>empty_raster <span class="ot">&lt;-</span> <span class="fu">raster</span>(<span class="fu">extent</span>(buffer_river), <span class="at">resolution =</span> <span class="fu">c</span>(<span class="fl">0.0008333333</span>, <span class="fl">0.0008333333</span>))</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Rasterize</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>river_raster <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">rasterize</span>(buffer_river, empty_raster, <span class="at">field =</span> <span class="st">"CATCH_SKM"</span>)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co"># , background = 0</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># calc into %</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>river_raster <span class="ot">&lt;-</span> (river_raster <span class="sc">/</span> <span class="dv">100</span>)</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="co"># River</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  crop and mask dem</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>river_crop <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">crop</span>(river_raster, Pasorapa)</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>river_mask <span class="ot">&lt;-</span> <span class="fu">mask</span>(river_crop, Pasorapa)</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(river_mask)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Define a common CRS for all your rasters</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>common_crs <span class="ot">&lt;-</span> <span class="st">"+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign the CRS to each raster</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">crs</span>(river_raster) <span class="ot">&lt;-</span> <span class="fu">crs</span>(river_subset_sp) <span class="ot">&lt;-</span> common_crs</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate distances on the subset</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>dist_to_river <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">distance</span>(river_mask)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co"># writeRaster(dist_to_river, "dist_to_river_pasorapa.tif")</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>dist_to_river <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">"dist_to_river_pasorapa.tif"</span>)</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the distances raster</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dist_to_river)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># write / safe Raster</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># writeRaster(dist_to_river, "dist_to_river_pasorapa.tif")</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>dist_to_river <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">"dist_to_river_pasorapa.tif"</span>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co"># River</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  crop and mask dem</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>river_crop <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">crop</span>(dist_to_river, Pasorapa)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>river_mask <span class="ot">&lt;-</span> <span class="fu">mask</span>(river_crop, Pasorapa)</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co"># reclass</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a tibble with the reclassification table</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>reclass_table_river <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>from, <span class="sc">~</span>to, <span class="sc">~</span>becomes,</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5000</span>,    <span class="cn">Inf</span>,  <span class="dv">1</span>,     </span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2000</span>,    <span class="dv">5000</span>,  <span class="fl">0.75</span>,  </span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  <span class="dv">700</span>,    <span class="dv">2000</span>,  <span class="fl">0.5</span>,    </span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">200</span>,    <span class="dv">700</span>,  <span class="fl">0.25</span>,   </span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>  <span class="sc">-</span><span class="cn">Inf</span>,   <span class="dv">200</span>,  <span class="dv">0</span>       </span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>river_reclassified_pasorapa <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(river_mask, reclass_table_river, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a><span class="co"># kable(reclass_table_river)</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a><span class="co"># write/ safe Raster</span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>dist_to_river <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">"dist_to_river_aiquile.tif"</span>)</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>common_crs <span class="ot">&lt;-</span> <span class="st">"+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"</span></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign the CRS to each raster</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a><span class="fu">crs</span>(dist_to_river) <span class="ot">&lt;-</span> common_crs</span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(Aiquile)    <span class="ot">&lt;-</span> common_crs</span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a><span class="co"># River</span></span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a><span class="do">##  crop and mask dem</span></span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>river_crop <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">crop</span>(dist_to_river, Aiquile)</span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a>river_mask <span class="ot">&lt;-</span> <span class="fu">mask</span>(river_crop, Aiquile)</span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a><span class="co"># reclass</span></span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a tibble with the reclassification table</span></span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a>reclass_table_river <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>from, <span class="sc">~</span>to, <span class="sc">~</span>becomes,</span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5000</span>,    <span class="cn">Inf</span>,  <span class="dv">1</span>,     </span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2000</span>,    <span class="dv">5000</span>,  <span class="fl">0.75</span>,  </span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a>  <span class="dv">700</span>,    <span class="dv">2000</span>,  <span class="fl">0.5</span>,    </span>
<span id="cb16-47"><a href="#cb16-47" aria-hidden="true" tabindex="-1"></a>  <span class="dv">200</span>,    <span class="dv">700</span>,  <span class="fl">0.25</span>,   </span>
<span id="cb16-48"><a href="#cb16-48" aria-hidden="true" tabindex="-1"></a>  <span class="sc">-</span><span class="cn">Inf</span>,   <span class="dv">200</span>,  <span class="dv">0</span>       </span>
<span id="cb16-49"><a href="#cb16-49" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-50"><a href="#cb16-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-51"><a href="#cb16-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb16-52"><a href="#cb16-52" aria-hidden="true" tabindex="-1"></a>river_reclassified_aiquile <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(river_mask, reclass_table_river, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb16-53"><a href="#cb16-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-54"><a href="#cb16-54" aria-hidden="true" tabindex="-1"></a><span class="co"># read totora data</span></span>
<span id="cb16-55"><a href="#cb16-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-56"><a href="#cb16-56" aria-hidden="true" tabindex="-1"></a>river_totora <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"river_totora.rds"</span>)</span>
<span id="cb16-57"><a href="#cb16-57" aria-hidden="true" tabindex="-1"></a>river_pojo   <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"river_pojo.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-river-distance-Pasorapa" class="cell tbl-parent quarto-layout-panel anchored" data-tbl-cap="Reclassification table of the River-Distance Data">
<div class="panel-caption table-caption">
<p><strong>?(caption)</strong></p>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define breaks and labels for the reclassification</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>, <span class="dv">1</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># change name</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(river_reclassified_pasorapa) <span class="ot">&lt;-</span> <span class="st">"Drought Risk"</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Color Palette in R</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>colors   <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"darkgreen"</span>,<span class="st">"lightgreen"</span>,<span class="st">"yellow"</span>, <span class="st">"orange"</span>,<span class="st">"red"</span>)</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>colors_1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"darkgreen"</span>,<span class="st">"lightgreen"</span>,<span class="st">"yellow"</span>, <span class="st">"orange"</span>)</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="co"># view</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(river_reclassified_pasorapa) <span class="sc">+</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">palette =</span> colors) <span class="sc">+</span> </span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(river_reclassified_aiquile) <span class="sc">+</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(river_totora) <span class="sc">+</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(river_pojo) <span class="sc">+</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors_1) <span class="sc">+</span>  </span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_text</span>(<span class="st">"NAME_3"</span>, <span class="at">size =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span>  </span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Author: Johannes Quente"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-river" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Drought_Risk_files/figure-html/fig-river-1.png" class="img-fluid figure-img" width="480"></p>
<figcaption class="figure-caption">Figure&nbsp;1.2: River reclassification</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Land Use (decided to not use)</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="do">### Rasterize</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># land_filter_filter &lt;- land_filter %&gt;% filter(USO == "Productivo Ganadero: Pastoreo directo, forrajeo de aves.")</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># land$USO %&gt;% unique()</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Define your extent and resolution for the raster template</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>extent_template     <span class="ot">&lt;-</span> <span class="fu">extent</span>(land)  <span class="co"># Define the extent</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>resolution_template <span class="ot">&lt;-</span> <span class="dv">100</span>  <span class="co"># Define the resolution</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an empty raster template</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>raster_template <span class="ot">&lt;-</span> <span class="fu">raster</span>(extent_template, <span class="at">resolution =</span> resolution_template)</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert SIMBOLO to factor</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>land<span class="sc">$</span>USO <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(land<span class="sc">$</span>USO)</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Rasterize</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>land_raster <span class="ot">&lt;-</span> <span class="fu">rasterize</span>(land, raster_template, <span class="at">field =</span> <span class="st">"USO"</span>, <span class="at">backround =</span> <span class="dv">0</span>)</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a><span class="co"># writeRaster(geo_raster, "geo_raster.tif", overwrite=TRUE)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="do">### reproject</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the UTM zone for Cochabamba (Zone 20S)</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>utm_crs <span class="ot">&lt;-</span> <span class="st">"+proj=utm +zone=20 +south +datum=WGS84 +units=m +no_defs"</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a SpatialPointsDataFrame directly from filtered_ec</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>land_transformed <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(land, <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"X"</span>, <span class="st">"Y"</span>), <span class="at">crs =</span> utm_crs)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Transform to WGS84</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>land_transformed_wgs84 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(land_transformed, <span class="at">crs =</span> <span class="st">"+proj=longlat +datum=WGS84"</span>)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract extent from the transformed SpatialPointsDataFrame</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>new_extent <span class="ot">&lt;-</span> <span class="fu">st_bbox</span>(land_transformed_wgs84)</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Modify the extent of the raster layer to match the new extent</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>raster_layer_with_new_extent <span class="ot">&lt;-</span> <span class="fu">setExtent</span>(land_raster, new_extent)</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a><span class="co"># writeRaster(raster_layer_with_new_extent, "raster_layer_with_new_extent.tif")</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(raster_layer_with_new_extent)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># label: tbl-land-reclass</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># tbl-cap: "Reclassification table of the Land-Use Data"</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="do">### Reclass</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a tibble with the reclassification table</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>reclass_table_land <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>from, <span class="sc">~</span>to, <span class="sc">~</span>becomes,</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>,    </span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>,    </span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>,      </span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>,    </span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">1</span>,    </span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">0</span>,  </span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">0</span>,      </span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>  <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">1</span>,    </span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>  <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">0</span>,      </span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">1</span>,  <span class="co"># cambio   </span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">1</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming you have a slope raster 'slope_raster'</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>land_reclassified <span class="ot">&lt;-</span> <span class="fu">reclassify</span>(raster_layer_with_new_extent, reclass_table_land, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Align Vegetation-Raster</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a><span class="co"># geo_reclassified &lt;- rast(geo_reclassified)</span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding a new column C to the data frame</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>reclass_table_land<span class="sc">$</span>Class <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Productivo Agropecuario, Extractivo Forestal"</span>,</span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Productivo Agropecuario: Pastoreo, en sectores Cultivos alimenticios"</span>,</span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Productivo Ganadero: Escaso pastoreo directo"</span>,</span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Productivo: Alimenticios de consumo, subsistencia y mercado local."</span>,</span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Productivo Ganadero: Pastoreo directo, forrajeo de aves."</span>,</span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Extractivo Minero en parte"</span>,</span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Productivo Aguas Superficiales Mixto"</span>,</span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Productivo Agropecuario: Cultivos alimenticios"</span>,</span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Extractivo Minero, Productivo Agropecuario, Protectivo, Vida silvestre"</span>,</span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Recreativo: Escénico, Turístico"</span>,</span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Productivo Agropecuario, Extractivo Forestal y Petrolero"</span></span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a><span class="co"># kable(reclass_table_land)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># label: fig-land-use</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co"># fig-cap: "Reclassification Result of Pasorapa"</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># fig-subcap: </span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># -  "Reclassification Result of Pasorapa"</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co"># -  "Reclassification Result of Aiquile"</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co"># fig-width: 5</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># fig-height: 6</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co"># layout-nrow: 1</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co"># check</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(land_reclassified, <span class="at">labels =</span> <span class="st">"New Legend Label"</span>) <span class="sc">+</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_raster</span>(<span class="at">style =</span> <span class="st">"cat"</span>, <span class="at">palette =</span> <span class="st">"Reds"</span>) <span class="sc">+</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Data source: geo.gob.bo"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span> <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="maximum-temperature-data" class="level3" data-number="1.2.2">
<h3 data-number="1.2.2" class="anchored" data-anchor-id="maximum-temperature-data"><span class="header-section-number">1.2.2</span> Maximum Temperature Data</h3>
<p>The Temperature Data from <a href="https://www.worldclim.org/data/worldclim21.html">worldclim.org</a> which consists of a variety of global weather data on an 30 Arc Second Accuracy. This data has been used to calculate the highest temperatures over all the available 12 Raster-Layers of the different months. The Result is one Raster-Layer that contains the highest temperatures of the average year from 1970-2000. The reclassification has been calculated according to <a href="#tbl-data-weights-def-drought">Table&nbsp;<span>1.2</span></a>.</p>
<p>The provided code implements automation to improve the processing of multiple Rasterlayers, consolidating them into a single Rasterlayer containing the minimum values across the dataset. This approach aims to enhance efficiency and simplify the workflow of raster data analysis. The Code used can be seen in the <a href="Appendix.html#sec-sec-temp-max">Appendix</a>.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Processing</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co"># LOOP</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear una lista con los nombres de los objetos</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>lista_temp <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"tmax"</span>, <span class="fu">sprintf</span>(<span class="st">"%02d"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>))  </span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate names precip01 until precip12</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Inicializar una lista vacía para almacenar los resultados</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>lista_tmax_mask <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterar sobre cada objeto y aplicar las operaciones</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(lista_temp)) {</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Acceder al objeto con el nombre correspondiente</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>  tmax_obj <span class="ot">&lt;-</span> <span class="fu">get</span>(lista_temp[i])</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Aplicar las operaciones crop y mask</span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>  tmax_crop <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">crop</span>(tmax_obj, Pasorapa)</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>  tmax_mask <span class="ot">&lt;-</span> <span class="fu">mask</span>(tmax_crop, Pasorapa)</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Almacenar el resultado en la lista</span></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>  lista_tmax_mask[[i]] <span class="ot">&lt;-</span> tmax_mask</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar la lista de resultados (en caso de querer acceder a cada uno)</span></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a><span class="co"># lista_tmax_mask</span></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Para visualizar un objeto específico (por ejemplo, el primer objeto)</span></span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(lista_tmax_mask[[<span class="dv">08</span>]])</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Stack the Values and calc the min for everything</span></span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Use rast() to convert the list to a SpatRaster object</span></span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>stacked_rasters <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">rast</span>(lista_tmax_mask)</span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply the cellStats function to find the minimum value for each pixel across the stack</span></span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>max_values <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">app</span>(stacked_rasters, <span class="at">fun =</span> max, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(max_values, file = "max_temp_pasorapa.rds")</span></span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a><span class="co"># max_temp_pasorapa &lt;- readRDS("max_temp_pasorapa.rds")</span></span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the resulting raster</span></span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(max_values)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>max_temp_pasorapa <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"max_temp_pasorapa.rds"</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># reclass</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a tibble with the reclassification table</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>reclass_table_max_temp <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>from, <span class="sc">~</span>to, <span class="sc">~</span>becomes,</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="sc">-</span><span class="cn">Inf</span>, <span class="dv">25</span>, <span class="fl">0.2</span>,    </span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="dv">25</span>, <span class="dv">27</span>, <span class="fl">0.4</span>,   </span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  <span class="dv">27</span>, <span class="dv">30</span>, <span class="fl">0.6</span>,   </span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>  <span class="dv">30</span>, <span class="cn">Inf</span>, <span class="dv">1</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>max_temp_reclassified_pasorapa <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(max_temp_pasorapa, reclass_table_max_temp, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="co"># kable(reclass_table_max_temp)</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a><span class="co"># read data aiquile</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>max_temp_aiquile <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"max_temp_aiquile.rds"</span>)</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>max_temp_reclassified_aiquile <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(max_temp_aiquile, reclass_table_max_temp, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Totora</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>max_temp_totora <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"max_temp_totora.rds"</span>)</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>max_temp_reclassified_totora <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(max_temp_totora, reclass_table_max_temp, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Pojo</span></span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>max_temp_pojo <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"max_temp_pojo.rds"</span>)</span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a>max_temp_reclassified_pojo <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(max_temp_pojo, reclass_table_max_temp, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-max_temp-table" class="cell tbl-parent quarto-layout-panel anchored" data-tbl-cap="Reclassification table of the Temp max Data">
<div class="panel-caption table-caption">
<p><strong>?(caption)</strong></p>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define breaks and labels for the reclassification</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.2</span>, <span class="fl">0.4</span>, <span class="fl">0.6</span>, <span class="dv">1</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># labels &lt;- c("Muy bajo", "Bajo", "Moderado", "Alto", "Muy alto")</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Cut the raster values into categorical factors</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co"># factor_raster &lt;- cut(values(final_raster), breaks = breaks, labels = labels, include.lowest = TRUE)</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co"># change name</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(max_temp_reclassified_aiquile) <span class="ot">&lt;-</span> <span class="st">"Drought Risk"</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Color Palette in R</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"darkgreen"</span>,<span class="st">"yellow"</span>, <span class="st">"orange"</span>,<span class="st">"red"</span>)</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="co"># view</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(max_temp_reclassified_aiquile) <span class="sc">+</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">palette =</span> colors) <span class="sc">+</span> </span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(max_temp_reclassified_pasorapa) <span class="sc">+</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(max_temp_reclassified_pojo) <span class="sc">+</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(max_temp_reclassified_totora) <span class="sc">+</span></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_text</span>(<span class="st">"NAME_3"</span>, <span class="at">size =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span>  </span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Author: Johannes Quente"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-max-temp" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Drought_Risk_files/figure-html/fig-max-temp-1.png" class="img-fluid figure-img" width="480"></p>
<figcaption class="figure-caption">Figure&nbsp;1.3: Maximum temperature reclassification</figcaption>
</figure>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="dem-inclination-data" class="level3" data-number="1.2.3">
<h3 data-number="1.2.3" class="anchored" data-anchor-id="dem-inclination-data"><span class="header-section-number">1.2.3</span> DEM (Inclination) Data</h3>
<p>The provided Digital Elevation Model (DEM) consists of raster values showcasing variations in altitudes. These altitude values where converted into slope data using the <code>terra::terrain</code> -function from the Terra package. The reclassification has been calculated according to <a href="#tbl-data-weights-def-drought">Table&nbsp;<span>1.2</span></a>.</p>
<p>Subsequently, the slope data was categorized into varying degrees of possibility of drought in percent based on their inclination. For a detailed view of the reclassification code, please refer to the <a href="Appendix.html#sec-sec-inclination">Appendix</a>.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rayshader)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rgl)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert raster to matrix</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>raster_matrix <span class="ot">&lt;-</span> <span class="fu">raster_to_matrix</span>(dem_mask_pasorapa)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co"># writeRaster(dem_mask_pasorapa, "dem_mask_pasorapa_test.tif")</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>raster_matrix <span class="sc">%&gt;%</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sphere_shade</span>(<span class="at">texture =</span> <span class="st">"desert"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_map</span>()</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>raster_matrix <span class="sc">%&gt;%</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sphere_shade</span>(<span class="at">texture =</span> <span class="st">"desert"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_shadow</span>(<span class="fu">ray_shade</span>(raster_matrix, <span class="at">zscale =</span> <span class="dv">3</span>), <span class="fl">0.5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_shadow</span>(<span class="fu">ambient_shade</span>(raster_matrix), <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_3d</span>(raster_matrix, <span class="at">zscale =</span> <span class="dv">10</span>, <span class="at">fov =</span> <span class="dv">0</span>, <span class="at">theta =</span> <span class="dv">135</span>, <span class="at">zoom =</span> <span class="fl">0.75</span>, <span class="at">phi =</span> <span class="dv">45</span>, <span class="at">windowsize =</span> <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">800</span>))</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.sleep</span>(<span class="fl">0.2</span>)</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a><span class="fu">render_snapshot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># DEM</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  crop and mask dem</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>dem_crop <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">crop</span>(dem, Pasorapa)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>dem_mask_pasorapa <span class="ot">&lt;-</span> <span class="fu">mask</span>(dem_crop, Pasorapa)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>terrain_pasorapa <span class="ot">&lt;-</span> <span class="fu">terrain</span>(dem_mask_pasorapa)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a tibble with the reclassification table</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>reclass_table_dem <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>from, <span class="sc">~</span>to, <span class="sc">~</span>becomes,</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  <span class="dv">0</span>, <span class="dv">10</span>, <span class="fl">0.09</span>,           <span class="co"># 0-10: Plano</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="dv">20</span>, <span class="fl">0.2</span>,           <span class="co"># 10-20: Mod. inclinado</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  <span class="dv">20</span>, <span class="dv">30</span>, <span class="fl">0.34</span>,          <span class="co"># 20-30: Inclinado</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  <span class="dv">30</span>, <span class="dv">45</span>, <span class="fl">0.56</span>,          <span class="co"># 30-45: Mod. empinado</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  <span class="dv">45</span>, <span class="cn">Inf</span>, <span class="dv">1</span>             <span class="co"># 45 and above: Fuert. empinado</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming you have a slope raster 'slope_raster'</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>dem_reclassified_pasorapa <span class="ot">&lt;-</span> <span class="fu">classify</span>(terrain_pasorapa, reclass_table_dem, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding a new column C to the data frame</span></span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>reclass_table_dem<span class="sc">$</span>Class <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Plano a casi plano"</span>, <span class="st">"Mod. inclinado"</span>, <span class="st">"Inclinado"</span>, <span class="st">"Mod. empinado"</span>, <span class="st">"Fuert. empinado"</span>)</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a><span class="co"># kable(reclass_table_dem)</span></span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a><span class="do">### Pasorapa</span></span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a><span class="do">### Aiquile</span></span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a><span class="co"># DEM</span></span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a><span class="do">##  crop and mask dem</span></span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a>dem_crop <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">crop</span>(dem, Aiquile)</span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a>dem_mask_aiquile <span class="ot">&lt;-</span> <span class="fu">mask</span>(dem_crop, Aiquile)</span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true" tabindex="-1"></a>terrain_aiquile <span class="ot">&lt;-</span> <span class="fu">terrain</span>(dem_mask_aiquile)</span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-37"><a href="#cb26-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a tibble with the reclassification table</span></span>
<span id="cb26-38"><a href="#cb26-38" aria-hidden="true" tabindex="-1"></a>reclass_table_dem <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb26-39"><a href="#cb26-39" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>from, <span class="sc">~</span>to, <span class="sc">~</span>becomes,</span>
<span id="cb26-40"><a href="#cb26-40" aria-hidden="true" tabindex="-1"></a>  <span class="dv">0</span>, <span class="dv">10</span>, <span class="fl">0.09</span>,           <span class="co"># 0-10: Plano</span></span>
<span id="cb26-41"><a href="#cb26-41" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="dv">20</span>, <span class="fl">0.2</span>,           <span class="co"># 10-20: Mod. inclinado</span></span>
<span id="cb26-42"><a href="#cb26-42" aria-hidden="true" tabindex="-1"></a>  <span class="dv">20</span>, <span class="dv">30</span>, <span class="fl">0.34</span>,          <span class="co"># 20-30: Inclinado</span></span>
<span id="cb26-43"><a href="#cb26-43" aria-hidden="true" tabindex="-1"></a>  <span class="dv">30</span>, <span class="dv">45</span>, <span class="fl">0.56</span>,          <span class="co"># 30-45: Mod. empinado</span></span>
<span id="cb26-44"><a href="#cb26-44" aria-hidden="true" tabindex="-1"></a>  <span class="dv">45</span>, <span class="cn">Inf</span>, <span class="dv">1</span>             <span class="co"># 45 and above: Fuert. empinado</span></span>
<span id="cb26-45"><a href="#cb26-45" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-46"><a href="#cb26-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-47"><a href="#cb26-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming you have a slope raster 'slope_raster'</span></span>
<span id="cb26-48"><a href="#cb26-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb26-49"><a href="#cb26-49" aria-hidden="true" tabindex="-1"></a>dem_reclassified_aiquile <span class="ot">&lt;-</span> <span class="fu">classify</span>(terrain_aiquile, reclass_table_dem, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb26-50"><a href="#cb26-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-51"><a href="#cb26-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding a new column C to the data frame</span></span>
<span id="cb26-52"><a href="#cb26-52" aria-hidden="true" tabindex="-1"></a>reclass_table_dem<span class="sc">$</span>Class <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Plano a casi plano"</span>, <span class="st">"Mod. inclinado"</span>, <span class="st">"Inclinado"</span>, <span class="st">"Mod. empinado"</span>, <span class="st">"Fuert. empinado"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Totora</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(dem_reclassified_pasorapa, "dem_reclassified_pasorapa.rds")</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>dem_reclassified_pasorapa <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"dem_reclassified_pasorapa.rds"</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Aiquile</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(dem_reclassified_aiquile, "dem_reclassified_aiquile.rds")</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>dem_reclassified_aiquile <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"dem_reclassified_aiquile.rds"</span>)</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Totora</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>dem_reclassified_totora <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"dem_reclassified_totora.rds"</span>)</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Pojo</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>dem_reclassified_pojo <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"dem_reclassified_pojo.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define breaks and labels for the reclassification</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.09</span>, <span class="fl">0.2</span>, <span class="fl">0.34</span>, <span class="fl">0.59</span>, <span class="dv">1</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co"># labels &lt;- c("Muy bajo", "Bajo", "Moderado", "Alto", "Muy alto")</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Cut the raster values into categorical factors</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co"># factor_raster &lt;- cut(values(final_raster), breaks = breaks, labels = labels, include.lowest = TRUE)</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="co"># change name</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dem_reclassified_aiquile) <span class="ot">&lt;-</span> <span class="st">"Drought Risk"</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Color Palette in R</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="co"># colors &lt;- c("darkgreen","yellow", "orange","red")</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="co"># view</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(dem_reclassified_aiquile) <span class="sc">+</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">palette =</span> colors) <span class="sc">+</span> </span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(dem_reclassified_pasorapa) <span class="sc">+</span></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(dem_reclassified_pojo) <span class="sc">+</span></span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(dem_reclassified_totora) <span class="sc">+</span></span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_text</span>(<span class="st">"NAME_3"</span>, <span class="at">size =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span>  </span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb28-33"><a href="#cb28-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Author: Johannes Quente"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb28-34"><a href="#cb28-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb28-35"><a href="#cb28-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb28-36"><a href="#cb28-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb28-37"><a href="#cb28-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb28-38"><a href="#cb28-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb28-39"><a href="#cb28-39" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-dem-inclination" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Drought_Risk_files/figure-html/fig-dem-inclination-1.png" class="img-fluid figure-img" width="480"></p>
<figcaption class="figure-caption">Figure&nbsp;1.4: DEM derived Inclination reclassification</figcaption>
</figure>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="dem-perspective-data" class="level3" data-number="1.2.4">
<h3 data-number="1.2.4" class="anchored" data-anchor-id="dem-perspective-data"><span class="header-section-number">1.2.4</span> DEM (Perspective) Data</h3>
<p>The provided Digital Elevation Model (DEM) consists of raster values showcasing variations in altitudes. These altitude values where converted into perspective data, therefore each pixel now showing the degree in which the groundstructure faces (0-360 degrees) using the <code>terra::terrain("aspect")</code> -function from the Terra package. The reclassification has been calculated according to <a href="#tbl-data-weights-def-drought">Table&nbsp;<span>1.2</span></a>.</p>
<p>Subsequently the slope data was categorized into varying degrees of possibility of drought (in %) based on their positioning due to facing the sun during the day. For further review of the reclassification code, please refer to the <a href="Appendix.html#sec-sec-aspect">Appendix</a>.</p>
<div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="do">### terrain::aspect Pasorapa &amp; Aiquile</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>aspect_pasorapa <span class="ot">&lt;-</span> <span class="fu">terrain</span>(dem_mask_pasorapa, <span class="st">"aspect"</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>aspect_aiquile  <span class="ot">&lt;-</span> <span class="fu">terrain</span>(dem_mask_aiquile, <span class="st">"aspect"</span>)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co"># writeRaster(aspect_pasorapa, "aspect_pasorapa.tif")</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co"># writeRaster(aspect_aiquile, "aspect_aiquile.tif")</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="co"># reclass</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a tibble with the reclassification table</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>reclass_table_aspect <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>from, <span class="sc">~</span>to, <span class="sc">~</span>becomes,</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>  <span class="sc">-</span><span class="cn">Inf</span>, <span class="dv">45</span>, <span class="dv">0</span>,</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>  <span class="dv">45</span>, <span class="dv">135</span>, <span class="fl">0.25</span>,</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>  <span class="dv">135</span>, <span class="dv">225</span>, <span class="dv">1</span>,</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>  <span class="dv">225</span>, <span class="dv">315</span>, <span class="fl">0.25</span>,</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">315</span>, <span class="cn">Inf</span>, <span class="dv">0</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Pasorapa: Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>aspect_reclassified_aiquile <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(aspect_aiquile, reclass_table_aspect, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Aiquile: Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>aspect_reclassified_pasorapa <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(aspect_pasorapa, reclass_table_aspect, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-perspective" class="cell tbl-parent quarto-layout-panel anchored" data-tbl-cap="Reclassification table of the Aspect Data">
<div class="panel-caption table-caption">
<p><strong>?(caption)</strong></p>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># write rds</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(aspect_reclassified_aiquile, "aspect_reclassified_aiquile.rds")</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(aspect_reclassified_pasorapa, "aspect_reclassified_pasorapa.rds")</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co"># read rds</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>aspect_reclassified_aiquile  <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"aspect_reclassified_aiquile.rds"</span>)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>aspect_reclassified_pasorapa <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"aspect_reclassified_pasorapa.rds"</span>)</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="co"># read other data</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>aspect_reclassified_pojo   <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"aspect_reclassified_pojo.rds"</span>)</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>aspect_reclassified_totora <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"aspect_reclassified_totora.rds"</span>)</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="co"># kable(reclass_table_aspect)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># change name</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(aspect_reclassified_aiquile) <span class="ot">&lt;-</span> <span class="st">"Drought Risk"</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(aspect_reclassified_aiquile) <span class="sc">+</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">palette =</span> colors) <span class="sc">+</span> </span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(aspect_reclassified_pasorapa) <span class="sc">+</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(aspect_reclassified_pojo) <span class="sc">+</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(aspect_reclassified_totora) <span class="sc">+</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_text</span>(<span class="st">"NAME_3"</span>, <span class="at">size =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span>  </span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Author: Johannes Quente"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-perspective" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Drought_Risk_files/figure-html/fig-perspective-1.png" class="img-fluid figure-img" width="480"></p>
<figcaption class="figure-caption">Figure&nbsp;1.5: DEM derived Perspective reclassification</figcaption>
</figure>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="precipitation-data" class="level3" data-number="1.2.5">
<h3 data-number="1.2.5" class="anchored" data-anchor-id="precipitation-data"><span class="header-section-number">1.2.5</span> Precipitation Data</h3>
<p>The following Data provided by <span class="citation" data-cites="fick2017worldclim">Fick and Hijmans (<a href="references.html#ref-fick2017worldclim" role="doc-biblioref">2017</a>)</span> resembles Precipitation Data on a 30 Arc Second Accuracy. The format provides one Raster-Layer for each month.</p>
<p>Twelve raster layers have been aggregated to generate a unified raster layer, facilitating subsequent classification. The outcome is a comprehensive raster layer encompassing the total precipitation for the average year spanning from 1970 to 2000. The utilized code is available in the <a href="Appendix.html#sec-sec-precip">Appendix</a> In the reclassification process, values were partitioned into five equally distributed groups based on frequency, with each group representing 20% of the total data frequency. The distribution and grouping methodology are illustrated in <a href="#fig-hist-precip-drought">Figure&nbsp;<span>1.6</span></a>. The reclassification has been calculated according to <a href="#tbl-data-weights-def-drought">Table&nbsp;<span>1.2</span></a>.</p>
<div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>precip_pasorapa <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">"sum_raster_pasorapa.tif"</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>precip_aiquile  <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">"sum_raster.tif"</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>precip_pojo     <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">"precip_pojo.tif"</span>)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>precip_totora   <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">"precip_totora.tif"</span>)</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>precip_todos    <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">"precip_todos.tif"</span>)</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclass</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a tibble with the reclassification table</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>reclass_table_precip <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>from, <span class="sc">~</span>to, <span class="sc">~</span>becomes,</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>  <span class="fl">1058.2</span>, <span class="cn">Inf</span>,     <span class="dv">0</span>,     </span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>  <span class="dv">640</span>,    <span class="fl">1058.2</span>,  <span class="fl">0.25</span>,  </span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>  <span class="dv">571</span>,    <span class="dv">640</span>,     <span class="fl">0.5</span>,   </span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>  <span class="fl">513.8</span>,  <span class="dv">571</span>,     <span class="fl">0.75</span>,  </span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>  <span class="sc">-</span><span class="cn">Inf</span>,   <span class="fl">513.8</span>,   <span class="dv">1</span>      </span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>precip_reclassified_pasorapa <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(precip_pasorapa, reclass_table_precip, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>precip_reclassified_aiquile <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(precip_aiquile, reclass_table_precip, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>precip_reclassified_pojo <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(precip_pojo, reclass_table_precip, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>precip_reclassified_totora <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(precip_totora, reclass_table_precip, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a><span class="co"># todos</span></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a>precip_reclassified_todos <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(precip_todos, reclass_table_precip, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a><span class="co"># table</span></span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a><span class="co"># kable(reclass_table_precip)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-precipitation" class="cell tbl-parent quarto-layout-panel anchored" data-tbl-cap="Reclassification table of the Precipitation Data">
<div class="panel-caption table-caption">
<p><strong>?(caption)</strong></p>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify the number of breaks (bins)</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>num_breaks <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>break_values <span class="ot">&lt;-</span> <span class="fu">quantile</span>(<span class="fu">values</span>(precip_todos, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">probs =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> num_breaks <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the histogram with equal-frequency breaks</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">values</span>(precip_todos), <span class="at">breaks =</span> <span class="st">"FD"</span>, <span class="at">main =</span> <span class="st">"Histogram of Data Distribution"</span>, <span class="at">xlab =</span> <span class="st">"Drought Risk Values"</span>, <span class="at">col =</span> <span class="st">"skyblue"</span>, <span class="at">border =</span> <span class="st">"black"</span>, <span class="at">plot =</span> <span class="cn">TRUE</span>)</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Add vertical lines to represent the breaks</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">quantile</span>(<span class="fu">values</span>(precip_todos, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">probs =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> num_breaks <span class="sc">+</span> <span class="dv">1</span>)), <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-hist-precip-drought" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Drought_Risk_files/figure-html/fig-hist-precip-drought-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;1.6: Distribution of the Precipitation Data</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># change name</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(precip_reclassified_todos) <span class="ot">&lt;-</span> <span class="st">"Drought Risk"</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(precip_reclassified_todos) <span class="sc">+</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">palette =</span> colors) <span class="sc">+</span> </span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_text</span>(<span class="st">"NAME_3"</span>, <span class="at">size =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span>  </span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Author: Johannes Quente"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-precipitation" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Drought_Risk_files/figure-html/fig-precipitation-1.png" class="img-fluid figure-img" width="480"></p>
<figcaption class="figure-caption">Figure&nbsp;1.7: Reclassification Result of the Precipitation Data</figcaption>
</figure>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="results-drought-risk-modeling" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="results-drought-risk-modeling"><span class="header-section-number">1.3</span> Results Drought Risk Modeling</h2>
<p>In this chapter the Results of the Drought Risk Modeling are being presented: <a href="#fig-histogram-distribution-drought">Figure&nbsp;<span>1.8</span></a> provides a visual representation of the data distribution, offering transparent insight into the significance of the reclassification values.</p>
<p>Further <a href="#fig-all-results-drought">Figure&nbsp;<span>1.9</span></a> showcases the Drought Risk Map results for the four municipalities, aiding in understanding the spatial distribution of drought risk. In <a href="#fig-histogram-equaly">Figure&nbsp;<span>1.10</span></a> displays the data values across the four municipalities using Histograms, categorized into five equally distributed classes: “Very Low”, “Low”, “Moderate”, “High”, and “Very High”.</p>
<p>A ratio scale-based risk mapping has been used to evenly distribute the data produced during the analysis. The <a href="#fig-all-results-drought-equal">Figure&nbsp;<span>1.11</span></a> presents the results with data values equally distributed across the four municipalities, providing a comprehensive overview of drought risk levels.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Totora</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Align resolutions </span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>river_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(river_totora, dem_reclassified_totora)</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>aspect_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(aspect_reclassified_totora, river_reclassified)</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>max_temp_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(max_temp_reclassified_totora, aspect_reclassified)</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>precip_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(precip_reclassified_totora, max_temp_reclassified)</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>dem_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(dem_reclassified_totora, precip_reclassified)</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted weights</span></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>weight_temp_max    <span class="ot">&lt;-</span> <span class="fl">0.2</span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>weight_perspektive <span class="ot">&lt;-</span> <span class="fl">0.15</span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>weight_dem         <span class="ot">&lt;-</span> <span class="fl">0.15</span></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>weight_river_dist  <span class="ot">&lt;-</span> <span class="fl">0.2</span></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>weight_precip      <span class="ot">&lt;-</span> <span class="fl">0.3</span></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the adjusted weighted combination</span></span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>final_raster <span class="ot">&lt;-</span> weight_temp_max      <span class="sc">*</span> max_temp_reclassified <span class="sc">+</span></span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a>                weight_perspektive   <span class="sc">*</span> aspect_reclassified <span class="sc">+</span></span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a>                weight_dem           <span class="sc">*</span> dem_reclassified <span class="sc">+</span></span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a>                weight_river_dist    <span class="sc">*</span> river_reclassified <span class="sc">+</span></span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a>                weight_precip        <span class="sc">*</span> precip_reclassified</span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a>final_raster_totora <span class="ot">&lt;-</span> final_raster</span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the weights and data</span></span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a>weights <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>)</span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a>data_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Max temp"</span>, <span class="st">"Perspektive"</span>, <span class="st">"Land Use"</span>, <span class="st">"DEM"</span>, <span class="st">"River Data"</span>, <span class="st">"Precipitation"</span>)</span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-34"><a href="#cb35-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the table</span></span>
<span id="cb35-35"><a href="#cb35-35" aria-hidden="true" tabindex="-1"></a>table_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Weight =</span> weights, <span class="at">Data =</span> data_names)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 0%        20%        40%        60%        80%       100% </span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 0.05683258 0.26250001 0.30620000 0.35955495 0.42100001 0.69281250 </span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Define breaks and labels for the reclassification</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.05683258</span>, <span class="fl">0.26250001</span>, <span class="fl">0.3062</span>, <span class="fl">0.35955495</span>, <span class="fl">0.42100001</span>, <span class="fl">0.69281250</span>)</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Muy bajo"</span>, <span class="st">"Bajo"</span>, <span class="st">"Moderado"</span>, <span class="st">"Alto"</span>, <span class="st">"Muy alto"</span>)</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Cut the raster values into categorical factors</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>factor_raster <span class="ot">&lt;-</span> <span class="fu">cut</span>(<span class="fu">values</span>(final_raster_totora), <span class="at">breaks =</span> breaks, <span class="at">labels =</span> labels, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a><span class="co"># change name</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(final_raster_totora) <span class="ot">&lt;-</span> <span class="st">"Drought Risk"</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new raster with categorized values</span></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>r_categorized         <span class="ot">&lt;-</span> final_raster_totora</span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a><span class="fu">values</span>(r_categorized) <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(factor_raster)</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>r_categorized_totora <span class="ot">&lt;-</span> r_categorized</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Pojo</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Align resolutions </span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>river_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(river_pojo, dem_reclassified_pojo)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>aspect_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(aspect_reclassified_pojo, river_reclassified)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>max_temp_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(max_temp_reclassified_pojo, aspect_reclassified)</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>precip_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(precip_reclassified_pojo, max_temp_reclassified)</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>dem_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(dem_reclassified_pojo, precip_reclassified)</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the adjusted weighted combination</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>final_raster <span class="ot">&lt;-</span> weight_temp_max      <span class="sc">*</span> max_temp_reclassified <span class="sc">+</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>                weight_perspektive   <span class="sc">*</span> aspect_reclassified <span class="sc">+</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>                weight_dem           <span class="sc">*</span> dem_reclassified <span class="sc">+</span></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>                weight_river_dist    <span class="sc">*</span> river_reclassified <span class="sc">+</span></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>                weight_precip        <span class="sc">*</span> precip_reclassified</span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>final_raster_pojo <span class="ot">&lt;-</span> final_raster</span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(final_raster)</span></span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the weights and data</span></span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>weights <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>)</span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a>data_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Max temp"</span>, <span class="st">"Perspektive"</span>, <span class="st">"Land Use"</span>, <span class="st">"DEM"</span>, <span class="st">"River Data"</span>, <span class="st">"Precipitation"</span>)</span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the table</span></span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a>table_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Weight =</span> weights, <span class="at">Data =</span> data_names)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">#         0%        20%        40%        60%        80%       100% </span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 0.07236859 0.26130000 0.30203100 0.34262143 0.40750000 0.65400001 </span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Define breaks and labels for the reclassification</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.07236859</span>, <span class="fl">0.2613</span>, <span class="fl">0.302031</span>, <span class="fl">0.34262143</span>, <span class="fl">0.4075</span>, <span class="fl">0.65400001</span>)</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Muy bajo"</span>, <span class="st">"Bajo"</span>, <span class="st">"Moderado"</span>, <span class="st">"Alto"</span>, <span class="st">"Muy alto"</span>)</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Cut the raster values into categorical factors</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>factor_raster <span class="ot">&lt;-</span> <span class="fu">cut</span>(<span class="fu">values</span>(final_raster), <span class="at">breaks =</span> breaks, <span class="at">labels =</span> labels, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>)</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a><span class="co"># change name</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(final_raster) <span class="ot">&lt;-</span> <span class="st">"Drought Risk"</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new raster with categorized values</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>r_categorized         <span class="ot">&lt;-</span> final_raster</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a><span class="fu">values</span>(r_categorized) <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(factor_raster)</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>r_categorized_pojo <span class="ot">&lt;-</span> r_categorized</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Pasorapa</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Align resolutions </span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>river_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(river_reclassified_pasorapa, dem_reclassified_pasorapa)</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>aspect_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(aspect_reclassified_pasorapa, river_reclassified)</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>max_temp_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(max_temp_reclassified_pasorapa, aspect_reclassified)</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>precip_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(precip_reclassified_pasorapa, max_temp_reclassified)</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>dem_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(dem_reclassified_pasorapa, precip_reclassified)</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Ponderación de criterios segun: ELABORACION DEL MAPA DE RIESGO A SEQUIAS</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ((( [V_ATsqia_1] *0.75) + ( [V_PL_sqia] *0.25)) * 0.40) + ((( [V_uso_sqia] *0.52) + ( [V_dens] *0.16) +( [V_DR_sqia] *0.14) + ( [V_slp_sqia] *0.1) + ( [V_Orie_sqi] *0.08)) *0.60)</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the adjusted weighted combination</span></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>final_raster <span class="ot">&lt;-</span> weight_temp_max      <span class="sc">*</span> max_temp_reclassified <span class="sc">+</span></span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>                weight_perspektive   <span class="sc">*</span> aspect_reclassified <span class="sc">+</span></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>                weight_dem           <span class="sc">*</span> dem_reclassified <span class="sc">+</span></span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>                weight_river_dist    <span class="sc">*</span> river_reclassified <span class="sc">+</span></span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>                weight_precip        <span class="sc">*</span> precip_reclassified</span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a>final_raster_pasorapa <span class="ot">&lt;-</span> final_raster</span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the weights and data</span></span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a>weights <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>)</span>
<span id="cb39-29"><a href="#cb39-29" aria-hidden="true" tabindex="-1"></a>data_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Max temp"</span>, <span class="st">"Perspektive"</span>, <span class="st">"Land Use"</span>, <span class="st">"DEM"</span>, <span class="st">"River Data"</span>, <span class="st">"Precipitation"</span>)</span>
<span id="cb39-30"><a href="#cb39-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-31"><a href="#cb39-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the table</span></span>
<span id="cb39-32"><a href="#cb39-32" aria-hidden="true" tabindex="-1"></a>table_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Weight =</span> weights, <span class="at">Data =</span> data_names)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">#        0%       20%       40%       60%       80%      100% </span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 0.2885000 0.4974375 0.5435000 0.5865875 0.6375000 0.8966000 </span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Define breaks and labels for the reclassification</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.2885</span>, <span class="fl">0.4974375</span>, <span class="fl">0.5435</span>, <span class="fl">0.5865875</span>, <span class="fl">0.6375</span>, <span class="fl">0.8966</span>)</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Muy bajo"</span>, <span class="st">"Bajo"</span>, <span class="st">"Moderado"</span>, <span class="st">"Alto"</span>, <span class="st">"Muy alto"</span>)</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Cut the raster values into categorical factors</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>factor_raster <span class="ot">&lt;-</span> <span class="fu">cut</span>(<span class="fu">values</span>(final_raster), <span class="at">breaks =</span> breaks, <span class="at">labels =</span> labels, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>)</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="co"># change name</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(final_raster) <span class="ot">&lt;-</span> <span class="st">"Drought Risk"</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new raster with categorized values</span></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>r_categorized         <span class="ot">&lt;-</span> final_raster</span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a><span class="fu">values</span>(r_categorized) <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(factor_raster)</span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>r_categorized_pasorapa <span class="ot">&lt;-</span> r_categorized</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Aiquile</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Align resolutions (resample geo)</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>river_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(river_reclassified_aiquile, dem_reclassified_aiquile)</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Align resolutions (resample geo)</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>aspect_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(aspect_reclassified_aiquile, river_reclassified)</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Align resolutions (resample geo)</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>max_temp_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(max_temp_reclassified_aiquile, aspect_reclassified)</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Align resolutions (resample geo)</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>precip_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(precip_reclassified_aiquile, max_temp_reclassified)</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>dem_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(dem_reclassified_aiquile, precip_reclassified)</span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the adjusted weighted combination</span></span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>final_raster <span class="ot">&lt;-</span> weight_temp_max      <span class="sc">*</span> max_temp_reclassified <span class="sc">+</span></span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>                weight_perspektive   <span class="sc">*</span> aspect_reclassified <span class="sc">+</span></span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>                weight_dem           <span class="sc">*</span> dem_reclassified <span class="sc">+</span></span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>                weight_river_dist    <span class="sc">*</span> river_reclassified <span class="sc">+</span></span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>                weight_precip        <span class="sc">*</span> precip_reclassified</span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a>final_raster_aiquile <span class="ot">&lt;-</span> final_raster</span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the weights and data</span></span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true" tabindex="-1"></a>weights <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.15</span>, <span class="fl">0.15</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>)</span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true" tabindex="-1"></a>data_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Max temp"</span>, <span class="st">"Perspektive"</span>, <span class="st">"DEM"</span>, <span class="st">"River Data"</span>, <span class="st">"Precipitation"</span>)</span>
<span id="cb41-30"><a href="#cb41-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-31"><a href="#cb41-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the table</span></span>
<span id="cb41-32"><a href="#cb41-32" aria-hidden="true" tabindex="-1"></a>table_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Weight =</span> weights, <span class="at">Data =</span> data_names)</span>
<span id="cb41-33"><a href="#cb41-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-34"><a href="#cb41-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the table</span></span>
<span id="cb41-35"><a href="#cb41-35" aria-hidden="true" tabindex="-1"></a><span class="co"># kable(table_data)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">#        0%       20%       40%       60%       80%      100% </span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 0.2085000 0.4322500 0.4763125 0.5184375 0.5797500 0.8700000 </span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Define breaks and labels for the reclassification</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.2085</span>, <span class="fl">0.43225</span>, <span class="fl">0.4763125</span>, <span class="fl">0.5184375</span>, <span class="fl">0.57975</span>, <span class="fl">0.87</span>)</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Muy bajo"</span>, <span class="st">"Bajo"</span>, <span class="st">"Moderado"</span>, <span class="st">"Alto"</span>, <span class="st">"Muy alto"</span>)</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Cut the raster values into categorical factors</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>factor_raster <span class="ot">&lt;-</span> <span class="fu">cut</span>(<span class="fu">values</span>(final_raster), <span class="at">breaks =</span> breaks, <span class="at">labels =</span> labels, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>)</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a><span class="co"># change name</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(final_raster) <span class="ot">&lt;-</span> <span class="st">"Drought Risk"</span></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new raster with categorized values</span></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>r_categorized         <span class="ot">&lt;-</span> final_raster</span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a><span class="fu">values</span>(r_categorized) <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(factor_raster)</span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>r_categorized_aiquile <span class="ot">&lt;-</span> r_categorized</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the municipalities</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>municipalities <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"pojo"</span>, <span class="st">"pasorapa"</span>, <span class="st">"aiquile"</span>, <span class="st">"totora"</span>)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the number of breaks (bins)</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>num_breaks <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop over each municipality</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (municipality <span class="cf">in</span> municipalities) {</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get the final raster data for the current municipality</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>  final_raster <span class="ot">&lt;-</span> <span class="cf">switch</span>(municipality,</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>                         <span class="at">pojo =</span> final_raster_pojo,</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>                         <span class="at">pasorapa =</span> final_raster_pasorapa,</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>                         <span class="at">aiquile =</span> final_raster_aiquile,</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>                         <span class="at">totora =</span> final_raster_totora)</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Check if final_raster is NULL</span></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># if (is.null(final_raster)) {</span></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   cat("Error: Final raster data is NULL for", municipality, "\n")</span></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># } else {</span></span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Compute the break values</span></span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>    break_values <span class="ot">&lt;-</span> <span class="fu">quantile</span>(<span class="fu">values</span>(final_raster, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">probs =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> num_breaks <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Capitalize the first letter of the municipality name</span></span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a>    capitalized_municipality <span class="ot">&lt;-</span> <span class="fu">str_to_title</span>(municipality)</span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create the histogram with equal-frequency breaks</span></span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hist</span>(<span class="fu">values</span>(final_raster), <span class="at">breaks =</span> <span class="st">"FD"</span>, <span class="at">main =</span> <span class="fu">paste</span>(<span class="st">"Histogram of Drought Risk for"</span>, capitalized_municipality), <span class="at">xlab =</span> <span class="st">"Drought Risk Values"</span>, <span class="at">col =</span> <span class="st">"skyblue"</span>, <span class="at">border =</span> <span class="st">"black"</span>, <span class="at">plot =</span> <span class="cn">TRUE</span>)</span>
<span id="cb43-29"><a href="#cb43-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb43-30"><a href="#cb43-30" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add vertical lines to represent the breaks</span></span>
<span id="cb43-31"><a href="#cb43-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">abline</span>(<span class="at">v =</span> break_values, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb43-32"><a href="#cb43-32" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-histogram-distribution-drought" class="cell quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-histogram-distribution-drought-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Drought_Risk_files/figure-html/fig-histogram-distribution-drought-1.png" class="img-fluid figure-img" data-ref-parent="fig-histogram-distribution-drought" width="672"></p>
<figcaption class="figure-caption">(a) Distribution of Pojo</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-histogram-distribution-drought-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Drought_Risk_files/figure-html/fig-histogram-distribution-drought-2.png" class="img-fluid figure-img" data-ref-parent="fig-histogram-distribution-drought" width="672"></p>
<figcaption class="figure-caption">(b) Distribution of Pasorapa</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-histogram-distribution-drought-3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Drought_Risk_files/figure-html/fig-histogram-distribution-drought-3.png" class="img-fluid figure-img" data-ref-parent="fig-histogram-distribution-drought" width="672"></p>
<figcaption class="figure-caption">(c) Distribution of Aiquile</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-histogram-distribution-drought-4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Drought_Risk_files/figure-html/fig-histogram-distribution-drought-4.png" class="img-fluid figure-img" data-ref-parent="fig-histogram-distribution-drought" width="672"></p>
<figcaption class="figure-caption">(d) Distribution of Totora</figcaption>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;1.8: Data Distribution of the four Municipalities</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># change name</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(precip_reclassified_todos) <span class="ot">&lt;-</span> <span class="st">"Drought Risk"</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(r_categorized_totora) <span class="sc">+</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(r_categorized_pojo) <span class="sc">+</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(r_categorized_aiquile) <span class="sc">+</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(r_categorized_pasorapa) <span class="sc">+</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_text</span>(<span class="st">"NAME_3"</span>, <span class="at">size =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span>  </span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Author: Johannes Quente"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-all-results-drought" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Drought_Risk_files/figure-html/fig-all-results-drought-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;1.9: Result Drought Risk for each Municipality</figcaption>
</figure>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use terra::merge to combine the raster layers</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>final_raster <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">merge</span>(final_raster_pojo, final_raster_pasorapa, final_raster_aiquile, final_raster_totora)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify the number of breaks (bins)</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>num_breaks <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>break_values <span class="ot">&lt;-</span> <span class="fu">quantile</span>(<span class="fu">values</span>(final_raster, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">probs =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> num_breaks <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract numeric values</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>numeric_breaks <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(break_values))</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the histogram with equal-frequency breaks</span></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(final_raster, <span class="at">breaks =</span> <span class="st">"FD"</span>, <span class="at">main =</span> <span class="st">"Histogram of Drought Risk"</span>, <span class="at">xlab =</span> <span class="st">"Drought Risk Values"</span>, <span class="at">col =</span> <span class="st">"skyblue"</span>, <span class="at">border =</span> <span class="st">"black"</span>, <span class="at">plot =</span> <span class="cn">TRUE</span>)</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Add vertical lines at quantile positions</span></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> break_values, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-histogram-equaly" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Drought_Risk_files/figure-html/fig-histogram-equaly-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;1.10: Distribution of the final Data</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define breaks and labels for the reclassification</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">&lt;-</span> numeric_breaks</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Muy bajo"</span>, <span class="st">"Bajo"</span>, <span class="st">"Moderado"</span>, <span class="st">"Alto"</span>, <span class="st">"Muy alto"</span>)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Cut the raster values into categorical factors</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>factor_raster <span class="ot">&lt;-</span> <span class="fu">cut</span>(<span class="fu">values</span>(final_raster), <span class="at">breaks =</span> breaks, <span class="at">labels =</span> labels, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>)</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="co"># change name</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(final_raster) <span class="ot">&lt;-</span> <span class="st">"Drought Risk"</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new raster with categorized values</span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>r_categorized         <span class="ot">&lt;-</span> final_raster</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a><span class="fu">values</span>(r_categorized) <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(factor_raster)</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a><span class="co"># view</span></span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(r_categorized, <span class="at">labels =</span> <span class="st">"New Legend Label"</span>) <span class="sc">+</span></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_text</span>(<span class="st">"NAME_3"</span>, <span class="at">size =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span>  </span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Author: Johannes Quente"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-all-results-drought-equal" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Drought_Risk_files/figure-html/fig-all-results-drought-equal-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption class="figure-caption">Figure&nbsp;1.11: Result Drought Risk for 4 Municipalities</figcaption>
</figure>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="discussion" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="discussion"><span class="header-section-number">1.4</span> Discussion</h2>
<p>This study aims to evaluate the risk of drought, flood, and frost and identify potential risk zones in the Valle Alto region of Cochabamba, including Aiquile, Pasorapa, Pojo, and Totoro.</p>
<p>The objective of this study is to provide evidence-based information to enhance the resilience of communities and ecosystems to hazards related to drought, flood, and frost. A ratio scale-based risk mapping has been identified as the most effective method to evenly distribute the data produced during the analysis.</p>
<p>To improve the precision of our models, it is crucial to evaluate this readjustment based on empirical insights and observations from the studied environments. By fine-tuning these weights, we can align our models more closely with the intricate realities of these ecosystems, potentially revealing details that may have been missed in previous analyses.</p>
<p>In proposing these customized weighting and reclassification parameters, my aim is to assist the scientific discourse by introducing a more precise perspective. This method offers a clearer view through which various dynamics of our natural environments can be examined, comprehended, and conveyed.</p>
<p>While temperature is a standard indicator, its impact varies across different plant species, suggesting the need for a more comprehensive consideration of frost impacts beyond freezing temperatures <span class="citation" data-cites="Condori2014">(<a href="references.html#ref-Condori2014" role="doc-biblioref">Condori et al. 2014</a>)</span>.</p>
<p>In the future, by leveraging satellite imagery and tapping into local knowledge through field visits and workshops with stakeholders, there is potential to enhance the mapping of historically flood-prone areas significantly. This would involve evaluating the intensity of floods and delineating these zones to gain deeper insights into the frequency and impact of flooding. Such a comprehensive approach is crucial for effectively addressing the multifaceted challenges posed by these natural phenomena <span class="citation" data-cites="Tanim2022">(<a href="references.html#ref-Tanim2022" role="doc-biblioref">Tanim et al. 2022</a>)</span>.</p>
</section>
<section id="conclusion" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="conclusion"><span class="header-section-number">1.5</span> Conclusion</h2>
<p>The objective of this study was to identify areas in the four Municipalities of the Cono Sur area of the State of Cochabamba that are susceptible to droughts, floods, and frosts.</p>
<p>To achieve this, various geospatial datasets were explored, including terrain attributes, geological features, and precipitation records. Each dataset was analyzed using predetermined weights to emphasize their relative importance in the study. During the Multicriteria Analysis, we integrated numerous Raster and Vector Layers using weighted factors.</p>
<p>By utilizing the R-Studio Environment and key packages crucial for these calculations the resultant raster (<a href="#fig-all-results-drought">Figure&nbsp;<span>1.9</span></a> and <a href="#fig-all-results-drought-equal">Figure&nbsp;<span>1.11</span></a>) provides a comprehensive representation of the region’s environmental aspects.</p>
<p>The methodology aims to identify areas that are at risk of severe impact from certain meteorological conditions. It supports local policymaking by utilizing an adaptable approach.</p>
<p>The risk potential is classified into five categories: ‘Very low’, ‘Low’, ‘Moderate’, ‘High’, and ‘Very High’, as shown on the map. To ensure a balanced visualization of the five risk categories, the resulting data has been equally partitioned into five equally distributed groups.</p>
</section>
<section id="appendix-maps" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="appendix-maps"><span class="header-section-number">1.6</span> Appendix Maps</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># view</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(r_categorized_totora, <span class="at">labels =</span> <span class="st">"New Legend Label"</span>) <span class="sc">+</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">style =</span> <span class="st">"cont"</span>, <span class="at">palette =</span> colors, <span class="at">breaks =</span> breaks) <span class="sc">+</span>  <span class="co"># Change style to "cont" or "cat"</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span>  </span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Author: Johannes Quente"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-result-totora" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Drought_Risk_files/figure-html/fig-result-totora-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;1.12: Reclassified and Weighted Result in Totora</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(r_categorized_pojo, <span class="at">labels =</span> <span class="st">"New Legend Label"</span>) <span class="sc">+</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">style =</span> <span class="st">"cont"</span>, <span class="at">palette =</span> colors, <span class="at">breaks =</span> breaks) <span class="sc">+</span>  <span class="co"># Change style to "cont" or "cat"</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span>  </span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Author: Johannes Quente"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-result-pojo" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Drought_Risk_files/figure-html/fig-result-pojo-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;1.13: Reclassified and Weighted Result in Pojo</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(r_categorized_pasorapa, <span class="at">labels =</span> <span class="st">"New Legend Label"</span>) <span class="sc">+</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">style =</span> <span class="st">"cont"</span>, <span class="at">palette =</span> colors, <span class="at">breaks =</span> breaks) <span class="sc">+</span>  <span class="co"># Change style to "cont" or "cat"</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span>  </span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Author: Johannes Quente"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-result-pasorapa" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Drought_Risk_files/figure-html/fig-result-pasorapa-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;1.14: Reclassified and Weighted Result in Pasorapa</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(r_categorized_aiquile, <span class="at">labels =</span> <span class="st">"New Legend Label"</span>) <span class="sc">+</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">style =</span> <span class="st">"cont"</span>, <span class="at">palette =</span> colors, <span class="at">breaks =</span> breaks) <span class="sc">+</span>  <span class="co"># Change style to "cont" or "cat"</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span>  </span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Author: Johannes Quente"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-result-aiquile" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Drought_Risk_files/figure-html/fig-result-aiquile-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;1.15: Reclassified and Weighted Result in Aiquile</figcaption>
</figure>
</div>
</div>
</div>


<!-- -->

<div id="refs" class="references csl-bib-body hanging-indent" role="list" style="display: none">
<div id="ref-Condori2014" class="csl-entry" role="listitem">
Condori, Bruno, Robert J. Hijmans, Jean Francois Ledent, and Roberto Quiroz. 2014. <span>“Managing Potato Biodiversity to Cope with Frost Risk in the High Andes: A Modeling Perspective.”</span> <em>PLOS ONE</em> 9 (January): e81510. <a href="https://doi.org/10.1371/JOURNAL.PONE.0081510">https://doi.org/10.1371/JOURNAL.PONE.0081510</a>.
</div>
<div id="ref-fick2017worldclim" class="csl-entry" role="listitem">
Fick, Stephen E., and Robert J. Hijmans. 2017. <span>“WorldClim 2: New 1km Spatial Resolution Climate Surfaces for Global Land Areas.”</span> <em>International Journal of Climatology</em> 37 (12): 4302–15. <a href="https://www.worldclim.org/data/worldclim21.html">https://www.worldclim.org/data/worldclim21.html</a>.
</div>
<div id="ref-Gao2023" class="csl-entry" role="listitem">
Gao, Fengjie, Si Zhang, Rui Yu, Yafang Zhao, Yuxin Chen, and Ying Zhang. 2023. <span>“Agricultural Drought Risk Assessment Based on a Comprehensive Model Using Geospatial Techniques in Songnen Plain, China.”</span> <em>Land</em> 12 (June). <a href="https://doi.org/10.3390/land12061184">https://doi.org/10.3390/land12061184</a>.
</div>
<div id="ref-linke2019global" class="csl-entry" role="listitem">
Linke, Simon, Bernhard Lehner, Cynthia Ouellet Dallaire, Joyce Ariwi, Günther Grill, Manu Anand, Paul Beames, et al. 2019. <span>“Global Hydro-Environmental Sub-Basin and River Reach Characteristics at High Spatial Resolution.”</span> <em>Scientific Data</em> 6: 283. <a href="https://doi.org/10.1038/s41597-019-0300-6">https://doi.org/10.1038/s41597-019-0300-6</a>.
</div>
<div id="ref-Tanim2022" class="csl-entry" role="listitem">
Tanim, Ahad Hasan, Callum Blake McRae, Hassan Tavakol‐davani, and Erfan Goharian. 2022. <span>“Flood Detection in Urban Areas Using Satellite Imagery and Machine Learning.”</span> <em>Water 2022, Vol. 14, Page 1140</em> 14 (April): 1140. <a href="https://doi.org/10.3390/W14071140">https://doi.org/10.3390/W14071140</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Preface</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Frost_Risk.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Frost Risk</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb51" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Drought Risk"</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="an">editor_options:</span><span class="co"> </span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co">  chunk_output_type: console</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="co">  </span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span><span class="co"> </span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="co">  echo: true</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a><span class="co">  message: false</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a><span class="co">  warning: false</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a><span class="fu">## Frame of Reference {#sec-sec-drought}</span></span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>This study was conducted in four areas of Cochabamba's Valle Alto region: Aiquile, Pasorapa, Pojo, and Totoro. These areas are known for their vast farmlands that produce a variety of crops.</span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a>Mountain water sources are vital for irrigation in these and other areas. However, there have been disputes over water rights within and between these areas. Changes in climate patterns have led to concerns about water security, causing extended periods of water shortage.</span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a>The goal of this study is to develop a method to identify potential weather risks like <span class="co">[</span><span class="ot">drought</span><span class="co">](#sec-sec-drought)</span>, <span class="co">[</span><span class="ot">frost</span><span class="co">](#sec-sec-frost)</span>, and <span class="co">[</span><span class="ot">flood</span><span class="co">](#sec-sec-flood)</span>, Taking into account the distinctive physical and social attributes of the four states within the Bolivian high valley region. The findings are intended to support risk prevention policies in all four areas.</span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a>This study uses a cost-effective, scientific, and adaptable approach to different situations. It combines detailed physical aspects, and aims to influencing decisions about land and natural resource management. This method could potentially be used in other regions and nationally.</span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a>Drought is a weather event that happens when there's less rainfall than average over a period, causing a significant and long-lasting water shortage that affects human activities. Droughts, which are becoming more common worldwide, are among the most economically damaging natural events, leading to the loss of large areas of crops and the death of many livestock.</span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true" tabindex="-1"></a>Risk is the result of the dynamic relationship between threats and vulnerabilities within a society or its specific components. It's calculated using the following equation: Risk depends on the likelihood of hazardous events happening and the presence of a vulnerable population exposed to the threat. This means that if there's no threat, there's no risk, or if the population isn't vulnerable, the risk is zero.</span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true" tabindex="-1"></a>Risk predicts the probability of future disasters, indicating the potential future damage and losses associated with the impact of an external physical event on a vulnerable society, exceeding the society's ability to recover from such impacts on its own.</span>
<span id="cb51-27"><a href="#cb51-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-28"><a href="#cb51-28" aria-hidden="true" tabindex="-1"></a>Disasters happen because of unmanaged risks. Therefore, it's important for areas to establish risk management policies and create planning bodies like a "Risk Management Unit," equipped with planning tools and instruments. Risk maps are important tools for land planning that greatly help with risk management.</span>
<span id="cb51-29"><a href="#cb51-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-30"><a href="#cb51-30" aria-hidden="true" tabindex="-1"></a>A group of development workers known as the *Equipo Cono Sur*, from the <span class="co">[</span><span class="ot">NGO Agrecol Andes</span><span class="co">](https://www.agrecolandes.org/)</span>, are focused on helping communities and governments in the Cochabamba's Valle Alto region: including special efforts in Aiquile, Pasorapa, Pojo, and Totoro prepare for future challenges such as droughts, frosts, and floods. They aim to adapt local residents and governments to these risks.</span>
<span id="cb51-31"><a href="#cb51-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-32"><a href="#cb51-32" aria-hidden="true" tabindex="-1"></a>Additionally, they recently conducted a case study on Recharge Zones (called *"Zonas de Recarga Hídrica"* in Spanish) using a similar professional approach as this Multicriteria Analysis Case Study. This Document can been viewed here: <span class="co">[</span><span class="ot">Multicriterianalysis Recarga Hídrica (2023).</span><span class="co">](https://www.dropbox.com/scl/fi/ivg9uhrncd9aym88kewhn/Multicriterianalysis-Recarga-H-drica.pdf?rlkey=jz011qofqpqts1y2ixl1o295m&amp;dl=0)</span></span>
<span id="cb51-33"><a href="#cb51-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-34"><a href="#cb51-34" aria-hidden="true" tabindex="-1"></a><span class="in">```{r libraries}</span></span>
<span id="cb51-35"><a href="#cb51-35" aria-hidden="true" tabindex="-1"></a><span class="co"># read libraries</span></span>
<span id="cb51-36"><a href="#cb51-36" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(raster)</span>
<span id="cb51-37"><a href="#cb51-37" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(terra)</span>
<span id="cb51-38"><a href="#cb51-38" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb51-39"><a href="#cb51-39" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb51-40"><a href="#cb51-40" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb51-41"><a href="#cb51-41" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb51-42"><a href="#cb51-42" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb51-43"><a href="#cb51-43" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb51-44"><a href="#cb51-44" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(webshot2)</span>
<span id="cb51-45"><a href="#cb51-45" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb51-46"><a href="#cb51-46" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(geodata)</span>
<span id="cb51-47"><a href="#cb51-47" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb51-48"><a href="#cb51-48" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-49"><a href="#cb51-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-50"><a href="#cb51-50" aria-hidden="true" tabindex="-1"></a><span class="in">```{r load_data}</span></span>
<span id="cb51-51"><a href="#cb51-51" aria-hidden="true" tabindex="-1"></a>bol   <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">"gadm41_BOL_3.shp"</span>, <span class="at">crs =</span> <span class="dv">4326</span>) <span class="co"># Pasorapa extent</span></span>
<span id="cb51-52"><a href="#cb51-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-53"><a href="#cb51-53" aria-hidden="true" tabindex="-1"></a><span class="co"># pop &lt;- rast("gpw_v4_population_count_rev11_2020_2pt5_min.tif")</span></span>
<span id="cb51-54"><a href="#cb51-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-55"><a href="#cb51-55" aria-hidden="true" tabindex="-1"></a><span class="co"># river data </span></span>
<span id="cb51-56"><a href="#cb51-56" aria-hidden="true" tabindex="-1"></a><span class="co"># river &lt;- read_sf("HydroRIVERS_v10_sa.shp")</span></span>
<span id="cb51-57"><a href="#cb51-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-58"><a href="#cb51-58" aria-hidden="true" tabindex="-1"></a><span class="do">## raster</span></span>
<span id="cb51-59"><a href="#cb51-59" aria-hidden="true" tabindex="-1"></a><span class="co"># dem &lt;- rast("s20w070_dem.tif")</span></span>
<span id="cb51-60"><a href="#cb51-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-61"><a href="#cb51-61" aria-hidden="true" tabindex="-1"></a><span class="do">## Land use # (only 11 classes)</span></span>
<span id="cb51-62"><a href="#cb51-62" aria-hidden="true" tabindex="-1"></a><span class="co"># land &lt;- read_sf("cob_uso.shp")</span></span>
<span id="cb51-63"><a href="#cb51-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-64"><a href="#cb51-64" aria-hidden="true" tabindex="-1"></a><span class="co"># Data from Tito (only 3 classes)</span></span>
<span id="cb51-65"><a href="#cb51-65" aria-hidden="true" tabindex="-1"></a><span class="co"># land_new &lt;- rast("uso_suelo.tif")</span></span>
<span id="cb51-66"><a href="#cb51-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-67"><a href="#cb51-67" aria-hidden="true" tabindex="-1"></a><span class="co"># land_filter &lt;- land %&gt;% filter(!USO %in% c("Recreativo: Escénico, Turístico", "Productivo Aguas Superficiales Mixto: Generación de energía eléctrica Agua para riego, Pesca, Captación de Agua potable, Transporte Fluvial", "Extractivo Minero en parte: Explotación de yacimientos mineros; Por sectores escaso pastoreo directo", "Productivo Aguas Superficiales Mixto: Generación de energía eléctrica Agua para riego, Pesca, Captación de Agua potable, Transporte Fluvial", "Extractivo Minero, Productivo Agropecuario, Protectivo, Vida silvestre", "Productivo Agropecuario, Extractivo Forestal y Petrolero: Cultivos Alimenticios, Pastoreo directo por sectores, Productos Maderables y no Maderables, Extracción de Combustibles fósiles", "Productivo Agropecuario, Extractivo Forestal: Pastoreo, Ramoneo, Cultivos alimenticios en algunos sectores, Extracción de Leña en parte")) </span></span>
<span id="cb51-68"><a href="#cb51-68" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-69"><a href="#cb51-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-72"><a href="#cb51-72" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-73"><a href="#cb51-73" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-overview-cochabamba</span></span>
<span id="cb51-74"><a href="#cb51-74" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Overview of the frame of Reference Cochabamba and its four Municipalities: Aiquile, Pasorapa, Pojo &amp; Totora"</span></span>
<span id="cb51-75"><a href="#cb51-75" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-subcap: </span></span>
<span id="cb51-76"><a href="#cb51-76" aria-hidden="true" tabindex="-1"></a><span class="co">#| -  "Map of the Plurinational State of Bolivia"</span></span>
<span id="cb51-77"><a href="#cb51-77" aria-hidden="true" tabindex="-1"></a><span class="co">#| -  "Map of Municipalities of Cochabamba and its 4 Municipalities of interest"</span></span>
<span id="cb51-78"><a href="#cb51-78" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 5</span></span>
<span id="cb51-79"><a href="#cb51-79" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb51-80"><a href="#cb51-80" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-nrow: 1</span></span>
<span id="cb51-81"><a href="#cb51-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-82"><a href="#cb51-82" aria-hidden="true" tabindex="-1"></a><span class="co"># select municipalities</span></span>
<span id="cb51-83"><a href="#cb51-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-84"><a href="#cb51-84" aria-hidden="true" tabindex="-1"></a>cocha <span class="ot">&lt;-</span> bol <span class="sc">%&gt;%</span> <span class="fu">filter</span>(NAME_1 <span class="sc">==</span> <span class="st">"Cochabamba"</span>)</span>
<span id="cb51-85"><a href="#cb51-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-86"><a href="#cb51-86" aria-hidden="true" tabindex="-1"></a><span class="co"># filter der bol shapes Aiquile</span></span>
<span id="cb51-87"><a href="#cb51-87" aria-hidden="true" tabindex="-1"></a>Pasorapa <span class="ot">&lt;-</span> cocha <span class="sc">%&gt;%</span> <span class="fu">filter</span>(NAME_3 <span class="sc">==</span> <span class="st">"Pasorapa"</span>)</span>
<span id="cb51-88"><a href="#cb51-88" aria-hidden="true" tabindex="-1"></a>Aiquile  <span class="ot">&lt;-</span> cocha <span class="sc">%&gt;%</span> <span class="fu">filter</span>(NAME_3 <span class="sc">==</span> <span class="st">"Aiquile"</span>)</span>
<span id="cb51-89"><a href="#cb51-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-90"><a href="#cb51-90" aria-hidden="true" tabindex="-1"></a><span class="co"># new</span></span>
<span id="cb51-91"><a href="#cb51-91" aria-hidden="true" tabindex="-1"></a>totora   <span class="ot">&lt;-</span> cocha <span class="sc">%&gt;%</span> <span class="fu">filter</span>(NAME_3 <span class="sc">==</span> <span class="st">"Totora"</span>)</span>
<span id="cb51-92"><a href="#cb51-92" aria-hidden="true" tabindex="-1"></a>pojo     <span class="ot">&lt;-</span> cocha <span class="sc">%&gt;%</span> <span class="fu">filter</span>(NAME_3 <span class="sc">==</span> <span class="st">"Pojo"</span>)</span>
<span id="cb51-93"><a href="#cb51-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-94"><a href="#cb51-94" aria-hidden="true" tabindex="-1"></a><span class="co"># read bol_1.shp and Cochabamba.shp</span></span>
<span id="cb51-95"><a href="#cb51-95" aria-hidden="true" tabindex="-1"></a>bol_1      <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">"bol_1.shp"</span>)</span>
<span id="cb51-96"><a href="#cb51-96" aria-hidden="true" tabindex="-1"></a>Cochabamba <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">"Cochabamba.shp"</span>)</span>
<span id="cb51-97"><a href="#cb51-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-98"><a href="#cb51-98" aria-hidden="true" tabindex="-1"></a><span class="co"># plot first map</span></span>
<span id="cb51-99"><a href="#cb51-99" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(bol_1) <span class="sc">+</span></span>
<span id="cb51-100"><a href="#cb51-100" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb51-101"><a href="#cb51-101" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>,) <span class="sc">+</span></span>
<span id="cb51-102"><a href="#cb51-102" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb51-103"><a href="#cb51-103" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Cochabamba) <span class="sc">+</span>  </span>
<span id="cb51-104"><a href="#cb51-104" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb51-105"><a href="#cb51-105" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_text</span>(<span class="st">"NAME_1"</span>, <span class="at">size =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb51-106"><a href="#cb51-106" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">250</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>)) <span class="sc">+</span></span>
<span id="cb51-107"><a href="#cb51-107" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb51-108"><a href="#cb51-108" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Data source: gdm.org"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"center"</span>) <span class="sc">+</span> <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb51-109"><a href="#cb51-109" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb51-110"><a href="#cb51-110" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb51-111"><a href="#cb51-111" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb51-112"><a href="#cb51-112" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb51-113"><a href="#cb51-113" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-114"><a href="#cb51-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-115"><a href="#cb51-115" aria-hidden="true" tabindex="-1"></a><span class="co"># cocha is an sf object containing the extent you want to highlight</span></span>
<span id="cb51-116"><a href="#cb51-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-117"><a href="#cb51-117" aria-hidden="true" tabindex="-1"></a><span class="co"># Main map with transparent extent of cocha</span></span>
<span id="cb51-118"><a href="#cb51-118" aria-hidden="true" tabindex="-1"></a>main_map <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(cocha) <span class="sc">+</span></span>
<span id="cb51-119"><a href="#cb51-119" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_sf</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>)  <span class="co"># Adjust alpha for transparency</span></span>
<span id="cb51-120"><a href="#cb51-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-121"><a href="#cb51-121" aria-hidden="true" tabindex="-1"></a><span class="co"># Additional maps for municipalities</span></span>
<span id="cb51-122"><a href="#cb51-122" aria-hidden="true" tabindex="-1"></a>municipality_maps <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Pasorapa) <span class="sc">+</span></span>
<span id="cb51-123"><a href="#cb51-123" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_sf</span>() <span class="sc">+</span></span>
<span id="cb51-124"><a href="#cb51-124" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(Aiquile) <span class="sc">+</span></span>
<span id="cb51-125"><a href="#cb51-125" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_sf</span>() <span class="sc">+</span></span>
<span id="cb51-126"><a href="#cb51-126" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(totora) <span class="sc">+</span></span>
<span id="cb51-127"><a href="#cb51-127" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_sf</span>() <span class="sc">+</span></span>
<span id="cb51-128"><a href="#cb51-128" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(pojo) <span class="sc">+</span></span>
<span id="cb51-129"><a href="#cb51-129" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_sf</span>()</span>
<span id="cb51-130"><a href="#cb51-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-131"><a href="#cb51-131" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine all municipalities into a single sf object</span></span>
<span id="cb51-132"><a href="#cb51-132" aria-hidden="true" tabindex="-1"></a>all_municipalities <span class="ot">&lt;-</span> <span class="fu">rbind</span>(Pasorapa, Aiquile, totora, pojo)</span>
<span id="cb51-133"><a href="#cb51-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-134"><a href="#cb51-134" aria-hidden="true" tabindex="-1"></a><span class="co"># Minimap with labels</span></span>
<span id="cb51-135"><a href="#cb51-135" aria-hidden="true" tabindex="-1"></a>minimap <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb51-136"><a href="#cb51-136" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb51-137"><a href="#cb51-137" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb51-138"><a href="#cb51-138" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_text</span>(<span class="st">"NAME_3"</span>, <span class="at">size =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb51-139"><a href="#cb51-139" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">25</span>, <span class="dv">50</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span></span>
<span id="cb51-140"><a href="#cb51-140" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb51-141"><a href="#cb51-141" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb51-142"><a href="#cb51-142" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb51-143"><a href="#cb51-143" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb51-144"><a href="#cb51-144" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb51-145"><a href="#cb51-145" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-146"><a href="#cb51-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-147"><a href="#cb51-147" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine all maps</span></span>
<span id="cb51-148"><a href="#cb51-148" aria-hidden="true" tabindex="-1"></a>final_map <span class="ot">&lt;-</span> main_map <span class="sc">+</span> minimap</span>
<span id="cb51-149"><a href="#cb51-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-150"><a href="#cb51-150" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the map</span></span>
<span id="cb51-151"><a href="#cb51-151" aria-hidden="true" tabindex="-1"></a>final_map</span>
<span id="cb51-152"><a href="#cb51-152" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-153"><a href="#cb51-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-154"><a href="#cb51-154" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb51-155"><a href="#cb51-155" aria-hidden="true" tabindex="-1"></a><span class="do">## Literature Review</span></span>
<span id="cb51-156"><a href="#cb51-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-157"><a href="#cb51-157" aria-hidden="true" tabindex="-1"></a><span class="co"># Table 1: Publications Analysis</span></span>
<span id="cb51-158"><a href="#cb51-158" aria-hidden="true" tabindex="-1"></a>publications <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb51-159"><a href="#cb51-159" aria-hidden="true" tabindex="-1"></a>  <span class="at">Source =</span> <span class="fu">c</span>(</span>
<span id="cb51-160"><a href="#cb51-160" aria-hidden="true" tabindex="-1"></a>    <span class="st">"[European Drought Risk Atlas](https://joint-research-centre.ec.europa.eu/jrc-news-and-updates/drought-risk-atlas-heightened-risk-threatens-environment-and-economy-2023-10-11_en)"</span>,</span>
<span id="cb51-161"><a href="#cb51-161" aria-hidden="true" tabindex="-1"></a>    <span class="st">"[Arabian Journal of Geosciences](https://link.springer.com/article/10.1007/s12517-012-0707-2)"</span>,</span>
<span id="cb51-162"><a href="#cb51-162" aria-hidden="true" tabindex="-1"></a>    <span class="st">"[MDPI](https://www.mdpi.com/2073-445X/12/6/1184)"</span>,</span>
<span id="cb51-163"><a href="#cb51-163" aria-hidden="true" tabindex="-1"></a>    <span class="st">"[Drought Risk Atlas](https://www.drought.gov/data-maps-tools/drought-risk-atlas)"</span>,</span>
<span id="cb51-164"><a href="#cb51-164" aria-hidden="true" tabindex="-1"></a>    <span class="st">"[MDPI](https://www.mdpi.com/2073-4441/12/7/1862)"</span></span>
<span id="cb51-165"><a href="#cb51-165" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb51-166"><a href="#cb51-166" aria-hidden="true" tabindex="-1"></a>  <span class="at">Description =</span> <span class="fu">c</span>(</span>
<span id="cb51-167"><a href="#cb51-167" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Comprehensive assessment and mapping of drought risks and impacts in the EU for 1.5, 2, and 3 degrees of global warming."</span>,</span>
<span id="cb51-168"><a href="#cb51-168" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Study on 'Drought risk assessment using remote sensing and GIS techniques'."</span>,</span>
<span id="cb51-169"><a href="#cb51-169" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Agricultural Drought Risk Assessment model considering exposure, hazard, vulnerability, and mitigation capacity."</span>,</span>
<span id="cb51-170"><a href="#cb51-170" aria-hidden="true" tabindex="-1"></a>    <span class="st">"The Drought Risk Atlas provides historical drought data until 2017 for US weather stations with 40+ years of records, enabling users to explore various drought indices, stats, thresholds, and comparisons."</span>,</span>
<span id="cb51-171"><a href="#cb51-171" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Drought Risk Analysis, Forecasting and Assessment under Climate Change."</span></span>
<span id="cb51-172"><a href="#cb51-172" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-173"><a href="#cb51-173" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-174"><a href="#cb51-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-175"><a href="#cb51-175" aria-hidden="true" tabindex="-1"></a><span class="co"># Table 2: Drought Risk Variables and Data Availability</span></span>
<span id="cb51-176"><a href="#cb51-176" aria-hidden="true" tabindex="-1"></a>variables_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb51-177"><a href="#cb51-177" aria-hidden="true" tabindex="-1"></a>  <span class="at">Variable =</span> <span class="fu">c</span>(<span class="st">"minimum temperature"</span>, <span class="st">"maximum temperature"</span>, <span class="st">"precipitation"</span>, <span class="st">"solar radiation"</span>, <span class="st">"wind speed"</span>),</span>
<span id="cb51-178"><a href="#cb51-178" aria-hidden="true" tabindex="-1"></a>  <span class="at">Value_Type =</span> <span class="fu">c</span>(<span class="st">"(°C)"</span>, <span class="st">"(°C)"</span>, <span class="st">"(mm)"</span>, <span class="st">"(kJ m-2 day-1)"</span>, <span class="st">"(m s-1)"</span>),</span>
<span id="cb51-179"><a href="#cb51-179" aria-hidden="true" tabindex="-1"></a>  <span class="at">Source =</span> <span class="fu">c</span>(<span class="st">"WorldClim"</span>, <span class="st">"WorldClim"</span>, <span class="st">"WorldClim"</span>, <span class="st">"WorldClim"</span>, <span class="st">"WorldClim"</span>),</span>
<span id="cb51-180"><a href="#cb51-180" aria-hidden="true" tabindex="-1"></a>  <span class="at">Status =</span> <span class="fu">c</span>(<span class="st">"Used"</span>, <span class="st">"Used"</span>, <span class="st">"Used"</span>, <span class="st">"Not Used"</span>, <span class="st">"Not Used"</span>)</span>
<span id="cb51-181"><a href="#cb51-181" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-182"><a href="#cb51-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-183"><a href="#cb51-183" aria-hidden="true" tabindex="-1"></a><span class="co"># Displaying the data frames</span></span>
<span id="cb51-184"><a href="#cb51-184" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Publications Analysis:"</span>)</span>
<span id="cb51-185"><a href="#cb51-185" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(publications)</span>
<span id="cb51-186"><a href="#cb51-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-187"><a href="#cb51-187" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Drought Risk Variables and Data Availability:"</span>)</span>
<span id="cb51-188"><a href="#cb51-188" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(variables_data)</span>
<span id="cb51-189"><a href="#cb51-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-190"><a href="#cb51-190" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-191"><a href="#cb51-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-192"><a href="#cb51-192" aria-hidden="true" tabindex="-1"></a>\newpage</span>
<span id="cb51-193"><a href="#cb51-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-194"><a href="#cb51-194" aria-hidden="true" tabindex="-1"></a><span class="fu">## Methodology of the Case Study</span></span>
<span id="cb51-195"><a href="#cb51-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-196"><a href="#cb51-196" aria-hidden="true" tabindex="-1"></a>This Multicriteria Analysis employs numerous Raster and Vector Layers, integrating weighted factors. The entire project is conducted within the R-Studio Environment. Key packages utilized in achieving the final results are listed here <span class="co">[</span><span class="ot">R-Studio Libraries</span><span class="co">](#sec-sec-libraries)</span>, delivering essential functions for the conducted calculations.</span>
<span id="cb51-197"><a href="#cb51-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-198"><a href="#cb51-198" aria-hidden="true" tabindex="-1"></a>@tbl-data-Pasorapa-drought shows the data used in order to conduct the multicriteria analysis on the four municipalities in the Cono Sur Region in Cochabamba, Bolivia.</span>
<span id="cb51-199"><a href="#cb51-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-200"><a href="#cb51-200" aria-hidden="true" tabindex="-1"></a>@tbl-data-weights-def-drought presents the classification and evaluation of various criteria for drought exposure, illustrating the factors influencing each classification. This table outlines the criteria and their corresponding classifications as follows.</span>
<span id="cb51-201"><a href="#cb51-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-202"><a href="#cb51-202" aria-hidden="true" tabindex="-1"></a>The subsequent sections present the reclassified data for four municipalities in the state of Cochabamba. These sections detail the process of cleaning and further processing the raw data, with relevant code snippets linked to the <span class="co">[</span><span class="ot">Appendix</span><span class="co">](#sec-appendix)</span> for reference.</span>
<span id="cb51-203"><a href="#cb51-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-204"><a href="#cb51-204" aria-hidden="true" tabindex="-1"></a><span class="in">```{r table_shapes}</span></span>
<span id="cb51-205"><a href="#cb51-205" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-data-Pasorapa-drought</span></span>
<span id="cb51-206"><a href="#cb51-206" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Used Data in the Analysis"</span></span>
<span id="cb51-207"><a href="#cb51-207" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-colwidths: [20, 20, 30, 20]</span></span>
<span id="cb51-208"><a href="#cb51-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-209"><a href="#cb51-209" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a table</span></span>
<span id="cb51-210"><a href="#cb51-210" aria-hidden="true" tabindex="-1"></a>shapes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Riverdata"</span>, <span class="st">"Political Map"</span>, <span class="st">"Precipitation"</span>, <span class="st">"Temperature"</span>, <span class="st">"DEM"</span>)</span>
<span id="cb51-211"><a href="#cb51-211" aria-hidden="true" tabindex="-1"></a>data_type <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Vector"</span>, <span class="st">"Vector"</span>, <span class="st">"Raster (30 s)"</span>, <span class="st">"Raster (30 s)"</span>, <span class="st">"Raster (15 s)"</span>)</span>
<span id="cb51-212"><a href="#cb51-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-213"><a href="#cb51-213" aria-hidden="true" tabindex="-1"></a>sources <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb51-214"><a href="#cb51-214" aria-hidden="true" tabindex="-1"></a>  <span class="st">"@linke2019global"</span>, </span>
<span id="cb51-215"><a href="#cb51-215" aria-hidden="true" tabindex="-1"></a>  <span class="st">"[gadm.org](https://gadm.org/download_country.html)"</span>,</span>
<span id="cb51-216"><a href="#cb51-216" aria-hidden="true" tabindex="-1"></a>  <span class="st">"@fick2017worldclim"</span>, </span>
<span id="cb51-217"><a href="#cb51-217" aria-hidden="true" tabindex="-1"></a>  <span class="st">"@fick2017worldclim"</span>, </span>
<span id="cb51-218"><a href="#cb51-218" aria-hidden="true" tabindex="-1"></a>  <span class="st">"[Hydrosheds.org](https://www.hydrosheds.org/hydrosheds-core-downloads)"</span>)</span>
<span id="cb51-219"><a href="#cb51-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-220"><a href="#cb51-220" aria-hidden="true" tabindex="-1"></a>period <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"2013"</span>, <span class="st">"2024"</span>, <span class="st">"1970-2000"</span>, <span class="st">"1970-2000"</span>, <span class="st">"2013"</span>)</span>
<span id="cb51-221"><a href="#cb51-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-222"><a href="#cb51-222" aria-hidden="true" tabindex="-1"></a><span class="co"># Repeat the sources based on the number of shapes</span></span>
<span id="cb51-223"><a href="#cb51-223" aria-hidden="true" tabindex="-1"></a>repeated_sources <span class="ot">&lt;-</span> <span class="fu">rep</span>(sources, <span class="at">length.out =</span> <span class="fu">length</span>(shapes))</span>
<span id="cb51-224"><a href="#cb51-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-225"><a href="#cb51-225" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the data frame</span></span>
<span id="cb51-226"><a href="#cb51-226" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Data =</span> shapes, <span class="at">Types =</span> data_type, <span class="at">Source =</span> repeated_sources, <span class="at">Period_Year =</span> period)</span>
<span id="cb51-227"><a href="#cb51-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-228"><a href="#cb51-228" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Data"</span>, <span class="st">"Types"</span>, <span class="st">"Source"</span>, <span class="st">"Period/Year"</span>)</span>
<span id="cb51-229"><a href="#cb51-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-230"><a href="#cb51-230" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(data)</span>
<span id="cb51-231"><a href="#cb51-231" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-232"><a href="#cb51-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-235"><a href="#cb51-235" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-236"><a href="#cb51-236" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-data-weights-def-drought</span></span>
<span id="cb51-237"><a href="#cb51-237" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Classiﬁcation and evaluation of drought exposure according to factors"</span></span>
<span id="cb51-238"><a href="#cb51-238" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-colwidths: [20, 10, 15, 15, 15, 10, 15]</span></span>
<span id="cb51-239"><a href="#cb51-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-240"><a href="#cb51-240" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a sample data frame</span></span>
<span id="cb51-241"><a href="#cb51-241" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb51-242"><a href="#cb51-242" aria-hidden="true" tabindex="-1"></a>  <span class="at">Criteria =</span> <span class="fu">c</span>(<span class="st">"River Data"</span>, <span class="st">"Maximum Temperature"</span>, <span class="st">"DEM (Inclination)"</span>, <span class="st">"DEM (Perspective)"</span>, <span class="st">"Precipitation"</span>),</span>
<span id="cb51-243"><a href="#cb51-243" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Very High</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"&lt;200"</span>, <span class="st">"&gt;30"</span>, <span class="st">"&gt;45"</span>, <span class="st">"&lt;45°"</span>, <span class="st">"&lt;513.8"</span>),</span>
<span id="cb51-244"><a href="#cb51-244" aria-hidden="true" tabindex="-1"></a>  <span class="at">High        =</span> <span class="fu">c</span>(<span class="st">"200-700"</span>, <span class="st">"27-30"</span>, <span class="st">"20-30"</span>, <span class="st">"45-135°"</span>, <span class="st">"514-571"</span>),</span>
<span id="cb51-245"><a href="#cb51-245" aria-hidden="true" tabindex="-1"></a>  <span class="at">Moderate    =</span> <span class="fu">c</span>(<span class="st">"700-2000"</span>, <span class="st">"25-27"</span>, <span class="st">"20-30"</span>, <span class="st">"135-225°"</span>, <span class="st">"571-640"</span>),</span>
<span id="cb51-246"><a href="#cb51-246" aria-hidden="true" tabindex="-1"></a>  <span class="at">Low         =</span> <span class="fu">c</span>(<span class="st">"2000-5000"</span>, <span class="st">""</span>, <span class="st">"10-20"</span>, <span class="st">"225-315°"</span>, <span class="st">"640-1058"</span>),</span>
<span id="cb51-247"><a href="#cb51-247" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Very Low</span><span class="st">`</span>  <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"&gt;5000"</span>, <span class="st">"&lt;25"</span>, <span class="st">"&lt;10"</span>, <span class="st">"&gt;315°"</span>, <span class="st">"&gt;1058"</span>),</span>
<span id="cb51-248"><a href="#cb51-248" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Weights</span><span class="st">`</span>   <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="fl">1.5</span>, <span class="fl">1.5</span>, <span class="dv">3</span>)</span>
<span id="cb51-249"><a href="#cb51-249" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-250"><a href="#cb51-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-251"><a href="#cb51-251" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizing the table with kable</span></span>
<span id="cb51-252"><a href="#cb51-252" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(data, <span class="at">align =</span> <span class="st">"c"</span>)</span>
<span id="cb51-253"><a href="#cb51-253" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-254"><a href="#cb51-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-255"><a href="#cb51-255" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb51-256"><a href="#cb51-256" aria-hidden="true" tabindex="-1"></a><span class="co"># Land Use</span></span>
<span id="cb51-257"><a href="#cb51-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-258"><a href="#cb51-258" aria-hidden="true" tabindex="-1"></a>plotly <span class="ot">&lt;-</span> land <span class="sc">%&gt;%</span> </span>
<span id="cb51-259"><a href="#cb51-259" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> USO)) <span class="sc">+</span></span>
<span id="cb51-260"><a href="#cb51-260" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb51-261"><a href="#cb51-261" aria-hidden="true" tabindex="-1"></a> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb51-262"><a href="#cb51-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-263"><a href="#cb51-263" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(plotly)</span>
<span id="cb51-264"><a href="#cb51-264" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-265"><a href="#cb51-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-266"><a href="#cb51-266" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb51-267"><a href="#cb51-267" aria-hidden="true" tabindex="-1"></a>land_new <span class="sc">%&gt;%</span> <span class="fu">plot</span>()</span>
<span id="cb51-268"><a href="#cb51-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-269"><a href="#cb51-269" aria-hidden="true" tabindex="-1"></a><span class="co"># reclass</span></span>
<span id="cb51-270"><a href="#cb51-270" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a tibble with the reclassification table</span></span>
<span id="cb51-271"><a href="#cb51-271" aria-hidden="true" tabindex="-1"></a>reclass_land_use <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb51-272"><a href="#cb51-272" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>from, <span class="sc">~</span>to, <span class="sc">~</span>becomes,</span>
<span id="cb51-273"><a href="#cb51-273" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>,    <span class="dv">2</span>,  <span class="dv">1</span>,     <span class="co"># Productivo: Alimenticios de consumo, subsistencia y mercado local.</span></span>
<span id="cb51-274"><a href="#cb51-274" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>,    <span class="dv">3</span>,  <span class="fl">0.75</span>,  <span class="co"># Extractivo Forestal: Pastoreo, Ramoneo, Cultivos alimenticios en algunos sectores, Extracción de Leña en parte</span></span>
<span id="cb51-275"><a href="#cb51-275" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>,    <span class="dv">4</span>,  <span class="fl">0.5</span>,   <span class="co"># Productivo Agropecuario, Extractivo Forestal y Petrolero</span></span>
<span id="cb51-276"><a href="#cb51-276" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span>,    <span class="dv">5</span>,  <span class="fl">0.25</span>,  <span class="co"># nada</span></span>
<span id="cb51-277"><a href="#cb51-277" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-278"><a href="#cb51-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-279"><a href="#cb51-279" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb51-280"><a href="#cb51-280" aria-hidden="true" tabindex="-1"></a>river_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(land_new, reclass_table_river,</span>
<span id="cb51-281"><a href="#cb51-281" aria-hidden="true" tabindex="-1"></a>                      <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-282"><a href="#cb51-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-283"><a href="#cb51-283" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(reclass_table_river)</span>
<span id="cb51-284"><a href="#cb51-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-285"><a href="#cb51-285" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(river_reclassified)</span>
<span id="cb51-286"><a href="#cb51-286" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-287"><a href="#cb51-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-288"><a href="#cb51-288" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE, other_data}</span></span>
<span id="cb51-289"><a href="#cb51-289" aria-hidden="true" tabindex="-1"></a><span class="co"># Read data and crop to Pasorapa</span></span>
<span id="cb51-290"><a href="#cb51-290" aria-hidden="true" tabindex="-1"></a><span class="co"># read data </span></span>
<span id="cb51-291"><a href="#cb51-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-292"><a href="#cb51-292" aria-hidden="true" tabindex="-1"></a><span class="do">## shapes</span></span>
<span id="cb51-293"><a href="#cb51-293" aria-hidden="true" tabindex="-1"></a><span class="co"># veg   &lt;- read_sf("veg_nv_bol_geo.shp") # Vegetation</span></span>
<span id="cb51-294"><a href="#cb51-294" aria-hidden="true" tabindex="-1"></a><span class="co"># geo   &lt;- read_sf("Geologia.shp") # Geografia</span></span>
<span id="cb51-295"><a href="#cb51-295" aria-hidden="true" tabindex="-1"></a><span class="co"># geo   &lt;- read_sf("geologia.shp", crs = 4326)   # Geografia</span></span>
<span id="cb51-296"><a href="#cb51-296" aria-hidden="true" tabindex="-1"></a><span class="co"># dsmw  &lt;- read_sf("DSMW.shp", crs = 4326)</span></span>
<span id="cb51-297"><a href="#cb51-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-298"><a href="#cb51-298" aria-hidden="true" tabindex="-1"></a><span class="co"># other kind of vegetation</span></span>
<span id="cb51-299"><a href="#cb51-299" aria-hidden="true" tabindex="-1"></a><span class="co"># se_bo_geo &lt;- read_sf("se_bo_geo.shp")</span></span>
<span id="cb51-300"><a href="#cb51-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-301"><a href="#cb51-301" aria-hidden="true" tabindex="-1"></a><span class="co"># temperatur min</span></span>
<span id="cb51-302"><a href="#cb51-302" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin01 &lt;- rast("wc2.1_30s_tmin_01.tif")</span></span>
<span id="cb51-303"><a href="#cb51-303" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin02 &lt;- rast("wc2.1_30s_tmin_02.tif")</span></span>
<span id="cb51-304"><a href="#cb51-304" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin03 &lt;- rast("wc2.1_30s_tmin_03.tif")</span></span>
<span id="cb51-305"><a href="#cb51-305" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin04 &lt;- rast("wc2.1_30s_tmin_04.tif")</span></span>
<span id="cb51-306"><a href="#cb51-306" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin05 &lt;- rast("wc2.1_30s_tmin_05.tif")</span></span>
<span id="cb51-307"><a href="#cb51-307" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin06 &lt;- rast("wc2.1_30s_tmin_06.tif")</span></span>
<span id="cb51-308"><a href="#cb51-308" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin07 &lt;- rast("wc2.1_30s_tmin_07.tif")</span></span>
<span id="cb51-309"><a href="#cb51-309" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin08 &lt;- rast("wc2.1_30s_tmin_08.tif")</span></span>
<span id="cb51-310"><a href="#cb51-310" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin09 &lt;- rast("wc2.1_30s_tmin_09.tif")</span></span>
<span id="cb51-311"><a href="#cb51-311" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin10 &lt;- rast("wc2.1_30s_tmin_10.tif")</span></span>
<span id="cb51-312"><a href="#cb51-312" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin11 &lt;- rast("wc2.1_30s_tmin_11.tif")</span></span>
<span id="cb51-313"><a href="#cb51-313" aria-hidden="true" tabindex="-1"></a><span class="co"># tmin12 &lt;- rast("wc2.1_30s_tmin_12.tif")</span></span>
<span id="cb51-314"><a href="#cb51-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-315"><a href="#cb51-315" aria-hidden="true" tabindex="-1"></a><span class="co"># temperatur max</span></span>
<span id="cb51-316"><a href="#cb51-316" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax01 &lt;- rast("wc2.1_30s_tmax_01.tif")</span></span>
<span id="cb51-317"><a href="#cb51-317" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax02 &lt;- rast("wc2.1_30s_tmax_02.tif")</span></span>
<span id="cb51-318"><a href="#cb51-318" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax03 &lt;- rast("wc2.1_30s_tmax_03.tif")</span></span>
<span id="cb51-319"><a href="#cb51-319" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax04 &lt;- rast("wc2.1_30s_tmax_04.tif")</span></span>
<span id="cb51-320"><a href="#cb51-320" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax05 &lt;- rast("wc2.1_30s_tmax_05.tif")</span></span>
<span id="cb51-321"><a href="#cb51-321" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax06 &lt;- rast("wc2.1_30s_tmax_06.tif")</span></span>
<span id="cb51-322"><a href="#cb51-322" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax07 &lt;- rast("wc2.1_30s_tmax_07.tif")</span></span>
<span id="cb51-323"><a href="#cb51-323" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax08 &lt;- rast("wc2.1_30s_tmax_08.tif")</span></span>
<span id="cb51-324"><a href="#cb51-324" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax09 &lt;- rast("wc2.1_30s_tmax_09.tif")</span></span>
<span id="cb51-325"><a href="#cb51-325" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax10 &lt;- rast("wc2.1_30s_tmax_10.tif")</span></span>
<span id="cb51-326"><a href="#cb51-326" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax11 &lt;- rast("wc2.1_30s_tmax_11.tif")</span></span>
<span id="cb51-327"><a href="#cb51-327" aria-hidden="true" tabindex="-1"></a><span class="co"># tmax12 &lt;- rast("wc2.1_30s_tmax_12.tif")</span></span>
<span id="cb51-328"><a href="#cb51-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-329"><a href="#cb51-329" aria-hidden="true" tabindex="-1"></a><span class="co"># precipitacion</span></span>
<span id="cb51-330"><a href="#cb51-330" aria-hidden="true" tabindex="-1"></a><span class="co"># precip01 &lt;- rast("wc2.1_30s_prec_01.tif")</span></span>
<span id="cb51-331"><a href="#cb51-331" aria-hidden="true" tabindex="-1"></a><span class="co"># precip02 &lt;- rast("wc2.1_30s_prec_02.tif")</span></span>
<span id="cb51-332"><a href="#cb51-332" aria-hidden="true" tabindex="-1"></a><span class="co"># precip03 &lt;- rast("wc2.1_30s_prec_03.tif")</span></span>
<span id="cb51-333"><a href="#cb51-333" aria-hidden="true" tabindex="-1"></a><span class="co"># precip04 &lt;- rast("wc2.1_30s_prec_04.tif")</span></span>
<span id="cb51-334"><a href="#cb51-334" aria-hidden="true" tabindex="-1"></a><span class="co"># precip05 &lt;- rast("wc2.1_30s_prec_05.tif")</span></span>
<span id="cb51-335"><a href="#cb51-335" aria-hidden="true" tabindex="-1"></a><span class="co"># precip06 &lt;- rast("wc2.1_30s_prec_06.tif")</span></span>
<span id="cb51-336"><a href="#cb51-336" aria-hidden="true" tabindex="-1"></a><span class="co"># precip07 &lt;- rast("wc2.1_30s_prec_07.tif")</span></span>
<span id="cb51-337"><a href="#cb51-337" aria-hidden="true" tabindex="-1"></a><span class="co"># precip08 &lt;- rast("wc2.1_30s_prec_08.tif")</span></span>
<span id="cb51-338"><a href="#cb51-338" aria-hidden="true" tabindex="-1"></a><span class="co"># precip09 &lt;- rast("wc2.1_30s_prec_09.tif")</span></span>
<span id="cb51-339"><a href="#cb51-339" aria-hidden="true" tabindex="-1"></a><span class="co"># precip10 &lt;- rast("wc2.1_30s_prec_10.tif")</span></span>
<span id="cb51-340"><a href="#cb51-340" aria-hidden="true" tabindex="-1"></a><span class="co"># precip11 &lt;- rast("wc2.1_30s_prec_11.tif")</span></span>
<span id="cb51-341"><a href="#cb51-341" aria-hidden="true" tabindex="-1"></a><span class="co"># precip12 &lt;- rast("wc2.1_30s_prec_12.tif")</span></span>
<span id="cb51-342"><a href="#cb51-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-343"><a href="#cb51-343" aria-hidden="true" tabindex="-1"></a><span class="do">## Satellite Data</span></span>
<span id="cb51-344"><a href="#cb51-344" aria-hidden="true" tabindex="-1"></a><span class="co"># sat_full &lt;- rast("sat_full.tiff")</span></span>
<span id="cb51-345"><a href="#cb51-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-346"><a href="#cb51-346" aria-hidden="true" tabindex="-1"></a><span class="co"># Land Use</span></span>
<span id="cb51-347"><a href="#cb51-347" aria-hidden="true" tabindex="-1"></a><span class="co"># land &lt;- rast("Change_10S_070W.tif")</span></span>
<span id="cb51-348"><a href="#cb51-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-349"><a href="#cb51-349" aria-hidden="true" tabindex="-1"></a><span class="co"># print(land, vp = grid::viewport(0.8, 0.185, width = 0.2, height = 0.45))</span></span>
<span id="cb51-350"><a href="#cb51-350" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-351"><a href="#cb51-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-352"><a href="#cb51-352" aria-hidden="true" tabindex="-1"></a><span class="in">```{r Processing Pasorapa}</span></span>
<span id="cb51-353"><a href="#cb51-353" aria-hidden="true" tabindex="-1"></a><span class="co"># River Data</span></span>
<span id="cb51-354"><a href="#cb51-354" aria-hidden="true" tabindex="-1"></a><span class="do">##  200 meters Buffer River data</span></span>
<span id="cb51-355"><a href="#cb51-355" aria-hidden="true" tabindex="-1"></a>buffer_river <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_buffer</span>(Pasorapa, <span class="dv">200</span>)</span>
<span id="cb51-356"><a href="#cb51-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-357"><a href="#cb51-357" aria-hidden="true" tabindex="-1"></a><span class="co"># river_crop &lt;- st_intersection(river, buffer_river)</span></span>
<span id="cb51-358"><a href="#cb51-358" aria-hidden="true" tabindex="-1"></a><span class="co"># write_sf(river_crop, "river_crop.shp", overwrite = TRUE)</span></span>
<span id="cb51-359"><a href="#cb51-359" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-360"><a href="#cb51-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-361"><a href="#cb51-361" aria-hidden="true" tabindex="-1"></a><span class="in">```{r Processing Aiquile}</span></span>
<span id="cb51-362"><a href="#cb51-362" aria-hidden="true" tabindex="-1"></a><span class="co"># Pop</span></span>
<span id="cb51-363"><a href="#cb51-363" aria-hidden="true" tabindex="-1"></a><span class="do">##  crop and mask dem</span></span>
<span id="cb51-364"><a href="#cb51-364" aria-hidden="true" tabindex="-1"></a><span class="co"># pop_crop &lt;- terra::crop(pop, Aiquile)</span></span>
<span id="cb51-365"><a href="#cb51-365" aria-hidden="true" tabindex="-1"></a><span class="co"># pop_mask &lt;- mask(pop_crop, Aiquile)</span></span>
<span id="cb51-366"><a href="#cb51-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-367"><a href="#cb51-367" aria-hidden="true" tabindex="-1"></a><span class="co"># writeRaster(dem_mask, "dem_mask_pasorapa.tif")</span></span>
<span id="cb51-368"><a href="#cb51-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-369"><a href="#cb51-369" aria-hidden="true" tabindex="-1"></a><span class="co"># River Data</span></span>
<span id="cb51-370"><a href="#cb51-370" aria-hidden="true" tabindex="-1"></a><span class="do">##  200 meters Buffer River data</span></span>
<span id="cb51-371"><a href="#cb51-371" aria-hidden="true" tabindex="-1"></a>buffer_river <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_buffer</span>(Aiquile, <span class="dv">200</span>)</span>
<span id="cb51-372"><a href="#cb51-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-373"><a href="#cb51-373" aria-hidden="true" tabindex="-1"></a><span class="co"># river_crop &lt;- st_intersection(river, buffer_river)</span></span>
<span id="cb51-374"><a href="#cb51-374" aria-hidden="true" tabindex="-1"></a><span class="co"># write_sf(river_crop, "river_crop.shp", overwrite = TRUE)</span></span>
<span id="cb51-375"><a href="#cb51-375" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-376"><a href="#cb51-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-377"><a href="#cb51-377" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb51-378"><a href="#cb51-378" aria-hidden="true" tabindex="-1"></a><span class="co"># st_write(nc, paste0(tempdir(), "/", "nc.shp"))</span></span>
<span id="cb51-379"><a href="#cb51-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-380"><a href="#cb51-380" aria-hidden="true" tabindex="-1"></a><span class="do">## terrain</span></span>
<span id="cb51-381"><a href="#cb51-381" aria-hidden="true" tabindex="-1"></a>terrain  <span class="ot">&lt;-</span> <span class="fu">terrain</span>(dem_mask)</span>
<span id="cb51-382"><a href="#cb51-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-383"><a href="#cb51-383" aria-hidden="true" tabindex="-1"></a><span class="co"># land</span></span>
<span id="cb51-384"><a href="#cb51-384" aria-hidden="true" tabindex="-1"></a><span class="do">##  crop and mask dem</span></span>
<span id="cb51-385"><a href="#cb51-385" aria-hidden="true" tabindex="-1"></a>land_crop          <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">crop</span>(land, Pasorapa)</span>
<span id="cb51-386"><a href="#cb51-386" aria-hidden="true" tabindex="-1"></a>land_mask_pasorapa <span class="ot">&lt;-</span> <span class="fu">mask</span>(land_crop, Pasorapa)</span>
<span id="cb51-387"><a href="#cb51-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-388"><a href="#cb51-388" aria-hidden="true" tabindex="-1"></a><span class="co"># sf_use_s2(FALSE) # quick fix</span></span>
<span id="cb51-389"><a href="#cb51-389" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-390"><a href="#cb51-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-391"><a href="#cb51-391" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE, processing_other}</span></span>
<span id="cb51-392"><a href="#cb51-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-393"><a href="#cb51-393" aria-hidden="true" tabindex="-1"></a><span class="do">## terrain</span></span>
<span id="cb51-394"><a href="#cb51-394" aria-hidden="true" tabindex="-1"></a>terrain_aiquile   <span class="ot">&lt;-</span> <span class="fu">terrain</span>(dem_mask_aiquile)</span>
<span id="cb51-395"><a href="#cb51-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-396"><a href="#cb51-396" aria-hidden="true" tabindex="-1"></a>terrain_pasorapa  <span class="ot">&lt;-</span> <span class="fu">terrain</span>(dem_mask_pasorapa)</span>
<span id="cb51-397"><a href="#cb51-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-398"><a href="#cb51-398" aria-hidden="true" tabindex="-1"></a><span class="co"># land</span></span>
<span id="cb51-399"><a href="#cb51-399" aria-hidden="true" tabindex="-1"></a><span class="do">##  crop and mask dem</span></span>
<span id="cb51-400"><a href="#cb51-400" aria-hidden="true" tabindex="-1"></a>land_crop <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">crop</span>(land, Aiquile)</span>
<span id="cb51-401"><a href="#cb51-401" aria-hidden="true" tabindex="-1"></a>land_mask_aiquile <span class="ot">&lt;-</span> <span class="fu">mask</span>(land_crop, Aiquile)</span>
<span id="cb51-402"><a href="#cb51-402" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-403"><a href="#cb51-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-404"><a href="#cb51-404" aria-hidden="true" tabindex="-1"></a>\newpage</span>
<span id="cb51-405"><a href="#cb51-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-406"><a href="#cb51-406" aria-hidden="true" tabindex="-1"></a><span class="fu">### River Data</span></span>
<span id="cb51-407"><a href="#cb51-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-408"><a href="#cb51-408" aria-hidden="true" tabindex="-1"></a>The data utilized aimed to estimate the distance to rivers, serving as a proxy for assessing the likelihood of drought occurrences. The underlying assumption was that greater distances from rivers correspond to increased drought probabilities. To calculate distances, the **`terra::distance`** function was employed on the river shapefiles associated with various municipalities. Detailed processing steps are outlined in the subsequent chapter of the <span class="co">[</span><span class="ot">Appendix</span><span class="co">](#sec-sec-river)</span>.</span>
<span id="cb51-409"><a href="#cb51-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-410"><a href="#cb51-410" aria-hidden="true" tabindex="-1"></a>The reclassification has been calculated according to @tbl-data-weights-def-drought. Defining the classification values @Gao2023 has been using different values in order to classify and evaluate drought exposure, hazard factors, vulnerability, and mitigation capacity.</span>
<span id="cb51-411"><a href="#cb51-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-412"><a href="#cb51-412" aria-hidden="true" tabindex="-1"></a><span class="in">```{r plot river_geometry}</span></span>
<span id="cb51-413"><a href="#cb51-413" aria-hidden="true" tabindex="-1"></a>river_crop <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">"river_crop.shp"</span>)</span>
<span id="cb51-414"><a href="#cb51-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-415"><a href="#cb51-415" aria-hidden="true" tabindex="-1"></a>buffer_river <span class="ot">&lt;-</span> <span class="fu">st_buffer</span>(river_crop, <span class="dv">100</span>)</span>
<span id="cb51-416"><a href="#cb51-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-417"><a href="#cb51-417" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an empty raster to rasterize into</span></span>
<span id="cb51-418"><a href="#cb51-418" aria-hidden="true" tabindex="-1"></a>empty_raster <span class="ot">&lt;-</span> <span class="fu">raster</span>(<span class="fu">extent</span>(buffer_river), <span class="at">resolution =</span> <span class="fu">c</span>(<span class="fl">0.0008333333</span>, <span class="fl">0.0008333333</span>))</span>
<span id="cb51-419"><a href="#cb51-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-420"><a href="#cb51-420" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Rasterize</span></span>
<span id="cb51-421"><a href="#cb51-421" aria-hidden="true" tabindex="-1"></a>river_raster <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">rasterize</span>(buffer_river, empty_raster, <span class="at">field =</span> <span class="st">"CATCH_SKM"</span>)</span>
<span id="cb51-422"><a href="#cb51-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-423"><a href="#cb51-423" aria-hidden="true" tabindex="-1"></a><span class="co"># , background = 0</span></span>
<span id="cb51-424"><a href="#cb51-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-425"><a href="#cb51-425" aria-hidden="true" tabindex="-1"></a>  <span class="co"># calc into %</span></span>
<span id="cb51-426"><a href="#cb51-426" aria-hidden="true" tabindex="-1"></a>river_raster <span class="ot">&lt;-</span> (river_raster <span class="sc">/</span> <span class="dv">100</span>)</span>
<span id="cb51-427"><a href="#cb51-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-428"><a href="#cb51-428" aria-hidden="true" tabindex="-1"></a><span class="co"># River</span></span>
<span id="cb51-429"><a href="#cb51-429" aria-hidden="true" tabindex="-1"></a><span class="do">##  crop and mask dem</span></span>
<span id="cb51-430"><a href="#cb51-430" aria-hidden="true" tabindex="-1"></a>river_crop <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">crop</span>(river_raster, Pasorapa)</span>
<span id="cb51-431"><a href="#cb51-431" aria-hidden="true" tabindex="-1"></a>river_mask <span class="ot">&lt;-</span> <span class="fu">mask</span>(river_crop, Pasorapa)</span>
<span id="cb51-432"><a href="#cb51-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-433"><a href="#cb51-433" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(river_mask)</span></span>
<span id="cb51-434"><a href="#cb51-434" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-435"><a href="#cb51-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-436"><a href="#cb51-436" aria-hidden="true" tabindex="-1"></a><span class="in">```{r plot, eval=FALSE}</span></span>
<span id="cb51-437"><a href="#cb51-437" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Define a common CRS for all your rasters</span></span>
<span id="cb51-438"><a href="#cb51-438" aria-hidden="true" tabindex="-1"></a>common_crs <span class="ot">&lt;-</span> <span class="st">"+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"</span></span>
<span id="cb51-439"><a href="#cb51-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-440"><a href="#cb51-440" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign the CRS to each raster</span></span>
<span id="cb51-441"><a href="#cb51-441" aria-hidden="true" tabindex="-1"></a><span class="fu">crs</span>(river_raster) <span class="ot">&lt;-</span> <span class="fu">crs</span>(river_subset_sp) <span class="ot">&lt;-</span> common_crs</span>
<span id="cb51-442"><a href="#cb51-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-443"><a href="#cb51-443" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate distances on the subset</span></span>
<span id="cb51-444"><a href="#cb51-444" aria-hidden="true" tabindex="-1"></a>dist_to_river <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">distance</span>(river_mask)</span>
<span id="cb51-445"><a href="#cb51-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-446"><a href="#cb51-446" aria-hidden="true" tabindex="-1"></a><span class="co"># writeRaster(dist_to_river, "dist_to_river_pasorapa.tif")</span></span>
<span id="cb51-447"><a href="#cb51-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-448"><a href="#cb51-448" aria-hidden="true" tabindex="-1"></a>dist_to_river <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">"dist_to_river_pasorapa.tif"</span>)</span>
<span id="cb51-449"><a href="#cb51-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-450"><a href="#cb51-450" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the distances raster</span></span>
<span id="cb51-451"><a href="#cb51-451" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dist_to_river)</span>
<span id="cb51-452"><a href="#cb51-452" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-453"><a href="#cb51-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-456"><a href="#cb51-456" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-457"><a href="#cb51-457" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-river-distance-Pasorapa</span></span>
<span id="cb51-458"><a href="#cb51-458" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Reclassification table of the River-Distance Data"</span></span>
<span id="cb51-459"><a href="#cb51-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-460"><a href="#cb51-460" aria-hidden="true" tabindex="-1"></a><span class="co"># write / safe Raster</span></span>
<span id="cb51-461"><a href="#cb51-461" aria-hidden="true" tabindex="-1"></a><span class="co"># writeRaster(dist_to_river, "dist_to_river_pasorapa.tif")</span></span>
<span id="cb51-462"><a href="#cb51-462" aria-hidden="true" tabindex="-1"></a>dist_to_river <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">"dist_to_river_pasorapa.tif"</span>)</span>
<span id="cb51-463"><a href="#cb51-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-464"><a href="#cb51-464" aria-hidden="true" tabindex="-1"></a><span class="co"># River</span></span>
<span id="cb51-465"><a href="#cb51-465" aria-hidden="true" tabindex="-1"></a><span class="do">##  crop and mask dem</span></span>
<span id="cb51-466"><a href="#cb51-466" aria-hidden="true" tabindex="-1"></a>river_crop <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">crop</span>(dist_to_river, Pasorapa)</span>
<span id="cb51-467"><a href="#cb51-467" aria-hidden="true" tabindex="-1"></a>river_mask <span class="ot">&lt;-</span> <span class="fu">mask</span>(river_crop, Pasorapa)</span>
<span id="cb51-468"><a href="#cb51-468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-469"><a href="#cb51-469" aria-hidden="true" tabindex="-1"></a><span class="co"># reclass</span></span>
<span id="cb51-470"><a href="#cb51-470" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a tibble with the reclassification table</span></span>
<span id="cb51-471"><a href="#cb51-471" aria-hidden="true" tabindex="-1"></a>reclass_table_river <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb51-472"><a href="#cb51-472" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>from, <span class="sc">~</span>to, <span class="sc">~</span>becomes,</span>
<span id="cb51-473"><a href="#cb51-473" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5000</span>,    <span class="cn">Inf</span>,  <span class="dv">1</span>,     </span>
<span id="cb51-474"><a href="#cb51-474" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2000</span>,    <span class="dv">5000</span>,  <span class="fl">0.75</span>,  </span>
<span id="cb51-475"><a href="#cb51-475" aria-hidden="true" tabindex="-1"></a>  <span class="dv">700</span>,    <span class="dv">2000</span>,  <span class="fl">0.5</span>,    </span>
<span id="cb51-476"><a href="#cb51-476" aria-hidden="true" tabindex="-1"></a>  <span class="dv">200</span>,    <span class="dv">700</span>,  <span class="fl">0.25</span>,   </span>
<span id="cb51-477"><a href="#cb51-477" aria-hidden="true" tabindex="-1"></a>  <span class="sc">-</span><span class="cn">Inf</span>,   <span class="dv">200</span>,  <span class="dv">0</span>       </span>
<span id="cb51-478"><a href="#cb51-478" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-479"><a href="#cb51-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-480"><a href="#cb51-480" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb51-481"><a href="#cb51-481" aria-hidden="true" tabindex="-1"></a>river_reclassified_pasorapa <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(river_mask, reclass_table_river, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-482"><a href="#cb51-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-483"><a href="#cb51-483" aria-hidden="true" tabindex="-1"></a><span class="co"># kable(reclass_table_river)</span></span>
<span id="cb51-484"><a href="#cb51-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-485"><a href="#cb51-485" aria-hidden="true" tabindex="-1"></a><span class="co"># write/ safe Raster</span></span>
<span id="cb51-486"><a href="#cb51-486" aria-hidden="true" tabindex="-1"></a>dist_to_river <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">"dist_to_river_aiquile.tif"</span>)</span>
<span id="cb51-487"><a href="#cb51-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-488"><a href="#cb51-488" aria-hidden="true" tabindex="-1"></a>common_crs <span class="ot">&lt;-</span> <span class="st">"+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"</span></span>
<span id="cb51-489"><a href="#cb51-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-490"><a href="#cb51-490" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign the CRS to each raster</span></span>
<span id="cb51-491"><a href="#cb51-491" aria-hidden="true" tabindex="-1"></a><span class="fu">crs</span>(dist_to_river) <span class="ot">&lt;-</span> common_crs</span>
<span id="cb51-492"><a href="#cb51-492" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(Aiquile)    <span class="ot">&lt;-</span> common_crs</span>
<span id="cb51-493"><a href="#cb51-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-494"><a href="#cb51-494" aria-hidden="true" tabindex="-1"></a><span class="co"># River</span></span>
<span id="cb51-495"><a href="#cb51-495" aria-hidden="true" tabindex="-1"></a><span class="do">##  crop and mask dem</span></span>
<span id="cb51-496"><a href="#cb51-496" aria-hidden="true" tabindex="-1"></a>river_crop <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">crop</span>(dist_to_river, Aiquile)</span>
<span id="cb51-497"><a href="#cb51-497" aria-hidden="true" tabindex="-1"></a>river_mask <span class="ot">&lt;-</span> <span class="fu">mask</span>(river_crop, Aiquile)</span>
<span id="cb51-498"><a href="#cb51-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-499"><a href="#cb51-499" aria-hidden="true" tabindex="-1"></a><span class="co"># reclass</span></span>
<span id="cb51-500"><a href="#cb51-500" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a tibble with the reclassification table</span></span>
<span id="cb51-501"><a href="#cb51-501" aria-hidden="true" tabindex="-1"></a>reclass_table_river <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb51-502"><a href="#cb51-502" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>from, <span class="sc">~</span>to, <span class="sc">~</span>becomes,</span>
<span id="cb51-503"><a href="#cb51-503" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5000</span>,    <span class="cn">Inf</span>,  <span class="dv">1</span>,     </span>
<span id="cb51-504"><a href="#cb51-504" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2000</span>,    <span class="dv">5000</span>,  <span class="fl">0.75</span>,  </span>
<span id="cb51-505"><a href="#cb51-505" aria-hidden="true" tabindex="-1"></a>  <span class="dv">700</span>,    <span class="dv">2000</span>,  <span class="fl">0.5</span>,    </span>
<span id="cb51-506"><a href="#cb51-506" aria-hidden="true" tabindex="-1"></a>  <span class="dv">200</span>,    <span class="dv">700</span>,  <span class="fl">0.25</span>,   </span>
<span id="cb51-507"><a href="#cb51-507" aria-hidden="true" tabindex="-1"></a>  <span class="sc">-</span><span class="cn">Inf</span>,   <span class="dv">200</span>,  <span class="dv">0</span>       </span>
<span id="cb51-508"><a href="#cb51-508" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-509"><a href="#cb51-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-510"><a href="#cb51-510" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb51-511"><a href="#cb51-511" aria-hidden="true" tabindex="-1"></a>river_reclassified_aiquile <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(river_mask, reclass_table_river, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-512"><a href="#cb51-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-513"><a href="#cb51-513" aria-hidden="true" tabindex="-1"></a><span class="co"># read totora data</span></span>
<span id="cb51-514"><a href="#cb51-514" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-515"><a href="#cb51-515" aria-hidden="true" tabindex="-1"></a>river_totora <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"river_totora.rds"</span>)</span>
<span id="cb51-516"><a href="#cb51-516" aria-hidden="true" tabindex="-1"></a>river_pojo   <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"river_pojo.rds"</span>)</span>
<span id="cb51-517"><a href="#cb51-517" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-518"><a href="#cb51-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-521"><a href="#cb51-521" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-522"><a href="#cb51-522" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-river</span></span>
<span id="cb51-523"><a href="#cb51-523" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "River reclassification"</span></span>
<span id="cb51-524"><a href="#cb51-524" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 5</span></span>
<span id="cb51-525"><a href="#cb51-525" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 5</span></span>
<span id="cb51-526"><a href="#cb51-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-527"><a href="#cb51-527" aria-hidden="true" tabindex="-1"></a><span class="co"># Define breaks and labels for the reclassification</span></span>
<span id="cb51-528"><a href="#cb51-528" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>, <span class="dv">1</span>)</span>
<span id="cb51-529"><a href="#cb51-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-530"><a href="#cb51-530" aria-hidden="true" tabindex="-1"></a><span class="co"># change name</span></span>
<span id="cb51-531"><a href="#cb51-531" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(river_reclassified_pasorapa) <span class="ot">&lt;-</span> <span class="st">"Drought Risk"</span></span>
<span id="cb51-532"><a href="#cb51-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-533"><a href="#cb51-533" aria-hidden="true" tabindex="-1"></a><span class="co"># Color Palette in R</span></span>
<span id="cb51-534"><a href="#cb51-534" aria-hidden="true" tabindex="-1"></a>colors   <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"darkgreen"</span>,<span class="st">"lightgreen"</span>,<span class="st">"yellow"</span>, <span class="st">"orange"</span>,<span class="st">"red"</span>)</span>
<span id="cb51-535"><a href="#cb51-535" aria-hidden="true" tabindex="-1"></a>colors_1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"darkgreen"</span>,<span class="st">"lightgreen"</span>,<span class="st">"yellow"</span>, <span class="st">"orange"</span>)</span>
<span id="cb51-536"><a href="#cb51-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-537"><a href="#cb51-537" aria-hidden="true" tabindex="-1"></a><span class="co"># view</span></span>
<span id="cb51-538"><a href="#cb51-538" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb51-539"><a href="#cb51-539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-540"><a href="#cb51-540" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb51-541"><a href="#cb51-541" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb51-542"><a href="#cb51-542" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(river_reclassified_pasorapa) <span class="sc">+</span></span>
<span id="cb51-543"><a href="#cb51-543" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">palette =</span> colors) <span class="sc">+</span> </span>
<span id="cb51-544"><a href="#cb51-544" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(river_reclassified_aiquile) <span class="sc">+</span></span>
<span id="cb51-545"><a href="#cb51-545" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb51-546"><a href="#cb51-546" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(river_totora) <span class="sc">+</span></span>
<span id="cb51-547"><a href="#cb51-547" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb51-548"><a href="#cb51-548" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(river_pojo) <span class="sc">+</span></span>
<span id="cb51-549"><a href="#cb51-549" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors_1) <span class="sc">+</span>  </span>
<span id="cb51-550"><a href="#cb51-550" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb51-551"><a href="#cb51-551" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb51-552"><a href="#cb51-552" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb51-553"><a href="#cb51-553" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_text</span>(<span class="st">"NAME_3"</span>, <span class="at">size =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb51-554"><a href="#cb51-554" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span>  </span>
<span id="cb51-555"><a href="#cb51-555" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb51-556"><a href="#cb51-556" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Author: Johannes Quente"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb51-557"><a href="#cb51-557" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb51-558"><a href="#cb51-558" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb51-559"><a href="#cb51-559" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb51-560"><a href="#cb51-560" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb51-561"><a href="#cb51-561" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb51-562"><a href="#cb51-562" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-563"><a href="#cb51-563" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-564"><a href="#cb51-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-565"><a href="#cb51-565" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb51-566"><a href="#cb51-566" aria-hidden="true" tabindex="-1"></a><span class="do">## Land Use (decided to not use)</span></span>
<span id="cb51-567"><a href="#cb51-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-568"><a href="#cb51-568" aria-hidden="true" tabindex="-1"></a><span class="do">### Rasterize</span></span>
<span id="cb51-569"><a href="#cb51-569" aria-hidden="true" tabindex="-1"></a><span class="co"># land_filter_filter &lt;- land_filter %&gt;% filter(USO == "Productivo Ganadero: Pastoreo directo, forrajeo de aves.")</span></span>
<span id="cb51-570"><a href="#cb51-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-571"><a href="#cb51-571" aria-hidden="true" tabindex="-1"></a>  <span class="co"># land$USO %&gt;% unique()</span></span>
<span id="cb51-572"><a href="#cb51-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-573"><a href="#cb51-573" aria-hidden="true" tabindex="-1"></a><span class="co"># Define your extent and resolution for the raster template</span></span>
<span id="cb51-574"><a href="#cb51-574" aria-hidden="true" tabindex="-1"></a>extent_template     <span class="ot">&lt;-</span> <span class="fu">extent</span>(land)  <span class="co"># Define the extent</span></span>
<span id="cb51-575"><a href="#cb51-575" aria-hidden="true" tabindex="-1"></a>resolution_template <span class="ot">&lt;-</span> <span class="dv">100</span>  <span class="co"># Define the resolution</span></span>
<span id="cb51-576"><a href="#cb51-576" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-577"><a href="#cb51-577" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an empty raster template</span></span>
<span id="cb51-578"><a href="#cb51-578" aria-hidden="true" tabindex="-1"></a>raster_template <span class="ot">&lt;-</span> <span class="fu">raster</span>(extent_template, <span class="at">resolution =</span> resolution_template)</span>
<span id="cb51-579"><a href="#cb51-579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-580"><a href="#cb51-580" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert SIMBOLO to factor</span></span>
<span id="cb51-581"><a href="#cb51-581" aria-hidden="true" tabindex="-1"></a>land<span class="sc">$</span>USO <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(land<span class="sc">$</span>USO)</span>
<span id="cb51-582"><a href="#cb51-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-583"><a href="#cb51-583" aria-hidden="true" tabindex="-1"></a><span class="co"># Rasterize</span></span>
<span id="cb51-584"><a href="#cb51-584" aria-hidden="true" tabindex="-1"></a>land_raster <span class="ot">&lt;-</span> <span class="fu">rasterize</span>(land, raster_template, <span class="at">field =</span> <span class="st">"USO"</span>, <span class="at">backround =</span> <span class="dv">0</span>)</span>
<span id="cb51-585"><a href="#cb51-585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-586"><a href="#cb51-586" aria-hidden="true" tabindex="-1"></a><span class="co"># writeRaster(geo_raster, "geo_raster.tif", overwrite=TRUE)</span></span>
<span id="cb51-587"><a href="#cb51-587" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-588"><a href="#cb51-588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-589"><a href="#cb51-589" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb51-590"><a href="#cb51-590" aria-hidden="true" tabindex="-1"></a><span class="do">### reproject</span></span>
<span id="cb51-591"><a href="#cb51-591" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the UTM zone for Cochabamba (Zone 20S)</span></span>
<span id="cb51-592"><a href="#cb51-592" aria-hidden="true" tabindex="-1"></a>utm_crs <span class="ot">&lt;-</span> <span class="st">"+proj=utm +zone=20 +south +datum=WGS84 +units=m +no_defs"</span></span>
<span id="cb51-593"><a href="#cb51-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-594"><a href="#cb51-594" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a SpatialPointsDataFrame directly from filtered_ec</span></span>
<span id="cb51-595"><a href="#cb51-595" aria-hidden="true" tabindex="-1"></a>land_transformed <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(land, <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"X"</span>, <span class="st">"Y"</span>), <span class="at">crs =</span> utm_crs)</span>
<span id="cb51-596"><a href="#cb51-596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-597"><a href="#cb51-597" aria-hidden="true" tabindex="-1"></a><span class="co"># Transform to WGS84</span></span>
<span id="cb51-598"><a href="#cb51-598" aria-hidden="true" tabindex="-1"></a>land_transformed_wgs84 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(land_transformed, <span class="at">crs =</span> <span class="st">"+proj=longlat +datum=WGS84"</span>)</span>
<span id="cb51-599"><a href="#cb51-599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-600"><a href="#cb51-600" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract extent from the transformed SpatialPointsDataFrame</span></span>
<span id="cb51-601"><a href="#cb51-601" aria-hidden="true" tabindex="-1"></a>new_extent <span class="ot">&lt;-</span> <span class="fu">st_bbox</span>(land_transformed_wgs84)</span>
<span id="cb51-602"><a href="#cb51-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-603"><a href="#cb51-603" aria-hidden="true" tabindex="-1"></a><span class="co"># Modify the extent of the raster layer to match the new extent</span></span>
<span id="cb51-604"><a href="#cb51-604" aria-hidden="true" tabindex="-1"></a>raster_layer_with_new_extent <span class="ot">&lt;-</span> <span class="fu">setExtent</span>(land_raster, new_extent)</span>
<span id="cb51-605"><a href="#cb51-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-606"><a href="#cb51-606" aria-hidden="true" tabindex="-1"></a><span class="co"># writeRaster(raster_layer_with_new_extent, "raster_layer_with_new_extent.tif")</span></span>
<span id="cb51-607"><a href="#cb51-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-608"><a href="#cb51-608" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(raster_layer_with_new_extent)</span></span>
<span id="cb51-609"><a href="#cb51-609" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-610"><a href="#cb51-610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-611"><a href="#cb51-611" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb51-612"><a href="#cb51-612" aria-hidden="true" tabindex="-1"></a><span class="co"># label: tbl-land-reclass</span></span>
<span id="cb51-613"><a href="#cb51-613" aria-hidden="true" tabindex="-1"></a><span class="co"># tbl-cap: "Reclassification table of the Land-Use Data"</span></span>
<span id="cb51-614"><a href="#cb51-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-615"><a href="#cb51-615" aria-hidden="true" tabindex="-1"></a><span class="do">### Reclass</span></span>
<span id="cb51-616"><a href="#cb51-616" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a tibble with the reclassification table</span></span>
<span id="cb51-617"><a href="#cb51-617" aria-hidden="true" tabindex="-1"></a>reclass_table_land <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb51-618"><a href="#cb51-618" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>from, <span class="sc">~</span>to, <span class="sc">~</span>becomes,</span>
<span id="cb51-619"><a href="#cb51-619" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>,    </span>
<span id="cb51-620"><a href="#cb51-620" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>,    </span>
<span id="cb51-621"><a href="#cb51-621" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>,      </span>
<span id="cb51-622"><a href="#cb51-622" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>,    </span>
<span id="cb51-623"><a href="#cb51-623" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">1</span>,    </span>
<span id="cb51-624"><a href="#cb51-624" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">0</span>,  </span>
<span id="cb51-625"><a href="#cb51-625" aria-hidden="true" tabindex="-1"></a>  <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">0</span>,      </span>
<span id="cb51-626"><a href="#cb51-626" aria-hidden="true" tabindex="-1"></a>  <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">1</span>,    </span>
<span id="cb51-627"><a href="#cb51-627" aria-hidden="true" tabindex="-1"></a>  <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">0</span>,      </span>
<span id="cb51-628"><a href="#cb51-628" aria-hidden="true" tabindex="-1"></a>  <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">1</span>,  <span class="co"># cambio   </span></span>
<span id="cb51-629"><a href="#cb51-629" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">1</span></span>
<span id="cb51-630"><a href="#cb51-630" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-631"><a href="#cb51-631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-632"><a href="#cb51-632" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming you have a slope raster 'slope_raster'</span></span>
<span id="cb51-633"><a href="#cb51-633" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb51-634"><a href="#cb51-634" aria-hidden="true" tabindex="-1"></a>land_reclassified <span class="ot">&lt;-</span> <span class="fu">reclassify</span>(raster_layer_with_new_extent, reclass_table_land, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-635"><a href="#cb51-635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-636"><a href="#cb51-636" aria-hidden="true" tabindex="-1"></a><span class="co"># Align Vegetation-Raster</span></span>
<span id="cb51-637"><a href="#cb51-637" aria-hidden="true" tabindex="-1"></a><span class="co"># geo_reclassified &lt;- rast(geo_reclassified)</span></span>
<span id="cb51-638"><a href="#cb51-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-639"><a href="#cb51-639" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding a new column C to the data frame</span></span>
<span id="cb51-640"><a href="#cb51-640" aria-hidden="true" tabindex="-1"></a>reclass_table_land<span class="sc">$</span>Class <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb51-641"><a href="#cb51-641" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Productivo Agropecuario, Extractivo Forestal"</span>,</span>
<span id="cb51-642"><a href="#cb51-642" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Productivo Agropecuario: Pastoreo, en sectores Cultivos alimenticios"</span>,</span>
<span id="cb51-643"><a href="#cb51-643" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Productivo Ganadero: Escaso pastoreo directo"</span>,</span>
<span id="cb51-644"><a href="#cb51-644" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Productivo: Alimenticios de consumo, subsistencia y mercado local."</span>,</span>
<span id="cb51-645"><a href="#cb51-645" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Productivo Ganadero: Pastoreo directo, forrajeo de aves."</span>,</span>
<span id="cb51-646"><a href="#cb51-646" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Extractivo Minero en parte"</span>,</span>
<span id="cb51-647"><a href="#cb51-647" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Productivo Aguas Superficiales Mixto"</span>,</span>
<span id="cb51-648"><a href="#cb51-648" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Productivo Agropecuario: Cultivos alimenticios"</span>,</span>
<span id="cb51-649"><a href="#cb51-649" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Extractivo Minero, Productivo Agropecuario, Protectivo, Vida silvestre"</span>,</span>
<span id="cb51-650"><a href="#cb51-650" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Recreativo: Escénico, Turístico"</span>,</span>
<span id="cb51-651"><a href="#cb51-651" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Productivo Agropecuario, Extractivo Forestal y Petrolero"</span></span>
<span id="cb51-652"><a href="#cb51-652" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-653"><a href="#cb51-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-654"><a href="#cb51-654" aria-hidden="true" tabindex="-1"></a><span class="co"># kable(reclass_table_land)</span></span>
<span id="cb51-655"><a href="#cb51-655" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-656"><a href="#cb51-656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-657"><a href="#cb51-657" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb51-658"><a href="#cb51-658" aria-hidden="true" tabindex="-1"></a><span class="co"># label: fig-land-use</span></span>
<span id="cb51-659"><a href="#cb51-659" aria-hidden="true" tabindex="-1"></a><span class="co"># fig-cap: "Reclassification Result of Pasorapa"</span></span>
<span id="cb51-660"><a href="#cb51-660" aria-hidden="true" tabindex="-1"></a><span class="co"># fig-subcap: </span></span>
<span id="cb51-661"><a href="#cb51-661" aria-hidden="true" tabindex="-1"></a><span class="co"># -  "Reclassification Result of Pasorapa"</span></span>
<span id="cb51-662"><a href="#cb51-662" aria-hidden="true" tabindex="-1"></a><span class="co"># -  "Reclassification Result of Aiquile"</span></span>
<span id="cb51-663"><a href="#cb51-663" aria-hidden="true" tabindex="-1"></a><span class="co"># fig-width: 5</span></span>
<span id="cb51-664"><a href="#cb51-664" aria-hidden="true" tabindex="-1"></a><span class="co"># fig-height: 6</span></span>
<span id="cb51-665"><a href="#cb51-665" aria-hidden="true" tabindex="-1"></a><span class="co"># layout-nrow: 1</span></span>
<span id="cb51-666"><a href="#cb51-666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-667"><a href="#cb51-667" aria-hidden="true" tabindex="-1"></a><span class="co"># check</span></span>
<span id="cb51-668"><a href="#cb51-668" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb51-669"><a href="#cb51-669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-670"><a href="#cb51-670" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(land_reclassified, <span class="at">labels =</span> <span class="st">"New Legend Label"</span>) <span class="sc">+</span></span>
<span id="cb51-671"><a href="#cb51-671" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_raster</span>(<span class="at">style =</span> <span class="st">"cat"</span>, <span class="at">palette =</span> <span class="st">"Reds"</span>) <span class="sc">+</span></span>
<span id="cb51-672"><a href="#cb51-672" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span></span>
<span id="cb51-673"><a href="#cb51-673" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb51-674"><a href="#cb51-674" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Data source: geo.gob.bo"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span> <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb51-675"><a href="#cb51-675" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb51-676"><a href="#cb51-676" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb51-677"><a href="#cb51-677" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb51-678"><a href="#cb51-678" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb51-679"><a href="#cb51-679" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-680"><a href="#cb51-680" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-681"><a href="#cb51-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-682"><a href="#cb51-682" aria-hidden="true" tabindex="-1"></a>\newpage</span>
<span id="cb51-683"><a href="#cb51-683" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-684"><a href="#cb51-684" aria-hidden="true" tabindex="-1"></a><span class="fu">### Maximum Temperature Data</span></span>
<span id="cb51-685"><a href="#cb51-685" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-686"><a href="#cb51-686" aria-hidden="true" tabindex="-1"></a>The Temperature Data from <span class="co">[</span><span class="ot">worldclim.org</span><span class="co">](https://www.worldclim.org/data/worldclim21.html)</span> which consists of a variety of global weather data on an 30 Arc Second Accuracy. This data has been used to calculate the highest temperatures over all the available 12 Raster-Layers of the different months. The Result is one Raster-Layer that contains the highest temperatures of the average year from 1970-2000. The reclassification has been calculated according to @tbl-data-weights-def-drought.</span>
<span id="cb51-687"><a href="#cb51-687" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-688"><a href="#cb51-688" aria-hidden="true" tabindex="-1"></a>The provided code implements automation to improve the processing of multiple Rasterlayers, consolidating them into a single Rasterlayer containing the minimum values across the dataset. This approach aims to enhance efficiency and simplify the workflow of raster data analysis. The Code used can be seen in the <span class="co">[</span><span class="ot">Appendix</span><span class="co">](#sec-sec-temp-max)</span>.</span>
<span id="cb51-689"><a href="#cb51-689" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-690"><a href="#cb51-690" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE, temp_max_processing}</span></span>
<span id="cb51-691"><a href="#cb51-691" aria-hidden="true" tabindex="-1"></a><span class="do">### Processing</span></span>
<span id="cb51-692"><a href="#cb51-692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-693"><a href="#cb51-693" aria-hidden="true" tabindex="-1"></a><span class="co"># LOOP</span></span>
<span id="cb51-694"><a href="#cb51-694" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-695"><a href="#cb51-695" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear una lista con los nombres de los objetos</span></span>
<span id="cb51-696"><a href="#cb51-696" aria-hidden="true" tabindex="-1"></a>lista_temp <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"tmax"</span>, <span class="fu">sprintf</span>(<span class="st">"%02d"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>))  </span>
<span id="cb51-697"><a href="#cb51-697" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate names precip01 until precip12</span></span>
<span id="cb51-698"><a href="#cb51-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-699"><a href="#cb51-699" aria-hidden="true" tabindex="-1"></a><span class="co"># Inicializar una lista vacía para almacenar los resultados</span></span>
<span id="cb51-700"><a href="#cb51-700" aria-hidden="true" tabindex="-1"></a>lista_tmax_mask <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb51-701"><a href="#cb51-701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-702"><a href="#cb51-702" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterar sobre cada objeto y aplicar las operaciones</span></span>
<span id="cb51-703"><a href="#cb51-703" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(lista_temp)) {</span>
<span id="cb51-704"><a href="#cb51-704" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Acceder al objeto con el nombre correspondiente</span></span>
<span id="cb51-705"><a href="#cb51-705" aria-hidden="true" tabindex="-1"></a>  tmax_obj <span class="ot">&lt;-</span> <span class="fu">get</span>(lista_temp[i])</span>
<span id="cb51-706"><a href="#cb51-706" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-707"><a href="#cb51-707" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Aplicar las operaciones crop y mask</span></span>
<span id="cb51-708"><a href="#cb51-708" aria-hidden="true" tabindex="-1"></a>  tmax_crop <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">crop</span>(tmax_obj, Pasorapa)</span>
<span id="cb51-709"><a href="#cb51-709" aria-hidden="true" tabindex="-1"></a>  tmax_mask <span class="ot">&lt;-</span> <span class="fu">mask</span>(tmax_crop, Pasorapa)</span>
<span id="cb51-710"><a href="#cb51-710" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-711"><a href="#cb51-711" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Almacenar el resultado en la lista</span></span>
<span id="cb51-712"><a href="#cb51-712" aria-hidden="true" tabindex="-1"></a>  lista_tmax_mask[[i]] <span class="ot">&lt;-</span> tmax_mask</span>
<span id="cb51-713"><a href="#cb51-713" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb51-714"><a href="#cb51-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-715"><a href="#cb51-715" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar la lista de resultados (en caso de querer acceder a cada uno)</span></span>
<span id="cb51-716"><a href="#cb51-716" aria-hidden="true" tabindex="-1"></a><span class="co"># lista_tmax_mask</span></span>
<span id="cb51-717"><a href="#cb51-717" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-718"><a href="#cb51-718" aria-hidden="true" tabindex="-1"></a><span class="co"># Para visualizar un objeto específico (por ejemplo, el primer objeto)</span></span>
<span id="cb51-719"><a href="#cb51-719" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-720"><a href="#cb51-720" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(lista_tmax_mask[[<span class="dv">08</span>]])</span>
<span id="cb51-721"><a href="#cb51-721" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-722"><a href="#cb51-722" aria-hidden="true" tabindex="-1"></a><span class="co"># Stack the Values and calc the min for everything</span></span>
<span id="cb51-723"><a href="#cb51-723" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-724"><a href="#cb51-724" aria-hidden="true" tabindex="-1"></a><span class="co"># Use rast() to convert the list to a SpatRaster object</span></span>
<span id="cb51-725"><a href="#cb51-725" aria-hidden="true" tabindex="-1"></a>stacked_rasters <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">rast</span>(lista_tmax_mask)</span>
<span id="cb51-726"><a href="#cb51-726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-727"><a href="#cb51-727" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply the cellStats function to find the minimum value for each pixel across the stack</span></span>
<span id="cb51-728"><a href="#cb51-728" aria-hidden="true" tabindex="-1"></a>max_values <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">app</span>(stacked_rasters, <span class="at">fun =</span> max, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-729"><a href="#cb51-729" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-730"><a href="#cb51-730" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(max_values, file = "max_temp_pasorapa.rds")</span></span>
<span id="cb51-731"><a href="#cb51-731" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb51-732"><a href="#cb51-732" aria-hidden="true" tabindex="-1"></a><span class="co"># max_temp_pasorapa &lt;- readRDS("max_temp_pasorapa.rds")</span></span>
<span id="cb51-733"><a href="#cb51-733" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-734"><a href="#cb51-734" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the resulting raster</span></span>
<span id="cb51-735"><a href="#cb51-735" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(max_values)</span></span>
<span id="cb51-736"><a href="#cb51-736" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-737"><a href="#cb51-737" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-740"><a href="#cb51-740" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-741"><a href="#cb51-741" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-max_temp-table</span></span>
<span id="cb51-742"><a href="#cb51-742" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Reclassification table of the Temp max Data"</span></span>
<span id="cb51-743"><a href="#cb51-743" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-744"><a href="#cb51-744" aria-hidden="true" tabindex="-1"></a>max_temp_pasorapa <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"max_temp_pasorapa.rds"</span>)</span>
<span id="cb51-745"><a href="#cb51-745" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-746"><a href="#cb51-746" aria-hidden="true" tabindex="-1"></a><span class="co"># reclass</span></span>
<span id="cb51-747"><a href="#cb51-747" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a tibble with the reclassification table</span></span>
<span id="cb51-748"><a href="#cb51-748" aria-hidden="true" tabindex="-1"></a>reclass_table_max_temp <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb51-749"><a href="#cb51-749" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>from, <span class="sc">~</span>to, <span class="sc">~</span>becomes,</span>
<span id="cb51-750"><a href="#cb51-750" aria-hidden="true" tabindex="-1"></a>  <span class="sc">-</span><span class="cn">Inf</span>, <span class="dv">25</span>, <span class="fl">0.2</span>,    </span>
<span id="cb51-751"><a href="#cb51-751" aria-hidden="true" tabindex="-1"></a>  <span class="dv">25</span>, <span class="dv">27</span>, <span class="fl">0.4</span>,   </span>
<span id="cb51-752"><a href="#cb51-752" aria-hidden="true" tabindex="-1"></a>  <span class="dv">27</span>, <span class="dv">30</span>, <span class="fl">0.6</span>,   </span>
<span id="cb51-753"><a href="#cb51-753" aria-hidden="true" tabindex="-1"></a>  <span class="dv">30</span>, <span class="cn">Inf</span>, <span class="dv">1</span></span>
<span id="cb51-754"><a href="#cb51-754" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-755"><a href="#cb51-755" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-756"><a href="#cb51-756" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb51-757"><a href="#cb51-757" aria-hidden="true" tabindex="-1"></a>max_temp_reclassified_pasorapa <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(max_temp_pasorapa, reclass_table_max_temp, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-758"><a href="#cb51-758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-759"><a href="#cb51-759" aria-hidden="true" tabindex="-1"></a><span class="co"># kable(reclass_table_max_temp)</span></span>
<span id="cb51-760"><a href="#cb51-760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-761"><a href="#cb51-761" aria-hidden="true" tabindex="-1"></a><span class="co"># read data aiquile</span></span>
<span id="cb51-762"><a href="#cb51-762" aria-hidden="true" tabindex="-1"></a>max_temp_aiquile <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"max_temp_aiquile.rds"</span>)</span>
<span id="cb51-763"><a href="#cb51-763" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-764"><a href="#cb51-764" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb51-765"><a href="#cb51-765" aria-hidden="true" tabindex="-1"></a>max_temp_reclassified_aiquile <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(max_temp_aiquile, reclass_table_max_temp, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-766"><a href="#cb51-766" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-767"><a href="#cb51-767" aria-hidden="true" tabindex="-1"></a><span class="co"># Totora</span></span>
<span id="cb51-768"><a href="#cb51-768" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-769"><a href="#cb51-769" aria-hidden="true" tabindex="-1"></a>max_temp_totora <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"max_temp_totora.rds"</span>)</span>
<span id="cb51-770"><a href="#cb51-770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-771"><a href="#cb51-771" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb51-772"><a href="#cb51-772" aria-hidden="true" tabindex="-1"></a>max_temp_reclassified_totora <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(max_temp_totora, reclass_table_max_temp, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-773"><a href="#cb51-773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-774"><a href="#cb51-774" aria-hidden="true" tabindex="-1"></a><span class="co"># Pojo</span></span>
<span id="cb51-775"><a href="#cb51-775" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-776"><a href="#cb51-776" aria-hidden="true" tabindex="-1"></a>max_temp_pojo <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"max_temp_pojo.rds"</span>)</span>
<span id="cb51-777"><a href="#cb51-777" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-778"><a href="#cb51-778" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb51-779"><a href="#cb51-779" aria-hidden="true" tabindex="-1"></a>max_temp_reclassified_pojo <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(max_temp_pojo, reclass_table_max_temp, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-780"><a href="#cb51-780" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-781"><a href="#cb51-781" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-784"><a href="#cb51-784" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-785"><a href="#cb51-785" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-max-temp</span></span>
<span id="cb51-786"><a href="#cb51-786" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Maximum temperature reclassification"</span></span>
<span id="cb51-787"><a href="#cb51-787" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 5</span></span>
<span id="cb51-788"><a href="#cb51-788" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 5</span></span>
<span id="cb51-789"><a href="#cb51-789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-790"><a href="#cb51-790" aria-hidden="true" tabindex="-1"></a><span class="co"># Define breaks and labels for the reclassification</span></span>
<span id="cb51-791"><a href="#cb51-791" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.2</span>, <span class="fl">0.4</span>, <span class="fl">0.6</span>, <span class="dv">1</span>)</span>
<span id="cb51-792"><a href="#cb51-792" aria-hidden="true" tabindex="-1"></a><span class="co"># labels &lt;- c("Muy bajo", "Bajo", "Moderado", "Alto", "Muy alto")</span></span>
<span id="cb51-793"><a href="#cb51-793" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-794"><a href="#cb51-794" aria-hidden="true" tabindex="-1"></a><span class="co"># Cut the raster values into categorical factors</span></span>
<span id="cb51-795"><a href="#cb51-795" aria-hidden="true" tabindex="-1"></a><span class="co"># factor_raster &lt;- cut(values(final_raster), breaks = breaks, labels = labels, include.lowest = TRUE)</span></span>
<span id="cb51-796"><a href="#cb51-796" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-797"><a href="#cb51-797" aria-hidden="true" tabindex="-1"></a><span class="co"># change name</span></span>
<span id="cb51-798"><a href="#cb51-798" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(max_temp_reclassified_aiquile) <span class="ot">&lt;-</span> <span class="st">"Drought Risk"</span></span>
<span id="cb51-799"><a href="#cb51-799" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-800"><a href="#cb51-800" aria-hidden="true" tabindex="-1"></a><span class="co"># Color Palette in R</span></span>
<span id="cb51-801"><a href="#cb51-801" aria-hidden="true" tabindex="-1"></a>colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"darkgreen"</span>,<span class="st">"yellow"</span>, <span class="st">"orange"</span>,<span class="st">"red"</span>)</span>
<span id="cb51-802"><a href="#cb51-802" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-803"><a href="#cb51-803" aria-hidden="true" tabindex="-1"></a><span class="co"># view</span></span>
<span id="cb51-804"><a href="#cb51-804" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb51-805"><a href="#cb51-805" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-806"><a href="#cb51-806" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb51-807"><a href="#cb51-807" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb51-808"><a href="#cb51-808" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(max_temp_reclassified_aiquile) <span class="sc">+</span></span>
<span id="cb51-809"><a href="#cb51-809" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">palette =</span> colors) <span class="sc">+</span> </span>
<span id="cb51-810"><a href="#cb51-810" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(max_temp_reclassified_pasorapa) <span class="sc">+</span></span>
<span id="cb51-811"><a href="#cb51-811" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb51-812"><a href="#cb51-812" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(max_temp_reclassified_pojo) <span class="sc">+</span></span>
<span id="cb51-813"><a href="#cb51-813" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb51-814"><a href="#cb51-814" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(max_temp_reclassified_totora) <span class="sc">+</span></span>
<span id="cb51-815"><a href="#cb51-815" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb51-816"><a href="#cb51-816" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb51-817"><a href="#cb51-817" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb51-818"><a href="#cb51-818" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb51-819"><a href="#cb51-819" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_text</span>(<span class="st">"NAME_3"</span>, <span class="at">size =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb51-820"><a href="#cb51-820" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span>  </span>
<span id="cb51-821"><a href="#cb51-821" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb51-822"><a href="#cb51-822" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Author: Johannes Quente"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb51-823"><a href="#cb51-823" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb51-824"><a href="#cb51-824" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb51-825"><a href="#cb51-825" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb51-826"><a href="#cb51-826" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb51-827"><a href="#cb51-827" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb51-828"><a href="#cb51-828" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-829"><a href="#cb51-829" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-830"><a href="#cb51-830" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-831"><a href="#cb51-831" aria-hidden="true" tabindex="-1"></a>\newpage</span>
<span id="cb51-832"><a href="#cb51-832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-833"><a href="#cb51-833" aria-hidden="true" tabindex="-1"></a><span class="fu">### DEM (Inclination) Data</span></span>
<span id="cb51-834"><a href="#cb51-834" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-835"><a href="#cb51-835" aria-hidden="true" tabindex="-1"></a>The provided Digital Elevation Model (DEM) consists of raster values showcasing variations in altitudes. These altitude values where converted into slope data using the <span class="in">`terra::terrain`</span> -function from the Terra package. The reclassification has been calculated according to @tbl-data-weights-def-drought.</span>
<span id="cb51-836"><a href="#cb51-836" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-837"><a href="#cb51-837" aria-hidden="true" tabindex="-1"></a>Subsequently, the slope data was categorized into varying degrees of possibility of drought in percent based on their inclination. For a detailed view of the reclassification code, please refer to the <span class="co">[</span><span class="ot">Appendix</span><span class="co">](#sec-sec-inclination)</span>.</span>
<span id="cb51-838"><a href="#cb51-838" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-839"><a href="#cb51-839" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb51-840"><a href="#cb51-840" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rayshader)</span>
<span id="cb51-841"><a href="#cb51-841" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rgl)</span>
<span id="cb51-842"><a href="#cb51-842" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-843"><a href="#cb51-843" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert raster to matrix</span></span>
<span id="cb51-844"><a href="#cb51-844" aria-hidden="true" tabindex="-1"></a>raster_matrix <span class="ot">&lt;-</span> <span class="fu">raster_to_matrix</span>(dem_mask_pasorapa)</span>
<span id="cb51-845"><a href="#cb51-845" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-846"><a href="#cb51-846" aria-hidden="true" tabindex="-1"></a><span class="co"># writeRaster(dem_mask_pasorapa, "dem_mask_pasorapa_test.tif")</span></span>
<span id="cb51-847"><a href="#cb51-847" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-848"><a href="#cb51-848" aria-hidden="true" tabindex="-1"></a>raster_matrix <span class="sc">%&gt;%</span></span>
<span id="cb51-849"><a href="#cb51-849" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sphere_shade</span>(<span class="at">texture =</span> <span class="st">"desert"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb51-850"><a href="#cb51-850" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_map</span>()</span>
<span id="cb51-851"><a href="#cb51-851" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-852"><a href="#cb51-852" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-853"><a href="#cb51-853" aria-hidden="true" tabindex="-1"></a>raster_matrix <span class="sc">%&gt;%</span></span>
<span id="cb51-854"><a href="#cb51-854" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sphere_shade</span>(<span class="at">texture =</span> <span class="st">"desert"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb51-855"><a href="#cb51-855" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_shadow</span>(<span class="fu">ray_shade</span>(raster_matrix, <span class="at">zscale =</span> <span class="dv">3</span>), <span class="fl">0.5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb51-856"><a href="#cb51-856" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_shadow</span>(<span class="fu">ambient_shade</span>(raster_matrix), <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb51-857"><a href="#cb51-857" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_3d</span>(raster_matrix, <span class="at">zscale =</span> <span class="dv">10</span>, <span class="at">fov =</span> <span class="dv">0</span>, <span class="at">theta =</span> <span class="dv">135</span>, <span class="at">zoom =</span> <span class="fl">0.75</span>, <span class="at">phi =</span> <span class="dv">45</span>, <span class="at">windowsize =</span> <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">800</span>))</span>
<span id="cb51-858"><a href="#cb51-858" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.sleep</span>(<span class="fl">0.2</span>)</span>
<span id="cb51-859"><a href="#cb51-859" aria-hidden="true" tabindex="-1"></a><span class="fu">render_snapshot</span>()</span>
<span id="cb51-860"><a href="#cb51-860" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-861"><a href="#cb51-861" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-862"><a href="#cb51-862" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb51-863"><a href="#cb51-863" aria-hidden="true" tabindex="-1"></a><span class="co"># DEM</span></span>
<span id="cb51-864"><a href="#cb51-864" aria-hidden="true" tabindex="-1"></a><span class="do">##  crop and mask dem</span></span>
<span id="cb51-865"><a href="#cb51-865" aria-hidden="true" tabindex="-1"></a>dem_crop <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">crop</span>(dem, Pasorapa)</span>
<span id="cb51-866"><a href="#cb51-866" aria-hidden="true" tabindex="-1"></a>dem_mask_pasorapa <span class="ot">&lt;-</span> <span class="fu">mask</span>(dem_crop, Pasorapa)</span>
<span id="cb51-867"><a href="#cb51-867" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-868"><a href="#cb51-868" aria-hidden="true" tabindex="-1"></a>terrain_pasorapa <span class="ot">&lt;-</span> <span class="fu">terrain</span>(dem_mask_pasorapa)</span>
<span id="cb51-869"><a href="#cb51-869" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-870"><a href="#cb51-870" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a tibble with the reclassification table</span></span>
<span id="cb51-871"><a href="#cb51-871" aria-hidden="true" tabindex="-1"></a>reclass_table_dem <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb51-872"><a href="#cb51-872" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>from, <span class="sc">~</span>to, <span class="sc">~</span>becomes,</span>
<span id="cb51-873"><a href="#cb51-873" aria-hidden="true" tabindex="-1"></a>  <span class="dv">0</span>, <span class="dv">10</span>, <span class="fl">0.09</span>,           <span class="co"># 0-10: Plano</span></span>
<span id="cb51-874"><a href="#cb51-874" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="dv">20</span>, <span class="fl">0.2</span>,           <span class="co"># 10-20: Mod. inclinado</span></span>
<span id="cb51-875"><a href="#cb51-875" aria-hidden="true" tabindex="-1"></a>  <span class="dv">20</span>, <span class="dv">30</span>, <span class="fl">0.34</span>,          <span class="co"># 20-30: Inclinado</span></span>
<span id="cb51-876"><a href="#cb51-876" aria-hidden="true" tabindex="-1"></a>  <span class="dv">30</span>, <span class="dv">45</span>, <span class="fl">0.56</span>,          <span class="co"># 30-45: Mod. empinado</span></span>
<span id="cb51-877"><a href="#cb51-877" aria-hidden="true" tabindex="-1"></a>  <span class="dv">45</span>, <span class="cn">Inf</span>, <span class="dv">1</span>             <span class="co"># 45 and above: Fuert. empinado</span></span>
<span id="cb51-878"><a href="#cb51-878" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-879"><a href="#cb51-879" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-880"><a href="#cb51-880" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming you have a slope raster 'slope_raster'</span></span>
<span id="cb51-881"><a href="#cb51-881" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb51-882"><a href="#cb51-882" aria-hidden="true" tabindex="-1"></a>dem_reclassified_pasorapa <span class="ot">&lt;-</span> <span class="fu">classify</span>(terrain_pasorapa, reclass_table_dem, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-883"><a href="#cb51-883" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-884"><a href="#cb51-884" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding a new column C to the data frame</span></span>
<span id="cb51-885"><a href="#cb51-885" aria-hidden="true" tabindex="-1"></a>reclass_table_dem<span class="sc">$</span>Class <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Plano a casi plano"</span>, <span class="st">"Mod. inclinado"</span>, <span class="st">"Inclinado"</span>, <span class="st">"Mod. empinado"</span>, <span class="st">"Fuert. empinado"</span>)</span>
<span id="cb51-886"><a href="#cb51-886" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-887"><a href="#cb51-887" aria-hidden="true" tabindex="-1"></a><span class="co"># kable(reclass_table_dem)</span></span>
<span id="cb51-888"><a href="#cb51-888" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-889"><a href="#cb51-889" aria-hidden="true" tabindex="-1"></a><span class="do">### Pasorapa</span></span>
<span id="cb51-890"><a href="#cb51-890" aria-hidden="true" tabindex="-1"></a><span class="do">### Aiquile</span></span>
<span id="cb51-891"><a href="#cb51-891" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-892"><a href="#cb51-892" aria-hidden="true" tabindex="-1"></a><span class="co"># DEM</span></span>
<span id="cb51-893"><a href="#cb51-893" aria-hidden="true" tabindex="-1"></a><span class="do">##  crop and mask dem</span></span>
<span id="cb51-894"><a href="#cb51-894" aria-hidden="true" tabindex="-1"></a>dem_crop <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">crop</span>(dem, Aiquile)</span>
<span id="cb51-895"><a href="#cb51-895" aria-hidden="true" tabindex="-1"></a>dem_mask_aiquile <span class="ot">&lt;-</span> <span class="fu">mask</span>(dem_crop, Aiquile)</span>
<span id="cb51-896"><a href="#cb51-896" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-897"><a href="#cb51-897" aria-hidden="true" tabindex="-1"></a>terrain_aiquile <span class="ot">&lt;-</span> <span class="fu">terrain</span>(dem_mask_aiquile)</span>
<span id="cb51-898"><a href="#cb51-898" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-899"><a href="#cb51-899" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a tibble with the reclassification table</span></span>
<span id="cb51-900"><a href="#cb51-900" aria-hidden="true" tabindex="-1"></a>reclass_table_dem <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb51-901"><a href="#cb51-901" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>from, <span class="sc">~</span>to, <span class="sc">~</span>becomes,</span>
<span id="cb51-902"><a href="#cb51-902" aria-hidden="true" tabindex="-1"></a>  <span class="dv">0</span>, <span class="dv">10</span>, <span class="fl">0.09</span>,           <span class="co"># 0-10: Plano</span></span>
<span id="cb51-903"><a href="#cb51-903" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="dv">20</span>, <span class="fl">0.2</span>,           <span class="co"># 10-20: Mod. inclinado</span></span>
<span id="cb51-904"><a href="#cb51-904" aria-hidden="true" tabindex="-1"></a>  <span class="dv">20</span>, <span class="dv">30</span>, <span class="fl">0.34</span>,          <span class="co"># 20-30: Inclinado</span></span>
<span id="cb51-905"><a href="#cb51-905" aria-hidden="true" tabindex="-1"></a>  <span class="dv">30</span>, <span class="dv">45</span>, <span class="fl">0.56</span>,          <span class="co"># 30-45: Mod. empinado</span></span>
<span id="cb51-906"><a href="#cb51-906" aria-hidden="true" tabindex="-1"></a>  <span class="dv">45</span>, <span class="cn">Inf</span>, <span class="dv">1</span>             <span class="co"># 45 and above: Fuert. empinado</span></span>
<span id="cb51-907"><a href="#cb51-907" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-908"><a href="#cb51-908" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-909"><a href="#cb51-909" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming you have a slope raster 'slope_raster'</span></span>
<span id="cb51-910"><a href="#cb51-910" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb51-911"><a href="#cb51-911" aria-hidden="true" tabindex="-1"></a>dem_reclassified_aiquile <span class="ot">&lt;-</span> <span class="fu">classify</span>(terrain_aiquile, reclass_table_dem, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-912"><a href="#cb51-912" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-913"><a href="#cb51-913" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding a new column C to the data frame</span></span>
<span id="cb51-914"><a href="#cb51-914" aria-hidden="true" tabindex="-1"></a>reclass_table_dem<span class="sc">$</span>Class <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Plano a casi plano"</span>, <span class="st">"Mod. inclinado"</span>, <span class="st">"Inclinado"</span>, <span class="st">"Mod. empinado"</span>, <span class="st">"Fuert. empinado"</span>)</span>
<span id="cb51-915"><a href="#cb51-915" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-916"><a href="#cb51-916" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-917"><a href="#cb51-917" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-920"><a href="#cb51-920" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-921"><a href="#cb51-921" aria-hidden="true" tabindex="-1"></a><span class="co"># Totora</span></span>
<span id="cb51-922"><a href="#cb51-922" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(dem_reclassified_pasorapa, "dem_reclassified_pasorapa.rds")</span></span>
<span id="cb51-923"><a href="#cb51-923" aria-hidden="true" tabindex="-1"></a>dem_reclassified_pasorapa <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"dem_reclassified_pasorapa.rds"</span>)</span>
<span id="cb51-924"><a href="#cb51-924" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-925"><a href="#cb51-925" aria-hidden="true" tabindex="-1"></a><span class="co"># Aiquile</span></span>
<span id="cb51-926"><a href="#cb51-926" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(dem_reclassified_aiquile, "dem_reclassified_aiquile.rds")</span></span>
<span id="cb51-927"><a href="#cb51-927" aria-hidden="true" tabindex="-1"></a>dem_reclassified_aiquile <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"dem_reclassified_aiquile.rds"</span>)</span>
<span id="cb51-928"><a href="#cb51-928" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-929"><a href="#cb51-929" aria-hidden="true" tabindex="-1"></a><span class="co"># Totora</span></span>
<span id="cb51-930"><a href="#cb51-930" aria-hidden="true" tabindex="-1"></a>dem_reclassified_totora <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"dem_reclassified_totora.rds"</span>)</span>
<span id="cb51-931"><a href="#cb51-931" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-932"><a href="#cb51-932" aria-hidden="true" tabindex="-1"></a><span class="co"># Pojo</span></span>
<span id="cb51-933"><a href="#cb51-933" aria-hidden="true" tabindex="-1"></a>dem_reclassified_pojo <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"dem_reclassified_pojo.rds"</span>)</span>
<span id="cb51-934"><a href="#cb51-934" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-935"><a href="#cb51-935" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-938"><a href="#cb51-938" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-939"><a href="#cb51-939" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-dem-inclination</span></span>
<span id="cb51-940"><a href="#cb51-940" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "DEM derived Inclination reclassification"</span></span>
<span id="cb51-941"><a href="#cb51-941" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 5</span></span>
<span id="cb51-942"><a href="#cb51-942" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 5</span></span>
<span id="cb51-943"><a href="#cb51-943" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-944"><a href="#cb51-944" aria-hidden="true" tabindex="-1"></a><span class="co"># Define breaks and labels for the reclassification</span></span>
<span id="cb51-945"><a href="#cb51-945" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.09</span>, <span class="fl">0.2</span>, <span class="fl">0.34</span>, <span class="fl">0.59</span>, <span class="dv">1</span>)</span>
<span id="cb51-946"><a href="#cb51-946" aria-hidden="true" tabindex="-1"></a><span class="co"># labels &lt;- c("Muy bajo", "Bajo", "Moderado", "Alto", "Muy alto")</span></span>
<span id="cb51-947"><a href="#cb51-947" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-948"><a href="#cb51-948" aria-hidden="true" tabindex="-1"></a><span class="co"># Cut the raster values into categorical factors</span></span>
<span id="cb51-949"><a href="#cb51-949" aria-hidden="true" tabindex="-1"></a><span class="co"># factor_raster &lt;- cut(values(final_raster), breaks = breaks, labels = labels, include.lowest = TRUE)</span></span>
<span id="cb51-950"><a href="#cb51-950" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-951"><a href="#cb51-951" aria-hidden="true" tabindex="-1"></a><span class="co"># change name</span></span>
<span id="cb51-952"><a href="#cb51-952" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dem_reclassified_aiquile) <span class="ot">&lt;-</span> <span class="st">"Drought Risk"</span></span>
<span id="cb51-953"><a href="#cb51-953" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-954"><a href="#cb51-954" aria-hidden="true" tabindex="-1"></a><span class="co"># Color Palette in R</span></span>
<span id="cb51-955"><a href="#cb51-955" aria-hidden="true" tabindex="-1"></a><span class="co"># colors &lt;- c("darkgreen","yellow", "orange","red")</span></span>
<span id="cb51-956"><a href="#cb51-956" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-957"><a href="#cb51-957" aria-hidden="true" tabindex="-1"></a><span class="co"># view</span></span>
<span id="cb51-958"><a href="#cb51-958" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb51-959"><a href="#cb51-959" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-960"><a href="#cb51-960" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb51-961"><a href="#cb51-961" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb51-962"><a href="#cb51-962" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(dem_reclassified_aiquile) <span class="sc">+</span></span>
<span id="cb51-963"><a href="#cb51-963" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">palette =</span> colors) <span class="sc">+</span> </span>
<span id="cb51-964"><a href="#cb51-964" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(dem_reclassified_pasorapa) <span class="sc">+</span></span>
<span id="cb51-965"><a href="#cb51-965" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb51-966"><a href="#cb51-966" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(dem_reclassified_pojo) <span class="sc">+</span></span>
<span id="cb51-967"><a href="#cb51-967" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb51-968"><a href="#cb51-968" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(dem_reclassified_totora) <span class="sc">+</span></span>
<span id="cb51-969"><a href="#cb51-969" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb51-970"><a href="#cb51-970" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb51-971"><a href="#cb51-971" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb51-972"><a href="#cb51-972" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb51-973"><a href="#cb51-973" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_text</span>(<span class="st">"NAME_3"</span>, <span class="at">size =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb51-974"><a href="#cb51-974" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span>  </span>
<span id="cb51-975"><a href="#cb51-975" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb51-976"><a href="#cb51-976" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Author: Johannes Quente"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb51-977"><a href="#cb51-977" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb51-978"><a href="#cb51-978" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb51-979"><a href="#cb51-979" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb51-980"><a href="#cb51-980" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb51-981"><a href="#cb51-981" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb51-982"><a href="#cb51-982" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-983"><a href="#cb51-983" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-984"><a href="#cb51-984" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-985"><a href="#cb51-985" aria-hidden="true" tabindex="-1"></a>\newpage</span>
<span id="cb51-986"><a href="#cb51-986" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-987"><a href="#cb51-987" aria-hidden="true" tabindex="-1"></a><span class="fu">### DEM (Perspective) Data</span></span>
<span id="cb51-988"><a href="#cb51-988" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-989"><a href="#cb51-989" aria-hidden="true" tabindex="-1"></a>The provided Digital Elevation Model (DEM) consists of raster values showcasing variations in altitudes. These altitude values where converted into perspective data, therefore each pixel now showing the degree in which the groundstructure faces (0-360 degrees) using the <span class="in">`terra::terrain("aspect")`</span> -function from the Terra package. The reclassification has been calculated according to @tbl-data-weights-def-drought.</span>
<span id="cb51-990"><a href="#cb51-990" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-991"><a href="#cb51-991" aria-hidden="true" tabindex="-1"></a>Subsequently the slope data was categorized into varying degrees of possibility of drought (in %) based on their positioning due to facing the sun during the day. For further review of the reclassification code, please refer to the <span class="co">[</span><span class="ot">Appendix</span><span class="co">](#sec-sec-aspect)</span>.</span>
<span id="cb51-992"><a href="#cb51-992" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-993"><a href="#cb51-993" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb51-994"><a href="#cb51-994" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-perspective</span></span>
<span id="cb51-995"><a href="#cb51-995" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Reclassification table of the Aspect Data"</span></span>
<span id="cb51-996"><a href="#cb51-996" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-997"><a href="#cb51-997" aria-hidden="true" tabindex="-1"></a><span class="do">### terrain::aspect Pasorapa &amp; Aiquile</span></span>
<span id="cb51-998"><a href="#cb51-998" aria-hidden="true" tabindex="-1"></a>aspect_pasorapa <span class="ot">&lt;-</span> <span class="fu">terrain</span>(dem_mask_pasorapa, <span class="st">"aspect"</span>)</span>
<span id="cb51-999"><a href="#cb51-999" aria-hidden="true" tabindex="-1"></a>aspect_aiquile  <span class="ot">&lt;-</span> <span class="fu">terrain</span>(dem_mask_aiquile, <span class="st">"aspect"</span>)</span>
<span id="cb51-1000"><a href="#cb51-1000" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1001"><a href="#cb51-1001" aria-hidden="true" tabindex="-1"></a><span class="co"># writeRaster(aspect_pasorapa, "aspect_pasorapa.tif")</span></span>
<span id="cb51-1002"><a href="#cb51-1002" aria-hidden="true" tabindex="-1"></a><span class="co"># writeRaster(aspect_aiquile, "aspect_aiquile.tif")</span></span>
<span id="cb51-1003"><a href="#cb51-1003" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1004"><a href="#cb51-1004" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1005"><a href="#cb51-1005" aria-hidden="true" tabindex="-1"></a><span class="co"># reclass</span></span>
<span id="cb51-1006"><a href="#cb51-1006" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a tibble with the reclassification table</span></span>
<span id="cb51-1007"><a href="#cb51-1007" aria-hidden="true" tabindex="-1"></a>reclass_table_aspect <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb51-1008"><a href="#cb51-1008" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>from, <span class="sc">~</span>to, <span class="sc">~</span>becomes,</span>
<span id="cb51-1009"><a href="#cb51-1009" aria-hidden="true" tabindex="-1"></a>  <span class="sc">-</span><span class="cn">Inf</span>, <span class="dv">45</span>, <span class="dv">0</span>,</span>
<span id="cb51-1010"><a href="#cb51-1010" aria-hidden="true" tabindex="-1"></a>  <span class="dv">45</span>, <span class="dv">135</span>, <span class="fl">0.25</span>,</span>
<span id="cb51-1011"><a href="#cb51-1011" aria-hidden="true" tabindex="-1"></a>  <span class="dv">135</span>, <span class="dv">225</span>, <span class="dv">1</span>,</span>
<span id="cb51-1012"><a href="#cb51-1012" aria-hidden="true" tabindex="-1"></a>  <span class="dv">225</span>, <span class="dv">315</span>, <span class="fl">0.25</span>,</span>
<span id="cb51-1013"><a href="#cb51-1013" aria-hidden="true" tabindex="-1"></a>  <span class="dv">315</span>, <span class="cn">Inf</span>, <span class="dv">0</span></span>
<span id="cb51-1014"><a href="#cb51-1014" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-1015"><a href="#cb51-1015" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1016"><a href="#cb51-1016" aria-hidden="true" tabindex="-1"></a><span class="co"># Pasorapa: Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb51-1017"><a href="#cb51-1017" aria-hidden="true" tabindex="-1"></a>aspect_reclassified_aiquile <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(aspect_aiquile, reclass_table_aspect, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-1018"><a href="#cb51-1018" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1019"><a href="#cb51-1019" aria-hidden="true" tabindex="-1"></a><span class="co"># Aiquile: Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb51-1020"><a href="#cb51-1020" aria-hidden="true" tabindex="-1"></a>aspect_reclassified_pasorapa <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(aspect_pasorapa, reclass_table_aspect, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-1021"><a href="#cb51-1021" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1022"><a href="#cb51-1022" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1023"><a href="#cb51-1023" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1026"><a href="#cb51-1026" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1027"><a href="#cb51-1027" aria-hidden="true" tabindex="-1"></a><span class="co"># write rds</span></span>
<span id="cb51-1028"><a href="#cb51-1028" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(aspect_reclassified_aiquile, "aspect_reclassified_aiquile.rds")</span></span>
<span id="cb51-1029"><a href="#cb51-1029" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(aspect_reclassified_pasorapa, "aspect_reclassified_pasorapa.rds")</span></span>
<span id="cb51-1030"><a href="#cb51-1030" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1031"><a href="#cb51-1031" aria-hidden="true" tabindex="-1"></a><span class="co"># read rds</span></span>
<span id="cb51-1032"><a href="#cb51-1032" aria-hidden="true" tabindex="-1"></a>aspect_reclassified_aiquile  <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"aspect_reclassified_aiquile.rds"</span>)</span>
<span id="cb51-1033"><a href="#cb51-1033" aria-hidden="true" tabindex="-1"></a>aspect_reclassified_pasorapa <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"aspect_reclassified_pasorapa.rds"</span>)</span>
<span id="cb51-1034"><a href="#cb51-1034" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1035"><a href="#cb51-1035" aria-hidden="true" tabindex="-1"></a><span class="co"># read other data</span></span>
<span id="cb51-1036"><a href="#cb51-1036" aria-hidden="true" tabindex="-1"></a>aspect_reclassified_pojo   <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"aspect_reclassified_pojo.rds"</span>)</span>
<span id="cb51-1037"><a href="#cb51-1037" aria-hidden="true" tabindex="-1"></a>aspect_reclassified_totora <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"aspect_reclassified_totora.rds"</span>)</span>
<span id="cb51-1038"><a href="#cb51-1038" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1039"><a href="#cb51-1039" aria-hidden="true" tabindex="-1"></a><span class="co"># kable(reclass_table_aspect)</span></span>
<span id="cb51-1040"><a href="#cb51-1040" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1041"><a href="#cb51-1041" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1044"><a href="#cb51-1044" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1045"><a href="#cb51-1045" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-perspective</span></span>
<span id="cb51-1046"><a href="#cb51-1046" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "DEM derived Perspective reclassification"</span></span>
<span id="cb51-1047"><a href="#cb51-1047" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 5</span></span>
<span id="cb51-1048"><a href="#cb51-1048" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 5</span></span>
<span id="cb51-1049"><a href="#cb51-1049" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1050"><a href="#cb51-1050" aria-hidden="true" tabindex="-1"></a><span class="co"># change name</span></span>
<span id="cb51-1051"><a href="#cb51-1051" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(aspect_reclassified_aiquile) <span class="ot">&lt;-</span> <span class="st">"Drought Risk"</span></span>
<span id="cb51-1052"><a href="#cb51-1052" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1053"><a href="#cb51-1053" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb51-1054"><a href="#cb51-1054" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb51-1055"><a href="#cb51-1055" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(aspect_reclassified_aiquile) <span class="sc">+</span></span>
<span id="cb51-1056"><a href="#cb51-1056" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">palette =</span> colors) <span class="sc">+</span> </span>
<span id="cb51-1057"><a href="#cb51-1057" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(aspect_reclassified_pasorapa) <span class="sc">+</span></span>
<span id="cb51-1058"><a href="#cb51-1058" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb51-1059"><a href="#cb51-1059" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(aspect_reclassified_pojo) <span class="sc">+</span></span>
<span id="cb51-1060"><a href="#cb51-1060" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb51-1061"><a href="#cb51-1061" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(aspect_reclassified_totora) <span class="sc">+</span></span>
<span id="cb51-1062"><a href="#cb51-1062" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb51-1063"><a href="#cb51-1063" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb51-1064"><a href="#cb51-1064" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb51-1065"><a href="#cb51-1065" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb51-1066"><a href="#cb51-1066" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_text</span>(<span class="st">"NAME_3"</span>, <span class="at">size =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb51-1067"><a href="#cb51-1067" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span>  </span>
<span id="cb51-1068"><a href="#cb51-1068" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb51-1069"><a href="#cb51-1069" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Author: Johannes Quente"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb51-1070"><a href="#cb51-1070" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb51-1071"><a href="#cb51-1071" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb51-1072"><a href="#cb51-1072" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb51-1073"><a href="#cb51-1073" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb51-1074"><a href="#cb51-1074" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb51-1075"><a href="#cb51-1075" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-1076"><a href="#cb51-1076" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1077"><a href="#cb51-1077" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1078"><a href="#cb51-1078" aria-hidden="true" tabindex="-1"></a>\newpage</span>
<span id="cb51-1079"><a href="#cb51-1079" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1080"><a href="#cb51-1080" aria-hidden="true" tabindex="-1"></a><span class="fu">### Precipitation Data</span></span>
<span id="cb51-1081"><a href="#cb51-1081" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1082"><a href="#cb51-1082" aria-hidden="true" tabindex="-1"></a>The following Data provided by @fick2017worldclim resembles Precipitation Data on a 30 Arc Second Accuracy. The format provides one Raster-Layer for each month.</span>
<span id="cb51-1083"><a href="#cb51-1083" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1084"><a href="#cb51-1084" aria-hidden="true" tabindex="-1"></a>Twelve raster layers have been aggregated to generate a unified raster layer, facilitating subsequent classification. The outcome is a comprehensive raster layer encompassing the total precipitation for the average year spanning from 1970 to 2000. The utilized code is available in the <span class="co">[</span><span class="ot">Appendix</span><span class="co">](#sec-sec-precip)</span> In the reclassification process, values were partitioned into five equally distributed groups based on frequency, with each group representing 20% of the total data frequency. The distribution and grouping methodology are illustrated in @fig-hist-precip-drought. The reclassification has been calculated according to @tbl-data-weights-def-drought.</span>
<span id="cb51-1085"><a href="#cb51-1085" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1088"><a href="#cb51-1088" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1089"><a href="#cb51-1089" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-precipitation</span></span>
<span id="cb51-1090"><a href="#cb51-1090" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Reclassification table of the Precipitation Data"</span></span>
<span id="cb51-1091"><a href="#cb51-1091" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1092"><a href="#cb51-1092" aria-hidden="true" tabindex="-1"></a>precip_pasorapa <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">"sum_raster_pasorapa.tif"</span>)</span>
<span id="cb51-1093"><a href="#cb51-1093" aria-hidden="true" tabindex="-1"></a>precip_aiquile  <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">"sum_raster.tif"</span>)</span>
<span id="cb51-1094"><a href="#cb51-1094" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1095"><a href="#cb51-1095" aria-hidden="true" tabindex="-1"></a>precip_pojo     <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">"precip_pojo.tif"</span>)</span>
<span id="cb51-1096"><a href="#cb51-1096" aria-hidden="true" tabindex="-1"></a>precip_totora   <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">"precip_totora.tif"</span>)</span>
<span id="cb51-1097"><a href="#cb51-1097" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1098"><a href="#cb51-1098" aria-hidden="true" tabindex="-1"></a>precip_todos    <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">"precip_todos.tif"</span>)</span>
<span id="cb51-1099"><a href="#cb51-1099" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1100"><a href="#cb51-1100" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclass</span></span>
<span id="cb51-1101"><a href="#cb51-1101" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a tibble with the reclassification table</span></span>
<span id="cb51-1102"><a href="#cb51-1102" aria-hidden="true" tabindex="-1"></a>reclass_table_precip <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb51-1103"><a href="#cb51-1103" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>from, <span class="sc">~</span>to, <span class="sc">~</span>becomes,</span>
<span id="cb51-1104"><a href="#cb51-1104" aria-hidden="true" tabindex="-1"></a>  <span class="fl">1058.2</span>, <span class="cn">Inf</span>,     <span class="dv">0</span>,     </span>
<span id="cb51-1105"><a href="#cb51-1105" aria-hidden="true" tabindex="-1"></a>  <span class="dv">640</span>,    <span class="fl">1058.2</span>,  <span class="fl">0.25</span>,  </span>
<span id="cb51-1106"><a href="#cb51-1106" aria-hidden="true" tabindex="-1"></a>  <span class="dv">571</span>,    <span class="dv">640</span>,     <span class="fl">0.5</span>,   </span>
<span id="cb51-1107"><a href="#cb51-1107" aria-hidden="true" tabindex="-1"></a>  <span class="fl">513.8</span>,  <span class="dv">571</span>,     <span class="fl">0.75</span>,  </span>
<span id="cb51-1108"><a href="#cb51-1108" aria-hidden="true" tabindex="-1"></a>  <span class="sc">-</span><span class="cn">Inf</span>,   <span class="fl">513.8</span>,   <span class="dv">1</span>      </span>
<span id="cb51-1109"><a href="#cb51-1109" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-1110"><a href="#cb51-1110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1111"><a href="#cb51-1111" aria-hidden="true" tabindex="-1"></a><span class="co"># Reclassify the slope raster based on the reclassification table</span></span>
<span id="cb51-1112"><a href="#cb51-1112" aria-hidden="true" tabindex="-1"></a>precip_reclassified_pasorapa <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(precip_pasorapa, reclass_table_precip, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-1113"><a href="#cb51-1113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1114"><a href="#cb51-1114" aria-hidden="true" tabindex="-1"></a>precip_reclassified_aiquile <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(precip_aiquile, reclass_table_precip, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-1115"><a href="#cb51-1115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1116"><a href="#cb51-1116" aria-hidden="true" tabindex="-1"></a>precip_reclassified_pojo <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(precip_pojo, reclass_table_precip, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-1117"><a href="#cb51-1117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1118"><a href="#cb51-1118" aria-hidden="true" tabindex="-1"></a>precip_reclassified_totora <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(precip_totora, reclass_table_precip, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-1119"><a href="#cb51-1119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1120"><a href="#cb51-1120" aria-hidden="true" tabindex="-1"></a><span class="co"># todos</span></span>
<span id="cb51-1121"><a href="#cb51-1121" aria-hidden="true" tabindex="-1"></a>precip_reclassified_todos <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">classify</span>(precip_todos, reclass_table_precip, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-1122"><a href="#cb51-1122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1123"><a href="#cb51-1123" aria-hidden="true" tabindex="-1"></a><span class="co"># table</span></span>
<span id="cb51-1124"><a href="#cb51-1124" aria-hidden="true" tabindex="-1"></a><span class="co"># kable(reclass_table_precip)</span></span>
<span id="cb51-1125"><a href="#cb51-1125" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1126"><a href="#cb51-1126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1129"><a href="#cb51-1129" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1130"><a href="#cb51-1130" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-hist-precip-drought</span></span>
<span id="cb51-1131"><a href="#cb51-1131" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Distribution of the Precipitation Data"</span></span>
<span id="cb51-1132"><a href="#cb51-1132" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify the number of breaks (bins)</span></span>
<span id="cb51-1133"><a href="#cb51-1133" aria-hidden="true" tabindex="-1"></a>num_breaks <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb51-1134"><a href="#cb51-1134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1135"><a href="#cb51-1135" aria-hidden="true" tabindex="-1"></a>break_values <span class="ot">&lt;-</span> <span class="fu">quantile</span>(<span class="fu">values</span>(precip_todos, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">probs =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> num_breaks <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb51-1136"><a href="#cb51-1136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1137"><a href="#cb51-1137" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the histogram with equal-frequency breaks</span></span>
<span id="cb51-1138"><a href="#cb51-1138" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">values</span>(precip_todos), <span class="at">breaks =</span> <span class="st">"FD"</span>, <span class="at">main =</span> <span class="st">"Histogram of Data Distribution"</span>, <span class="at">xlab =</span> <span class="st">"Drought Risk Values"</span>, <span class="at">col =</span> <span class="st">"skyblue"</span>, <span class="at">border =</span> <span class="st">"black"</span>, <span class="at">plot =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-1139"><a href="#cb51-1139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1140"><a href="#cb51-1140" aria-hidden="true" tabindex="-1"></a><span class="co"># Add vertical lines to represent the breaks</span></span>
<span id="cb51-1141"><a href="#cb51-1141" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">quantile</span>(<span class="fu">values</span>(precip_todos, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">probs =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> num_breaks <span class="sc">+</span> <span class="dv">1</span>)), <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb51-1142"><a href="#cb51-1142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1143"><a href="#cb51-1143" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1144"><a href="#cb51-1144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1147"><a href="#cb51-1147" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1148"><a href="#cb51-1148" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-precipitation</span></span>
<span id="cb51-1149"><a href="#cb51-1149" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Reclassification Result of the Precipitation Data"</span></span>
<span id="cb51-1150"><a href="#cb51-1150" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 5</span></span>
<span id="cb51-1151"><a href="#cb51-1151" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 5</span></span>
<span id="cb51-1152"><a href="#cb51-1152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1153"><a href="#cb51-1153" aria-hidden="true" tabindex="-1"></a><span class="co"># change name</span></span>
<span id="cb51-1154"><a href="#cb51-1154" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(precip_reclassified_todos) <span class="ot">&lt;-</span> <span class="st">"Drought Risk"</span></span>
<span id="cb51-1155"><a href="#cb51-1155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1156"><a href="#cb51-1156" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb51-1157"><a href="#cb51-1157" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb51-1158"><a href="#cb51-1158" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(precip_reclassified_todos) <span class="sc">+</span></span>
<span id="cb51-1159"><a href="#cb51-1159" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">palette =</span> colors) <span class="sc">+</span> </span>
<span id="cb51-1160"><a href="#cb51-1160" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb51-1161"><a href="#cb51-1161" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb51-1162"><a href="#cb51-1162" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb51-1163"><a href="#cb51-1163" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_text</span>(<span class="st">"NAME_3"</span>, <span class="at">size =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb51-1164"><a href="#cb51-1164" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span>  </span>
<span id="cb51-1165"><a href="#cb51-1165" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb51-1166"><a href="#cb51-1166" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Author: Johannes Quente"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb51-1167"><a href="#cb51-1167" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb51-1168"><a href="#cb51-1168" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb51-1169"><a href="#cb51-1169" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb51-1170"><a href="#cb51-1170" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb51-1171"><a href="#cb51-1171" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb51-1172"><a href="#cb51-1172" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-1173"><a href="#cb51-1173" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1174"><a href="#cb51-1174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1175"><a href="#cb51-1175" aria-hidden="true" tabindex="-1"></a>\newpage</span>
<span id="cb51-1176"><a href="#cb51-1176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1177"><a href="#cb51-1177" aria-hidden="true" tabindex="-1"></a><span class="fu">## Results Drought Risk Modeling</span></span>
<span id="cb51-1178"><a href="#cb51-1178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1179"><a href="#cb51-1179" aria-hidden="true" tabindex="-1"></a>In this chapter the Results of the Drought Risk Modeling are being presented: @fig-histogram-distribution-drought provides a visual representation of the data distribution, offering transparent insight into the significance of the reclassification values.</span>
<span id="cb51-1180"><a href="#cb51-1180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1181"><a href="#cb51-1181" aria-hidden="true" tabindex="-1"></a>Further @fig-all-results-drought showcases the Drought Risk Map results for the four municipalities, aiding in understanding the spatial distribution of drought risk. In @fig-histogram-equaly displays the data values across the four municipalities using Histograms, categorized into five equally distributed classes: "Very Low", "Low", "Moderate", "High", and "Very High".</span>
<span id="cb51-1182"><a href="#cb51-1182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1183"><a href="#cb51-1183" aria-hidden="true" tabindex="-1"></a>A ratio scale-based risk mapping has been used to evenly distribute the data produced during the analysis. The @fig-all-results-drought-equal presents the results with data values equally distributed across the four municipalities, providing a comprehensive overview of drought risk levels.</span>
<span id="cb51-1184"><a href="#cb51-1184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1187"><a href="#cb51-1187" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1188"><a href="#cb51-1188" aria-hidden="true" tabindex="-1"></a><span class="do">### Totora</span></span>
<span id="cb51-1189"><a href="#cb51-1189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1190"><a href="#cb51-1190" aria-hidden="true" tabindex="-1"></a><span class="co"># Align resolutions </span></span>
<span id="cb51-1191"><a href="#cb51-1191" aria-hidden="true" tabindex="-1"></a>river_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(river_totora, dem_reclassified_totora)</span>
<span id="cb51-1192"><a href="#cb51-1192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1193"><a href="#cb51-1193" aria-hidden="true" tabindex="-1"></a>aspect_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(aspect_reclassified_totora, river_reclassified)</span>
<span id="cb51-1194"><a href="#cb51-1194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1195"><a href="#cb51-1195" aria-hidden="true" tabindex="-1"></a>max_temp_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(max_temp_reclassified_totora, aspect_reclassified)</span>
<span id="cb51-1196"><a href="#cb51-1196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1197"><a href="#cb51-1197" aria-hidden="true" tabindex="-1"></a>precip_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(precip_reclassified_totora, max_temp_reclassified)</span>
<span id="cb51-1198"><a href="#cb51-1198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1199"><a href="#cb51-1199" aria-hidden="true" tabindex="-1"></a>dem_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(dem_reclassified_totora, precip_reclassified)</span>
<span id="cb51-1200"><a href="#cb51-1200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1201"><a href="#cb51-1201" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted weights</span></span>
<span id="cb51-1202"><a href="#cb51-1202" aria-hidden="true" tabindex="-1"></a>weight_temp_max    <span class="ot">&lt;-</span> <span class="fl">0.2</span></span>
<span id="cb51-1203"><a href="#cb51-1203" aria-hidden="true" tabindex="-1"></a>weight_perspektive <span class="ot">&lt;-</span> <span class="fl">0.15</span></span>
<span id="cb51-1204"><a href="#cb51-1204" aria-hidden="true" tabindex="-1"></a>weight_dem         <span class="ot">&lt;-</span> <span class="fl">0.15</span></span>
<span id="cb51-1205"><a href="#cb51-1205" aria-hidden="true" tabindex="-1"></a>weight_river_dist  <span class="ot">&lt;-</span> <span class="fl">0.2</span></span>
<span id="cb51-1206"><a href="#cb51-1206" aria-hidden="true" tabindex="-1"></a>weight_precip      <span class="ot">&lt;-</span> <span class="fl">0.3</span></span>
<span id="cb51-1207"><a href="#cb51-1207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1208"><a href="#cb51-1208" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the adjusted weighted combination</span></span>
<span id="cb51-1209"><a href="#cb51-1209" aria-hidden="true" tabindex="-1"></a>final_raster <span class="ot">&lt;-</span> weight_temp_max      <span class="sc">*</span> max_temp_reclassified <span class="sc">+</span></span>
<span id="cb51-1210"><a href="#cb51-1210" aria-hidden="true" tabindex="-1"></a>                weight_perspektive   <span class="sc">*</span> aspect_reclassified <span class="sc">+</span></span>
<span id="cb51-1211"><a href="#cb51-1211" aria-hidden="true" tabindex="-1"></a>                weight_dem           <span class="sc">*</span> dem_reclassified <span class="sc">+</span></span>
<span id="cb51-1212"><a href="#cb51-1212" aria-hidden="true" tabindex="-1"></a>                weight_river_dist    <span class="sc">*</span> river_reclassified <span class="sc">+</span></span>
<span id="cb51-1213"><a href="#cb51-1213" aria-hidden="true" tabindex="-1"></a>                weight_precip        <span class="sc">*</span> precip_reclassified</span>
<span id="cb51-1214"><a href="#cb51-1214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1215"><a href="#cb51-1215" aria-hidden="true" tabindex="-1"></a>final_raster_totora <span class="ot">&lt;-</span> final_raster</span>
<span id="cb51-1216"><a href="#cb51-1216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1217"><a href="#cb51-1217" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the weights and data</span></span>
<span id="cb51-1218"><a href="#cb51-1218" aria-hidden="true" tabindex="-1"></a>weights <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>)</span>
<span id="cb51-1219"><a href="#cb51-1219" aria-hidden="true" tabindex="-1"></a>data_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Max temp"</span>, <span class="st">"Perspektive"</span>, <span class="st">"Land Use"</span>, <span class="st">"DEM"</span>, <span class="st">"River Data"</span>, <span class="st">"Precipitation"</span>)</span>
<span id="cb51-1220"><a href="#cb51-1220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1221"><a href="#cb51-1221" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the table</span></span>
<span id="cb51-1222"><a href="#cb51-1222" aria-hidden="true" tabindex="-1"></a>table_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Weight =</span> weights, <span class="at">Data =</span> data_names)</span>
<span id="cb51-1223"><a href="#cb51-1223" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1224"><a href="#cb51-1224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1227"><a href="#cb51-1227" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1228"><a href="#cb51-1228" aria-hidden="true" tabindex="-1"></a><span class="co"># 0%        20%        40%        60%        80%       100% </span></span>
<span id="cb51-1229"><a href="#cb51-1229" aria-hidden="true" tabindex="-1"></a><span class="co"># 0.05683258 0.26250001 0.30620000 0.35955495 0.42100001 0.69281250 </span></span>
<span id="cb51-1230"><a href="#cb51-1230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1231"><a href="#cb51-1231" aria-hidden="true" tabindex="-1"></a><span class="co"># Define breaks and labels for the reclassification</span></span>
<span id="cb51-1232"><a href="#cb51-1232" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.05683258</span>, <span class="fl">0.26250001</span>, <span class="fl">0.3062</span>, <span class="fl">0.35955495</span>, <span class="fl">0.42100001</span>, <span class="fl">0.69281250</span>)</span>
<span id="cb51-1233"><a href="#cb51-1233" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Muy bajo"</span>, <span class="st">"Bajo"</span>, <span class="st">"Moderado"</span>, <span class="st">"Alto"</span>, <span class="st">"Muy alto"</span>)</span>
<span id="cb51-1234"><a href="#cb51-1234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1235"><a href="#cb51-1235" aria-hidden="true" tabindex="-1"></a><span class="co"># Cut the raster values into categorical factors</span></span>
<span id="cb51-1236"><a href="#cb51-1236" aria-hidden="true" tabindex="-1"></a>factor_raster <span class="ot">&lt;-</span> <span class="fu">cut</span>(<span class="fu">values</span>(final_raster_totora), <span class="at">breaks =</span> breaks, <span class="at">labels =</span> labels, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-1237"><a href="#cb51-1237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1238"><a href="#cb51-1238" aria-hidden="true" tabindex="-1"></a><span class="co"># change name</span></span>
<span id="cb51-1239"><a href="#cb51-1239" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(final_raster_totora) <span class="ot">&lt;-</span> <span class="st">"Drought Risk"</span></span>
<span id="cb51-1240"><a href="#cb51-1240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1241"><a href="#cb51-1241" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new raster with categorized values</span></span>
<span id="cb51-1242"><a href="#cb51-1242" aria-hidden="true" tabindex="-1"></a>r_categorized         <span class="ot">&lt;-</span> final_raster_totora</span>
<span id="cb51-1243"><a href="#cb51-1243" aria-hidden="true" tabindex="-1"></a><span class="fu">values</span>(r_categorized) <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(factor_raster)</span>
<span id="cb51-1244"><a href="#cb51-1244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1245"><a href="#cb51-1245" aria-hidden="true" tabindex="-1"></a>r_categorized_totora <span class="ot">&lt;-</span> r_categorized</span>
<span id="cb51-1246"><a href="#cb51-1246" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1247"><a href="#cb51-1247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1250"><a href="#cb51-1250" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1251"><a href="#cb51-1251" aria-hidden="true" tabindex="-1"></a><span class="do">### Pojo</span></span>
<span id="cb51-1252"><a href="#cb51-1252" aria-hidden="true" tabindex="-1"></a><span class="co"># Align resolutions </span></span>
<span id="cb51-1253"><a href="#cb51-1253" aria-hidden="true" tabindex="-1"></a>river_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(river_pojo, dem_reclassified_pojo)</span>
<span id="cb51-1254"><a href="#cb51-1254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1255"><a href="#cb51-1255" aria-hidden="true" tabindex="-1"></a>aspect_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(aspect_reclassified_pojo, river_reclassified)</span>
<span id="cb51-1256"><a href="#cb51-1256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1257"><a href="#cb51-1257" aria-hidden="true" tabindex="-1"></a>max_temp_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(max_temp_reclassified_pojo, aspect_reclassified)</span>
<span id="cb51-1258"><a href="#cb51-1258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1259"><a href="#cb51-1259" aria-hidden="true" tabindex="-1"></a>precip_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(precip_reclassified_pojo, max_temp_reclassified)</span>
<span id="cb51-1260"><a href="#cb51-1260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1261"><a href="#cb51-1261" aria-hidden="true" tabindex="-1"></a>dem_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(dem_reclassified_pojo, precip_reclassified)</span>
<span id="cb51-1262"><a href="#cb51-1262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1263"><a href="#cb51-1263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1264"><a href="#cb51-1264" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the adjusted weighted combination</span></span>
<span id="cb51-1265"><a href="#cb51-1265" aria-hidden="true" tabindex="-1"></a>final_raster <span class="ot">&lt;-</span> weight_temp_max      <span class="sc">*</span> max_temp_reclassified <span class="sc">+</span></span>
<span id="cb51-1266"><a href="#cb51-1266" aria-hidden="true" tabindex="-1"></a>                weight_perspektive   <span class="sc">*</span> aspect_reclassified <span class="sc">+</span></span>
<span id="cb51-1267"><a href="#cb51-1267" aria-hidden="true" tabindex="-1"></a>                weight_dem           <span class="sc">*</span> dem_reclassified <span class="sc">+</span></span>
<span id="cb51-1268"><a href="#cb51-1268" aria-hidden="true" tabindex="-1"></a>                weight_river_dist    <span class="sc">*</span> river_reclassified <span class="sc">+</span></span>
<span id="cb51-1269"><a href="#cb51-1269" aria-hidden="true" tabindex="-1"></a>                weight_precip        <span class="sc">*</span> precip_reclassified</span>
<span id="cb51-1270"><a href="#cb51-1270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1271"><a href="#cb51-1271" aria-hidden="true" tabindex="-1"></a>final_raster_pojo <span class="ot">&lt;-</span> final_raster</span>
<span id="cb51-1272"><a href="#cb51-1272" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(final_raster)</span></span>
<span id="cb51-1273"><a href="#cb51-1273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1274"><a href="#cb51-1274" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the weights and data</span></span>
<span id="cb51-1275"><a href="#cb51-1275" aria-hidden="true" tabindex="-1"></a>weights <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>)</span>
<span id="cb51-1276"><a href="#cb51-1276" aria-hidden="true" tabindex="-1"></a>data_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Max temp"</span>, <span class="st">"Perspektive"</span>, <span class="st">"Land Use"</span>, <span class="st">"DEM"</span>, <span class="st">"River Data"</span>, <span class="st">"Precipitation"</span>)</span>
<span id="cb51-1277"><a href="#cb51-1277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1278"><a href="#cb51-1278" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the table</span></span>
<span id="cb51-1279"><a href="#cb51-1279" aria-hidden="true" tabindex="-1"></a>table_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Weight =</span> weights, <span class="at">Data =</span> data_names)</span>
<span id="cb51-1280"><a href="#cb51-1280" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1281"><a href="#cb51-1281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1284"><a href="#cb51-1284" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1285"><a href="#cb51-1285" aria-hidden="true" tabindex="-1"></a><span class="co">#         0%        20%        40%        60%        80%       100% </span></span>
<span id="cb51-1286"><a href="#cb51-1286" aria-hidden="true" tabindex="-1"></a><span class="co"># 0.07236859 0.26130000 0.30203100 0.34262143 0.40750000 0.65400001 </span></span>
<span id="cb51-1287"><a href="#cb51-1287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1288"><a href="#cb51-1288" aria-hidden="true" tabindex="-1"></a><span class="co"># Define breaks and labels for the reclassification</span></span>
<span id="cb51-1289"><a href="#cb51-1289" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.07236859</span>, <span class="fl">0.2613</span>, <span class="fl">0.302031</span>, <span class="fl">0.34262143</span>, <span class="fl">0.4075</span>, <span class="fl">0.65400001</span>)</span>
<span id="cb51-1290"><a href="#cb51-1290" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Muy bajo"</span>, <span class="st">"Bajo"</span>, <span class="st">"Moderado"</span>, <span class="st">"Alto"</span>, <span class="st">"Muy alto"</span>)</span>
<span id="cb51-1291"><a href="#cb51-1291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1292"><a href="#cb51-1292" aria-hidden="true" tabindex="-1"></a><span class="co"># Cut the raster values into categorical factors</span></span>
<span id="cb51-1293"><a href="#cb51-1293" aria-hidden="true" tabindex="-1"></a>factor_raster <span class="ot">&lt;-</span> <span class="fu">cut</span>(<span class="fu">values</span>(final_raster), <span class="at">breaks =</span> breaks, <span class="at">labels =</span> labels, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-1294"><a href="#cb51-1294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1295"><a href="#cb51-1295" aria-hidden="true" tabindex="-1"></a><span class="co"># change name</span></span>
<span id="cb51-1296"><a href="#cb51-1296" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(final_raster) <span class="ot">&lt;-</span> <span class="st">"Drought Risk"</span></span>
<span id="cb51-1297"><a href="#cb51-1297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1298"><a href="#cb51-1298" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new raster with categorized values</span></span>
<span id="cb51-1299"><a href="#cb51-1299" aria-hidden="true" tabindex="-1"></a>r_categorized         <span class="ot">&lt;-</span> final_raster</span>
<span id="cb51-1300"><a href="#cb51-1300" aria-hidden="true" tabindex="-1"></a><span class="fu">values</span>(r_categorized) <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(factor_raster)</span>
<span id="cb51-1301"><a href="#cb51-1301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1302"><a href="#cb51-1302" aria-hidden="true" tabindex="-1"></a>r_categorized_pojo <span class="ot">&lt;-</span> r_categorized</span>
<span id="cb51-1303"><a href="#cb51-1303" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1304"><a href="#cb51-1304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1307"><a href="#cb51-1307" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1308"><a href="#cb51-1308" aria-hidden="true" tabindex="-1"></a><span class="do">### Pasorapa</span></span>
<span id="cb51-1309"><a href="#cb51-1309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1310"><a href="#cb51-1310" aria-hidden="true" tabindex="-1"></a><span class="co"># Align resolutions </span></span>
<span id="cb51-1311"><a href="#cb51-1311" aria-hidden="true" tabindex="-1"></a>river_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(river_reclassified_pasorapa, dem_reclassified_pasorapa)</span>
<span id="cb51-1312"><a href="#cb51-1312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1313"><a href="#cb51-1313" aria-hidden="true" tabindex="-1"></a>aspect_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(aspect_reclassified_pasorapa, river_reclassified)</span>
<span id="cb51-1314"><a href="#cb51-1314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1315"><a href="#cb51-1315" aria-hidden="true" tabindex="-1"></a>max_temp_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(max_temp_reclassified_pasorapa, aspect_reclassified)</span>
<span id="cb51-1316"><a href="#cb51-1316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1317"><a href="#cb51-1317" aria-hidden="true" tabindex="-1"></a>precip_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(precip_reclassified_pasorapa, max_temp_reclassified)</span>
<span id="cb51-1318"><a href="#cb51-1318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1319"><a href="#cb51-1319" aria-hidden="true" tabindex="-1"></a>dem_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(dem_reclassified_pasorapa, precip_reclassified)</span>
<span id="cb51-1320"><a href="#cb51-1320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1321"><a href="#cb51-1321" aria-hidden="true" tabindex="-1"></a><span class="co"># Ponderación de criterios segun: ELABORACION DEL MAPA DE RIESGO A SEQUIAS</span></span>
<span id="cb51-1322"><a href="#cb51-1322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1323"><a href="#cb51-1323" aria-hidden="true" tabindex="-1"></a><span class="co"># ((( [V_ATsqia_1] *0.75) + ( [V_PL_sqia] *0.25)) * 0.40) + ((( [V_uso_sqia] *0.52) + ( [V_dens] *0.16) +( [V_DR_sqia] *0.14) + ( [V_slp_sqia] *0.1) + ( [V_Orie_sqi] *0.08)) *0.60)</span></span>
<span id="cb51-1324"><a href="#cb51-1324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1325"><a href="#cb51-1325" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the adjusted weighted combination</span></span>
<span id="cb51-1326"><a href="#cb51-1326" aria-hidden="true" tabindex="-1"></a>final_raster <span class="ot">&lt;-</span> weight_temp_max      <span class="sc">*</span> max_temp_reclassified <span class="sc">+</span></span>
<span id="cb51-1327"><a href="#cb51-1327" aria-hidden="true" tabindex="-1"></a>                weight_perspektive   <span class="sc">*</span> aspect_reclassified <span class="sc">+</span></span>
<span id="cb51-1328"><a href="#cb51-1328" aria-hidden="true" tabindex="-1"></a>                weight_dem           <span class="sc">*</span> dem_reclassified <span class="sc">+</span></span>
<span id="cb51-1329"><a href="#cb51-1329" aria-hidden="true" tabindex="-1"></a>                weight_river_dist    <span class="sc">*</span> river_reclassified <span class="sc">+</span></span>
<span id="cb51-1330"><a href="#cb51-1330" aria-hidden="true" tabindex="-1"></a>                weight_precip        <span class="sc">*</span> precip_reclassified</span>
<span id="cb51-1331"><a href="#cb51-1331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1332"><a href="#cb51-1332" aria-hidden="true" tabindex="-1"></a>final_raster_pasorapa <span class="ot">&lt;-</span> final_raster</span>
<span id="cb51-1333"><a href="#cb51-1333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1334"><a href="#cb51-1334" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the weights and data</span></span>
<span id="cb51-1335"><a href="#cb51-1335" aria-hidden="true" tabindex="-1"></a>weights <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>)</span>
<span id="cb51-1336"><a href="#cb51-1336" aria-hidden="true" tabindex="-1"></a>data_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Max temp"</span>, <span class="st">"Perspektive"</span>, <span class="st">"Land Use"</span>, <span class="st">"DEM"</span>, <span class="st">"River Data"</span>, <span class="st">"Precipitation"</span>)</span>
<span id="cb51-1337"><a href="#cb51-1337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1338"><a href="#cb51-1338" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the table</span></span>
<span id="cb51-1339"><a href="#cb51-1339" aria-hidden="true" tabindex="-1"></a>table_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Weight =</span> weights, <span class="at">Data =</span> data_names)</span>
<span id="cb51-1340"><a href="#cb51-1340" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1341"><a href="#cb51-1341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1344"><a href="#cb51-1344" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1345"><a href="#cb51-1345" aria-hidden="true" tabindex="-1"></a><span class="co">#        0%       20%       40%       60%       80%      100% </span></span>
<span id="cb51-1346"><a href="#cb51-1346" aria-hidden="true" tabindex="-1"></a><span class="co"># 0.2885000 0.4974375 0.5435000 0.5865875 0.6375000 0.8966000 </span></span>
<span id="cb51-1347"><a href="#cb51-1347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1348"><a href="#cb51-1348" aria-hidden="true" tabindex="-1"></a><span class="co"># Define breaks and labels for the reclassification</span></span>
<span id="cb51-1349"><a href="#cb51-1349" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.2885</span>, <span class="fl">0.4974375</span>, <span class="fl">0.5435</span>, <span class="fl">0.5865875</span>, <span class="fl">0.6375</span>, <span class="fl">0.8966</span>)</span>
<span id="cb51-1350"><a href="#cb51-1350" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Muy bajo"</span>, <span class="st">"Bajo"</span>, <span class="st">"Moderado"</span>, <span class="st">"Alto"</span>, <span class="st">"Muy alto"</span>)</span>
<span id="cb51-1351"><a href="#cb51-1351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1352"><a href="#cb51-1352" aria-hidden="true" tabindex="-1"></a><span class="co"># Cut the raster values into categorical factors</span></span>
<span id="cb51-1353"><a href="#cb51-1353" aria-hidden="true" tabindex="-1"></a>factor_raster <span class="ot">&lt;-</span> <span class="fu">cut</span>(<span class="fu">values</span>(final_raster), <span class="at">breaks =</span> breaks, <span class="at">labels =</span> labels, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-1354"><a href="#cb51-1354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1355"><a href="#cb51-1355" aria-hidden="true" tabindex="-1"></a><span class="co"># change name</span></span>
<span id="cb51-1356"><a href="#cb51-1356" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(final_raster) <span class="ot">&lt;-</span> <span class="st">"Drought Risk"</span></span>
<span id="cb51-1357"><a href="#cb51-1357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1358"><a href="#cb51-1358" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new raster with categorized values</span></span>
<span id="cb51-1359"><a href="#cb51-1359" aria-hidden="true" tabindex="-1"></a>r_categorized         <span class="ot">&lt;-</span> final_raster</span>
<span id="cb51-1360"><a href="#cb51-1360" aria-hidden="true" tabindex="-1"></a><span class="fu">values</span>(r_categorized) <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(factor_raster)</span>
<span id="cb51-1361"><a href="#cb51-1361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1362"><a href="#cb51-1362" aria-hidden="true" tabindex="-1"></a>r_categorized_pasorapa <span class="ot">&lt;-</span> r_categorized</span>
<span id="cb51-1363"><a href="#cb51-1363" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1364"><a href="#cb51-1364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1367"><a href="#cb51-1367" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1368"><a href="#cb51-1368" aria-hidden="true" tabindex="-1"></a><span class="do">### Aiquile</span></span>
<span id="cb51-1369"><a href="#cb51-1369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1370"><a href="#cb51-1370" aria-hidden="true" tabindex="-1"></a><span class="co"># Align resolutions (resample geo)</span></span>
<span id="cb51-1371"><a href="#cb51-1371" aria-hidden="true" tabindex="-1"></a>river_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(river_reclassified_aiquile, dem_reclassified_aiquile)</span>
<span id="cb51-1372"><a href="#cb51-1372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1373"><a href="#cb51-1373" aria-hidden="true" tabindex="-1"></a><span class="co"># Align resolutions (resample geo)</span></span>
<span id="cb51-1374"><a href="#cb51-1374" aria-hidden="true" tabindex="-1"></a>aspect_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(aspect_reclassified_aiquile, river_reclassified)</span>
<span id="cb51-1375"><a href="#cb51-1375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1376"><a href="#cb51-1376" aria-hidden="true" tabindex="-1"></a><span class="co"># Align resolutions (resample geo)</span></span>
<span id="cb51-1377"><a href="#cb51-1377" aria-hidden="true" tabindex="-1"></a>max_temp_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(max_temp_reclassified_aiquile, aspect_reclassified)</span>
<span id="cb51-1378"><a href="#cb51-1378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1379"><a href="#cb51-1379" aria-hidden="true" tabindex="-1"></a><span class="co"># Align resolutions (resample geo)</span></span>
<span id="cb51-1380"><a href="#cb51-1380" aria-hidden="true" tabindex="-1"></a>precip_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(precip_reclassified_aiquile, max_temp_reclassified)</span>
<span id="cb51-1381"><a href="#cb51-1381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1382"><a href="#cb51-1382" aria-hidden="true" tabindex="-1"></a>dem_reclassified <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(dem_reclassified_aiquile, precip_reclassified)</span>
<span id="cb51-1383"><a href="#cb51-1383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1384"><a href="#cb51-1384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1385"><a href="#cb51-1385" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the adjusted weighted combination</span></span>
<span id="cb51-1386"><a href="#cb51-1386" aria-hidden="true" tabindex="-1"></a>final_raster <span class="ot">&lt;-</span> weight_temp_max      <span class="sc">*</span> max_temp_reclassified <span class="sc">+</span></span>
<span id="cb51-1387"><a href="#cb51-1387" aria-hidden="true" tabindex="-1"></a>                weight_perspektive   <span class="sc">*</span> aspect_reclassified <span class="sc">+</span></span>
<span id="cb51-1388"><a href="#cb51-1388" aria-hidden="true" tabindex="-1"></a>                weight_dem           <span class="sc">*</span> dem_reclassified <span class="sc">+</span></span>
<span id="cb51-1389"><a href="#cb51-1389" aria-hidden="true" tabindex="-1"></a>                weight_river_dist    <span class="sc">*</span> river_reclassified <span class="sc">+</span></span>
<span id="cb51-1390"><a href="#cb51-1390" aria-hidden="true" tabindex="-1"></a>                weight_precip        <span class="sc">*</span> precip_reclassified</span>
<span id="cb51-1391"><a href="#cb51-1391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1392"><a href="#cb51-1392" aria-hidden="true" tabindex="-1"></a>final_raster_aiquile <span class="ot">&lt;-</span> final_raster</span>
<span id="cb51-1393"><a href="#cb51-1393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1394"><a href="#cb51-1394" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the weights and data</span></span>
<span id="cb51-1395"><a href="#cb51-1395" aria-hidden="true" tabindex="-1"></a>weights <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.15</span>, <span class="fl">0.15</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>)</span>
<span id="cb51-1396"><a href="#cb51-1396" aria-hidden="true" tabindex="-1"></a>data_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Max temp"</span>, <span class="st">"Perspektive"</span>, <span class="st">"DEM"</span>, <span class="st">"River Data"</span>, <span class="st">"Precipitation"</span>)</span>
<span id="cb51-1397"><a href="#cb51-1397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1398"><a href="#cb51-1398" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the table</span></span>
<span id="cb51-1399"><a href="#cb51-1399" aria-hidden="true" tabindex="-1"></a>table_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Weight =</span> weights, <span class="at">Data =</span> data_names)</span>
<span id="cb51-1400"><a href="#cb51-1400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1401"><a href="#cb51-1401" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the table</span></span>
<span id="cb51-1402"><a href="#cb51-1402" aria-hidden="true" tabindex="-1"></a><span class="co"># kable(table_data)</span></span>
<span id="cb51-1403"><a href="#cb51-1403" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1404"><a href="#cb51-1404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1407"><a href="#cb51-1407" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1408"><a href="#cb51-1408" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-result-aquile</span></span>
<span id="cb51-1409"><a href="#cb51-1409" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Reclassified and Weighted Result in Pasorapa"</span></span>
<span id="cb51-1410"><a href="#cb51-1410" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 7</span></span>
<span id="cb51-1411"><a href="#cb51-1411" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 7</span></span>
<span id="cb51-1412"><a href="#cb51-1412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1413"><a href="#cb51-1413" aria-hidden="true" tabindex="-1"></a><span class="co">#        0%       20%       40%       60%       80%      100% </span></span>
<span id="cb51-1414"><a href="#cb51-1414" aria-hidden="true" tabindex="-1"></a><span class="co"># 0.2085000 0.4322500 0.4763125 0.5184375 0.5797500 0.8700000 </span></span>
<span id="cb51-1415"><a href="#cb51-1415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1416"><a href="#cb51-1416" aria-hidden="true" tabindex="-1"></a><span class="co"># Define breaks and labels for the reclassification</span></span>
<span id="cb51-1417"><a href="#cb51-1417" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.2085</span>, <span class="fl">0.43225</span>, <span class="fl">0.4763125</span>, <span class="fl">0.5184375</span>, <span class="fl">0.57975</span>, <span class="fl">0.87</span>)</span>
<span id="cb51-1418"><a href="#cb51-1418" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Muy bajo"</span>, <span class="st">"Bajo"</span>, <span class="st">"Moderado"</span>, <span class="st">"Alto"</span>, <span class="st">"Muy alto"</span>)</span>
<span id="cb51-1419"><a href="#cb51-1419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1420"><a href="#cb51-1420" aria-hidden="true" tabindex="-1"></a><span class="co"># Cut the raster values into categorical factors</span></span>
<span id="cb51-1421"><a href="#cb51-1421" aria-hidden="true" tabindex="-1"></a>factor_raster <span class="ot">&lt;-</span> <span class="fu">cut</span>(<span class="fu">values</span>(final_raster), <span class="at">breaks =</span> breaks, <span class="at">labels =</span> labels, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-1422"><a href="#cb51-1422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1423"><a href="#cb51-1423" aria-hidden="true" tabindex="-1"></a><span class="co"># change name</span></span>
<span id="cb51-1424"><a href="#cb51-1424" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(final_raster) <span class="ot">&lt;-</span> <span class="st">"Drought Risk"</span></span>
<span id="cb51-1425"><a href="#cb51-1425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1426"><a href="#cb51-1426" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new raster with categorized values</span></span>
<span id="cb51-1427"><a href="#cb51-1427" aria-hidden="true" tabindex="-1"></a>r_categorized         <span class="ot">&lt;-</span> final_raster</span>
<span id="cb51-1428"><a href="#cb51-1428" aria-hidden="true" tabindex="-1"></a><span class="fu">values</span>(r_categorized) <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(factor_raster)</span>
<span id="cb51-1429"><a href="#cb51-1429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1430"><a href="#cb51-1430" aria-hidden="true" tabindex="-1"></a>r_categorized_aiquile <span class="ot">&lt;-</span> r_categorized</span>
<span id="cb51-1431"><a href="#cb51-1431" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1432"><a href="#cb51-1432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1435"><a href="#cb51-1435" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1436"><a href="#cb51-1436" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-histogram-distribution-drought</span></span>
<span id="cb51-1437"><a href="#cb51-1437" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Data Distribution of the four Municipalities"</span></span>
<span id="cb51-1438"><a href="#cb51-1438" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-subcap: </span></span>
<span id="cb51-1439"><a href="#cb51-1439" aria-hidden="true" tabindex="-1"></a><span class="co">#| -  "Distribution of Pojo"</span></span>
<span id="cb51-1440"><a href="#cb51-1440" aria-hidden="true" tabindex="-1"></a><span class="co">#| -  "Distribution of Pasorapa"</span></span>
<span id="cb51-1441"><a href="#cb51-1441" aria-hidden="true" tabindex="-1"></a><span class="co">#| -  "Distribution of Aiquile"</span></span>
<span id="cb51-1442"><a href="#cb51-1442" aria-hidden="true" tabindex="-1"></a><span class="co">#| -  "Distribution of Totora"</span></span>
<span id="cb51-1443"><a href="#cb51-1443" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-nrow: 2</span></span>
<span id="cb51-1444"><a href="#cb51-1444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1445"><a href="#cb51-1445" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the municipalities</span></span>
<span id="cb51-1446"><a href="#cb51-1446" aria-hidden="true" tabindex="-1"></a>municipalities <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"pojo"</span>, <span class="st">"pasorapa"</span>, <span class="st">"aiquile"</span>, <span class="st">"totora"</span>)</span>
<span id="cb51-1447"><a href="#cb51-1447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1448"><a href="#cb51-1448" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the number of breaks (bins)</span></span>
<span id="cb51-1449"><a href="#cb51-1449" aria-hidden="true" tabindex="-1"></a>num_breaks <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb51-1450"><a href="#cb51-1450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1451"><a href="#cb51-1451" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop over each municipality</span></span>
<span id="cb51-1452"><a href="#cb51-1452" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (municipality <span class="cf">in</span> municipalities) {</span>
<span id="cb51-1453"><a href="#cb51-1453" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get the final raster data for the current municipality</span></span>
<span id="cb51-1454"><a href="#cb51-1454" aria-hidden="true" tabindex="-1"></a>  final_raster <span class="ot">&lt;-</span> <span class="cf">switch</span>(municipality,</span>
<span id="cb51-1455"><a href="#cb51-1455" aria-hidden="true" tabindex="-1"></a>                         <span class="at">pojo =</span> final_raster_pojo,</span>
<span id="cb51-1456"><a href="#cb51-1456" aria-hidden="true" tabindex="-1"></a>                         <span class="at">pasorapa =</span> final_raster_pasorapa,</span>
<span id="cb51-1457"><a href="#cb51-1457" aria-hidden="true" tabindex="-1"></a>                         <span class="at">aiquile =</span> final_raster_aiquile,</span>
<span id="cb51-1458"><a href="#cb51-1458" aria-hidden="true" tabindex="-1"></a>                         <span class="at">totora =</span> final_raster_totora)</span>
<span id="cb51-1459"><a href="#cb51-1459" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-1460"><a href="#cb51-1460" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Check if final_raster is NULL</span></span>
<span id="cb51-1461"><a href="#cb51-1461" aria-hidden="true" tabindex="-1"></a>  <span class="co"># if (is.null(final_raster)) {</span></span>
<span id="cb51-1462"><a href="#cb51-1462" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   cat("Error: Final raster data is NULL for", municipality, "\n")</span></span>
<span id="cb51-1463"><a href="#cb51-1463" aria-hidden="true" tabindex="-1"></a>  <span class="co"># } else {</span></span>
<span id="cb51-1464"><a href="#cb51-1464" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb51-1465"><a href="#cb51-1465" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Compute the break values</span></span>
<span id="cb51-1466"><a href="#cb51-1466" aria-hidden="true" tabindex="-1"></a>    break_values <span class="ot">&lt;-</span> <span class="fu">quantile</span>(<span class="fu">values</span>(final_raster, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">probs =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> num_breaks <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb51-1467"><a href="#cb51-1467" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb51-1468"><a href="#cb51-1468" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Capitalize the first letter of the municipality name</span></span>
<span id="cb51-1469"><a href="#cb51-1469" aria-hidden="true" tabindex="-1"></a>    capitalized_municipality <span class="ot">&lt;-</span> <span class="fu">str_to_title</span>(municipality)</span>
<span id="cb51-1470"><a href="#cb51-1470" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb51-1471"><a href="#cb51-1471" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create the histogram with equal-frequency breaks</span></span>
<span id="cb51-1472"><a href="#cb51-1472" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hist</span>(<span class="fu">values</span>(final_raster), <span class="at">breaks =</span> <span class="st">"FD"</span>, <span class="at">main =</span> <span class="fu">paste</span>(<span class="st">"Histogram of Drought Risk for"</span>, capitalized_municipality), <span class="at">xlab =</span> <span class="st">"Drought Risk Values"</span>, <span class="at">col =</span> <span class="st">"skyblue"</span>, <span class="at">border =</span> <span class="st">"black"</span>, <span class="at">plot =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-1473"><a href="#cb51-1473" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb51-1474"><a href="#cb51-1474" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add vertical lines to represent the breaks</span></span>
<span id="cb51-1475"><a href="#cb51-1475" aria-hidden="true" tabindex="-1"></a>    <span class="fu">abline</span>(<span class="at">v =</span> break_values, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb51-1476"><a href="#cb51-1476" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb51-1477"><a href="#cb51-1477" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1478"><a href="#cb51-1478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1481"><a href="#cb51-1481" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1482"><a href="#cb51-1482" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-all-results-drought</span></span>
<span id="cb51-1483"><a href="#cb51-1483" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Result Drought Risk for each Municipality"</span></span>
<span id="cb51-1484"><a href="#cb51-1484" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 7</span></span>
<span id="cb51-1485"><a href="#cb51-1485" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 7</span></span>
<span id="cb51-1486"><a href="#cb51-1486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1487"><a href="#cb51-1487" aria-hidden="true" tabindex="-1"></a><span class="co"># change name</span></span>
<span id="cb51-1488"><a href="#cb51-1488" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(precip_reclassified_todos) <span class="ot">&lt;-</span> <span class="st">"Drought Risk"</span></span>
<span id="cb51-1489"><a href="#cb51-1489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1490"><a href="#cb51-1490" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb51-1491"><a href="#cb51-1491" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb51-1492"><a href="#cb51-1492" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(r_categorized_totora) <span class="sc">+</span></span>
<span id="cb51-1493"><a href="#cb51-1493" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb51-1494"><a href="#cb51-1494" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(r_categorized_pojo) <span class="sc">+</span></span>
<span id="cb51-1495"><a href="#cb51-1495" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb51-1496"><a href="#cb51-1496" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(r_categorized_aiquile) <span class="sc">+</span></span>
<span id="cb51-1497"><a href="#cb51-1497" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb51-1498"><a href="#cb51-1498" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(r_categorized_pasorapa) <span class="sc">+</span></span>
<span id="cb51-1499"><a href="#cb51-1499" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb51-1500"><a href="#cb51-1500" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb51-1501"><a href="#cb51-1501" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb51-1502"><a href="#cb51-1502" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb51-1503"><a href="#cb51-1503" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_text</span>(<span class="st">"NAME_3"</span>, <span class="at">size =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb51-1504"><a href="#cb51-1504" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span>  </span>
<span id="cb51-1505"><a href="#cb51-1505" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb51-1506"><a href="#cb51-1506" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Author: Johannes Quente"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb51-1507"><a href="#cb51-1507" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb51-1508"><a href="#cb51-1508" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb51-1509"><a href="#cb51-1509" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb51-1510"><a href="#cb51-1510" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb51-1511"><a href="#cb51-1511" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb51-1512"><a href="#cb51-1512" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-1513"><a href="#cb51-1513" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1514"><a href="#cb51-1514" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1515"><a href="#cb51-1515" aria-hidden="true" tabindex="-1"></a>\newpage</span>
<span id="cb51-1516"><a href="#cb51-1516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1519"><a href="#cb51-1519" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1520"><a href="#cb51-1520" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-histogram-equaly</span></span>
<span id="cb51-1521"><a href="#cb51-1521" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Distribution of the final Data"</span></span>
<span id="cb51-1522"><a href="#cb51-1522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1523"><a href="#cb51-1523" aria-hidden="true" tabindex="-1"></a><span class="co"># Use terra::merge to combine the raster layers</span></span>
<span id="cb51-1524"><a href="#cb51-1524" aria-hidden="true" tabindex="-1"></a>final_raster <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">merge</span>(final_raster_pojo, final_raster_pasorapa, final_raster_aiquile, final_raster_totora)</span>
<span id="cb51-1525"><a href="#cb51-1525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1526"><a href="#cb51-1526" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify the number of breaks (bins)</span></span>
<span id="cb51-1527"><a href="#cb51-1527" aria-hidden="true" tabindex="-1"></a>num_breaks <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb51-1528"><a href="#cb51-1528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1529"><a href="#cb51-1529" aria-hidden="true" tabindex="-1"></a>break_values <span class="ot">&lt;-</span> <span class="fu">quantile</span>(<span class="fu">values</span>(final_raster, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">probs =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> num_breaks <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb51-1530"><a href="#cb51-1530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1531"><a href="#cb51-1531" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract numeric values</span></span>
<span id="cb51-1532"><a href="#cb51-1532" aria-hidden="true" tabindex="-1"></a>numeric_breaks <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(break_values))</span>
<span id="cb51-1533"><a href="#cb51-1533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1534"><a href="#cb51-1534" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the histogram with equal-frequency breaks</span></span>
<span id="cb51-1535"><a href="#cb51-1535" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(final_raster, <span class="at">breaks =</span> <span class="st">"FD"</span>, <span class="at">main =</span> <span class="st">"Histogram of Drought Risk"</span>, <span class="at">xlab =</span> <span class="st">"Drought Risk Values"</span>, <span class="at">col =</span> <span class="st">"skyblue"</span>, <span class="at">border =</span> <span class="st">"black"</span>, <span class="at">plot =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-1536"><a href="#cb51-1536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1537"><a href="#cb51-1537" aria-hidden="true" tabindex="-1"></a><span class="co"># Add vertical lines at quantile positions</span></span>
<span id="cb51-1538"><a href="#cb51-1538" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> break_values, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb51-1539"><a href="#cb51-1539" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1540"><a href="#cb51-1540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1543"><a href="#cb51-1543" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1544"><a href="#cb51-1544" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-all-results-drought-equal</span></span>
<span id="cb51-1545"><a href="#cb51-1545" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Result Drought Risk for 4 Municipalities"</span></span>
<span id="cb51-1546"><a href="#cb51-1546" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb51-1547"><a href="#cb51-1547" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb51-1548"><a href="#cb51-1548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1549"><a href="#cb51-1549" aria-hidden="true" tabindex="-1"></a><span class="co"># Define breaks and labels for the reclassification</span></span>
<span id="cb51-1550"><a href="#cb51-1550" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">&lt;-</span> numeric_breaks</span>
<span id="cb51-1551"><a href="#cb51-1551" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Muy bajo"</span>, <span class="st">"Bajo"</span>, <span class="st">"Moderado"</span>, <span class="st">"Alto"</span>, <span class="st">"Muy alto"</span>)</span>
<span id="cb51-1552"><a href="#cb51-1552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1553"><a href="#cb51-1553" aria-hidden="true" tabindex="-1"></a><span class="co"># Cut the raster values into categorical factors</span></span>
<span id="cb51-1554"><a href="#cb51-1554" aria-hidden="true" tabindex="-1"></a>factor_raster <span class="ot">&lt;-</span> <span class="fu">cut</span>(<span class="fu">values</span>(final_raster), <span class="at">breaks =</span> breaks, <span class="at">labels =</span> labels, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-1555"><a href="#cb51-1555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1556"><a href="#cb51-1556" aria-hidden="true" tabindex="-1"></a><span class="co"># change name</span></span>
<span id="cb51-1557"><a href="#cb51-1557" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(final_raster) <span class="ot">&lt;-</span> <span class="st">"Drought Risk"</span></span>
<span id="cb51-1558"><a href="#cb51-1558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1559"><a href="#cb51-1559" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new raster with categorized values</span></span>
<span id="cb51-1560"><a href="#cb51-1560" aria-hidden="true" tabindex="-1"></a>r_categorized         <span class="ot">&lt;-</span> final_raster</span>
<span id="cb51-1561"><a href="#cb51-1561" aria-hidden="true" tabindex="-1"></a><span class="fu">values</span>(r_categorized) <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(factor_raster)</span>
<span id="cb51-1562"><a href="#cb51-1562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1563"><a href="#cb51-1563" aria-hidden="true" tabindex="-1"></a><span class="co"># view</span></span>
<span id="cb51-1564"><a href="#cb51-1564" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb51-1565"><a href="#cb51-1565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1566"><a href="#cb51-1566" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(r_categorized, <span class="at">labels =</span> <span class="st">"New Legend Label"</span>) <span class="sc">+</span></span>
<span id="cb51-1567"><a href="#cb51-1567" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">palette =</span> colors) <span class="sc">+</span>  </span>
<span id="cb51-1568"><a href="#cb51-1568" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(all_municipalities) <span class="sc">+</span></span>
<span id="cb51-1569"><a href="#cb51-1569" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb51-1570"><a href="#cb51-1570" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb51-1571"><a href="#cb51-1571" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_text</span>(<span class="st">"NAME_3"</span>, <span class="at">size =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb51-1572"><a href="#cb51-1572" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span>  </span>
<span id="cb51-1573"><a href="#cb51-1573" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb51-1574"><a href="#cb51-1574" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Author: Johannes Quente"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb51-1575"><a href="#cb51-1575" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb51-1576"><a href="#cb51-1576" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb51-1577"><a href="#cb51-1577" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb51-1578"><a href="#cb51-1578" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb51-1579"><a href="#cb51-1579" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb51-1580"><a href="#cb51-1580" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-1581"><a href="#cb51-1581" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1582"><a href="#cb51-1582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1583"><a href="#cb51-1583" aria-hidden="true" tabindex="-1"></a>\newpage</span>
<span id="cb51-1584"><a href="#cb51-1584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1585"><a href="#cb51-1585" aria-hidden="true" tabindex="-1"></a><span class="fu">## Discussion</span></span>
<span id="cb51-1586"><a href="#cb51-1586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1587"><a href="#cb51-1587" aria-hidden="true" tabindex="-1"></a>This study aims to evaluate the risk of drought, flood, and frost and identify potential risk zones in the Valle Alto region of Cochabamba, including Aiquile, Pasorapa, Pojo, and Totoro. </span>
<span id="cb51-1588"><a href="#cb51-1588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1589"><a href="#cb51-1589" aria-hidden="true" tabindex="-1"></a>The objective of this study is to provide evidence-based information to enhance the resilience of communities and ecosystems to hazards related to drought, flood, and frost. A ratio scale-based risk mapping has been identified as the most effective method to evenly distribute the data produced during the analysis.</span>
<span id="cb51-1590"><a href="#cb51-1590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1591"><a href="#cb51-1591" aria-hidden="true" tabindex="-1"></a>To improve the precision of our models, it is crucial to evaluate this readjustment based on empirical insights and observations from the studied environments. By fine-tuning these weights, we can align our models more closely with the intricate realities of these ecosystems, potentially revealing details that may have been missed in previous analyses.</span>
<span id="cb51-1592"><a href="#cb51-1592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1593"><a href="#cb51-1593" aria-hidden="true" tabindex="-1"></a>In proposing these customized weighting and reclassification parameters, my aim is to assist the scientific discourse by introducing a more precise perspective. This method offers a clearer view through which various dynamics of our natural environments can be examined, comprehended, and conveyed.</span>
<span id="cb51-1594"><a href="#cb51-1594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1595"><a href="#cb51-1595" aria-hidden="true" tabindex="-1"></a>While temperature is a standard indicator, its impact varies across different plant species, suggesting the need for a more comprehensive consideration of frost impacts beyond freezing temperatures <span class="co">[</span><span class="ot">@Condori2014</span><span class="co">]</span>.</span>
<span id="cb51-1596"><a href="#cb51-1596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1597"><a href="#cb51-1597" aria-hidden="true" tabindex="-1"></a>In the future, by leveraging satellite imagery and tapping into local knowledge through field visits and workshops with stakeholders, there is potential to enhance the mapping of historically flood-prone areas significantly. This would involve evaluating the intensity of floods and delineating these zones to gain deeper insights into the frequency and impact of flooding. Such a comprehensive approach is crucial for effectively addressing the multifaceted challenges posed by these natural phenomena <span class="co">[</span><span class="ot">@Tanim2022</span><span class="co">]</span>.</span>
<span id="cb51-1598"><a href="#cb51-1598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1599"><a href="#cb51-1599" aria-hidden="true" tabindex="-1"></a><span class="fu">## Conclusion</span></span>
<span id="cb51-1600"><a href="#cb51-1600" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1601"><a href="#cb51-1601" aria-hidden="true" tabindex="-1"></a>The objective of this study was to identify areas in the four Municipalities of the Cono Sur area of the State of Cochabamba that are susceptible to droughts, floods, and frosts.</span>
<span id="cb51-1602"><a href="#cb51-1602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1603"><a href="#cb51-1603" aria-hidden="true" tabindex="-1"></a>To achieve this, various geospatial datasets were explored, including terrain attributes, geological features, and precipitation records. Each dataset was analyzed using predetermined weights to emphasize their relative importance in the study. During the Multicriteria Analysis, we integrated numerous Raster and Vector Layers using weighted factors.</span>
<span id="cb51-1604"><a href="#cb51-1604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1605"><a href="#cb51-1605" aria-hidden="true" tabindex="-1"></a>By utilizing the R-Studio Environment and key packages crucial for these calculations the resultant raster (@fig-all-results-drought and @fig-all-results-drought-equal) provides a comprehensive representation of the region's environmental aspects.</span>
<span id="cb51-1606"><a href="#cb51-1606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1607"><a href="#cb51-1607" aria-hidden="true" tabindex="-1"></a>The methodology aims to identify areas that are at risk of severe impact from certain meteorological conditions. It supports local policymaking by utilizing an adaptable approach.</span>
<span id="cb51-1608"><a href="#cb51-1608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1609"><a href="#cb51-1609" aria-hidden="true" tabindex="-1"></a>The risk potential is classified into five categories: 'Very low', 'Low', 'Moderate', 'High', and 'Very High', as shown on the map. To ensure a balanced visualization of the five risk categories, the resulting data has been equally partitioned into five equally distributed groups.</span>
<span id="cb51-1610"><a href="#cb51-1610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1611"><a href="#cb51-1611" aria-hidden="true" tabindex="-1"></a><span class="fu">## Appendix Maps</span></span>
<span id="cb51-1612"><a href="#cb51-1612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1615"><a href="#cb51-1615" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1616"><a href="#cb51-1616" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-result-totora</span></span>
<span id="cb51-1617"><a href="#cb51-1617" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Reclassified and Weighted Result in Totora"</span></span>
<span id="cb51-1618"><a href="#cb51-1618" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 7</span></span>
<span id="cb51-1619"><a href="#cb51-1619" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 7</span></span>
<span id="cb51-1620"><a href="#cb51-1620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1621"><a href="#cb51-1621" aria-hidden="true" tabindex="-1"></a><span class="co"># view</span></span>
<span id="cb51-1622"><a href="#cb51-1622" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb51-1623"><a href="#cb51-1623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1624"><a href="#cb51-1624" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(r_categorized_totora, <span class="at">labels =</span> <span class="st">"New Legend Label"</span>) <span class="sc">+</span></span>
<span id="cb51-1625"><a href="#cb51-1625" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">style =</span> <span class="st">"cont"</span>, <span class="at">palette =</span> colors, <span class="at">breaks =</span> breaks) <span class="sc">+</span>  <span class="co"># Change style to "cont" or "cat"</span></span>
<span id="cb51-1626"><a href="#cb51-1626" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span>  </span>
<span id="cb51-1627"><a href="#cb51-1627" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb51-1628"><a href="#cb51-1628" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Author: Johannes Quente"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb51-1629"><a href="#cb51-1629" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb51-1630"><a href="#cb51-1630" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb51-1631"><a href="#cb51-1631" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb51-1632"><a href="#cb51-1632" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb51-1633"><a href="#cb51-1633" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb51-1634"><a href="#cb51-1634" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-1635"><a href="#cb51-1635" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1636"><a href="#cb51-1636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1639"><a href="#cb51-1639" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1640"><a href="#cb51-1640" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-result-pojo</span></span>
<span id="cb51-1641"><a href="#cb51-1641" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Reclassified and Weighted Result in Pojo"</span></span>
<span id="cb51-1642"><a href="#cb51-1642" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 7</span></span>
<span id="cb51-1643"><a href="#cb51-1643" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 7</span></span>
<span id="cb51-1644"><a href="#cb51-1644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1645"><a href="#cb51-1645" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(r_categorized_pojo, <span class="at">labels =</span> <span class="st">"New Legend Label"</span>) <span class="sc">+</span></span>
<span id="cb51-1646"><a href="#cb51-1646" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">style =</span> <span class="st">"cont"</span>, <span class="at">palette =</span> colors, <span class="at">breaks =</span> breaks) <span class="sc">+</span>  <span class="co"># Change style to "cont" or "cat"</span></span>
<span id="cb51-1647"><a href="#cb51-1647" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span>  </span>
<span id="cb51-1648"><a href="#cb51-1648" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb51-1649"><a href="#cb51-1649" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Author: Johannes Quente"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb51-1650"><a href="#cb51-1650" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb51-1651"><a href="#cb51-1651" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb51-1652"><a href="#cb51-1652" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb51-1653"><a href="#cb51-1653" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb51-1654"><a href="#cb51-1654" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb51-1655"><a href="#cb51-1655" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-1656"><a href="#cb51-1656" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1657"><a href="#cb51-1657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1660"><a href="#cb51-1660" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1661"><a href="#cb51-1661" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-result-pasorapa</span></span>
<span id="cb51-1662"><a href="#cb51-1662" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Reclassified and Weighted Result in Pasorapa"</span></span>
<span id="cb51-1663"><a href="#cb51-1663" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 7</span></span>
<span id="cb51-1664"><a href="#cb51-1664" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 7</span></span>
<span id="cb51-1665"><a href="#cb51-1665" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1666"><a href="#cb51-1666" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(r_categorized_pasorapa, <span class="at">labels =</span> <span class="st">"New Legend Label"</span>) <span class="sc">+</span></span>
<span id="cb51-1667"><a href="#cb51-1667" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">style =</span> <span class="st">"cont"</span>, <span class="at">palette =</span> colors, <span class="at">breaks =</span> breaks) <span class="sc">+</span>  <span class="co"># Change style to "cont" or "cat"</span></span>
<span id="cb51-1668"><a href="#cb51-1668" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span>  </span>
<span id="cb51-1669"><a href="#cb51-1669" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb51-1670"><a href="#cb51-1670" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Author: Johannes Quente"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb51-1671"><a href="#cb51-1671" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb51-1672"><a href="#cb51-1672" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb51-1673"><a href="#cb51-1673" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb51-1674"><a href="#cb51-1674" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb51-1675"><a href="#cb51-1675" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb51-1676"><a href="#cb51-1676" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-1677"><a href="#cb51-1677" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb51-1678"><a href="#cb51-1678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1681"><a href="#cb51-1681" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb51-1682"><a href="#cb51-1682" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-result-aiquile</span></span>
<span id="cb51-1683"><a href="#cb51-1683" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Reclassified and Weighted Result in Aiquile"</span></span>
<span id="cb51-1684"><a href="#cb51-1684" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 7</span></span>
<span id="cb51-1685"><a href="#cb51-1685" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 7</span></span>
<span id="cb51-1686"><a href="#cb51-1686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-1687"><a href="#cb51-1687" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(r_categorized_aiquile, <span class="at">labels =</span> <span class="st">"New Legend Label"</span>) <span class="sc">+</span></span>
<span id="cb51-1688"><a href="#cb51-1688" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">style =</span> <span class="st">"cont"</span>, <span class="at">palette =</span> colors, <span class="at">breaks =</span> breaks) <span class="sc">+</span>  <span class="co"># Change style to "cont" or "cat"</span></span>
<span id="cb51-1689"><a href="#cb51-1689" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="at">text.size =</span> <span class="fl">0.9</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>)) <span class="sc">+</span>  </span>
<span id="cb51-1690"><a href="#cb51-1690" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"4star"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span></span>
<span id="cb51-1691"><a href="#cb51-1691" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">"Author: Johannes Quente"</span>, <span class="at">fontface =</span> <span class="st">"italic"</span>, <span class="at">align =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb51-1692"><a href="#cb51-1692" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_graticules</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb51-1693"><a href="#cb51-1693" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(</span>
<span id="cb51-1694"><a href="#cb51-1694" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text.size =</span> <span class="dv">1</span>,</span>
<span id="cb51-1695"><a href="#cb51-1695" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb51-1696"><a href="#cb51-1696" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.outside =</span> <span class="cn">TRUE</span></span>
<span id="cb51-1697"><a href="#cb51-1697" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-1698"><a href="#cb51-1698" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>